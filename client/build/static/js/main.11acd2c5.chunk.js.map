{"version":3,"sources":["firebase.js","components/Play/ChallengeBox.js","images/accept.png","images/deny.png","components/Play/BoardMsg.js","components/Play/BoardChat.js","components/Play/BoardFuncs.js","utils/atoms.js","components/Play/TestBoard.js","images/defaultPic.png","components/Play/Play.js","components/RightSidebar/User.js","components/RightSidebar/OnlineSidebar.js","components/Messages/Chat.js","components/Messages/Msg.js","components/Messages/Chatbox.js","images/back.png","components/Messages/MessageLayout.js","images/heart.png","images/filledHeart.png","components/Feed/Comment.js","components/Feed/Post.js","images/comment.png","components/Feed/Feed.js","images/picture1.png","images/cancel.png","components/SignIn/SignOut.js","components/Sidebar.js","components/Layout.js","images/home.png","images/play.png","images/envelope.png","images/user.png","images/pikachu.jpg","components/SignIn/SignIn.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","auth","storage","googleAuthProvider","analytics","GoogleAuthProvider","FieldValue","Challenge","props","className","style","fontSize","paddingRight","name","onClick","accept","uid","src","alt","decline","marginRight","ChallengeBox","challengeRef","collection","doc","useCollectionData","idField","initalChallenges","useState","challenges","setChallenges","useEffect","length","itemsProcessed","forEach","item","i","self","id","get","then","data","map","chal","padding","BoardMsg","text","message","msgClass","currentUser","BoardChat","messagesRef","gameData","docID","query","orderBy","limit","messages","msg","onKeyPress","e","target","value","key","preventDefault","add","createdAt","serverTimestamp","type","autoComplete","xcoord","ycoord","placed","initBoard","canvas","coords","color","drawBoard","x","y","Array","from","omokarrays","p","drawPiece","reInitBoard","getContext","clearRect","width","height","opponent","context","fillStyle","beginPath","arc","Math","PI","closePath","fill","moveTo","lineTo","bh","bw","strokeStyle","stroke","handleClick","turn","canvasImage","rect","getBoundingClientRect","oldX","clientX","left","oldY","clientY","top","x1","x2","y1","y2","plotclosestpoint","win","alreadyPlaced","putImageData","checkwin","numConsecHorizontal","j","numConsecVertical","k","UpperConsecDiagonal","LowerConsecDiagonal","updateWinLoss","update","increment","loss","coordinates","atom","default","turnAtom","winAtom","TestBoard","useRef","useRecoilState","setCoords","setTurn","setWin","gameResult","setGameResult","rematch","setRematch","showRematch","setShowRematch","setCanvasImage","defaultColor","setColor","current","ctx","socket","on","getImageData","strokeRect","opponentName","off","display","flexDirection","alignItems","emit","otherUid","leaveMatch","ref","Play","content","playerData","setPlayerData","headerStyle","useSetRecoilState","photo","delete","paddingTop","whiteSpace","opponentPhoto","defaultPic","User","isDesktopOrLaptop","useMediaQuery","isHovering","setHovering","dog","status","userWrapper","handleMouseHover","onMouseEnter","onMouseLeave","showChat","challenge","OnlineSidebar","usersQuery","users","otherUser","docid","displayMsgs","chatRef","exists","set","lastSent","played","user","Chat","date","strArray","d","getDate","m","getMonth","getFullYear","dateToYMD","toDate","displayChatBox","fontWeight","Msg","Chatbox","isTabletOrMobileDevice","a","objDiv","document","getElementById","scrollTop","scrollHeight","backClick","onKeyDown","sendMsgToDb","MessageLayout","msgClicked","setMsgClicked","element","ReactDOM","render","Comment","customStyles","right","bottom","transform","border","background","justifyContent","margin","overlay","backgroundColor","Post","optionsBtn","options","setOptions","numLikes","setNumLikes","numComments","setNumComments","heart","liked","setLiked","displayComment","setDisplayComment","postsQuery","docId","likes","initalComments","comments","setComments","photoStyle","backgroundImage","profilePic","profilePhoto","deletePost","child","undefined","filledHeart","modalIsOpen","setIsOpen","closeModal","position","gap","time","comment","placeholder","isOpen","onRequestClose","contentLabel","class","Feed","postImage","setPostImage","post","replace","postsRef","months","Date","today","now","res","put","removeImage","cursor","onChange","f","files","split","onInput","maxLength","URL","createObjectURL","posts","index","SignOut","isAnonymous","signOut","disconnect","Sidebar","openModal","homeClick","playClick","messagesClick","Modal","setAppElement","borderRadius","Layout","bind","inputChange","usersClick","state","home","play","contentRef","React","createRef","this","setState","inGame","reader","FileReader","file","querySelector","addEventListener","result","readAsDataURL","isMounted","openSocket","defaultValue","updateProfile","Component","SignIn","LogIn","setContent","component","pikachu","email","setEmail","password","setPassword","tryLogIn","signInWithEmailAndPassword","console","log","catch","error","alert","enterLogin","marginBottom","LogInAnonymous","provider","signInWithPopup","err","Register","username","setUsername","tryRegister","EmailValidator","where","docs","createUserWithEmailAndPassword","errorCode","code","errorMessage","enterRegister","paddingBottom","signInAnonymously","anonymous","App","chatsQuery","useAuthState","photoLink","setPhoto","privateChats","setChats","setPosts","chats","initalPosts","Promise","resolve","snapshot","getDownloadURL","url","inputName","displayName","usersRef","photoURL","thisUser","setChatsData","setPostsData","StrictMode"],"mappings":"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","file":"static/js/main.11acd2c5.chunk.js","sourcesContent":["import firebase from 'firebase/app'\nimport 'firebase/auth'\nimport 'firebase/firestore'\nimport 'firebase/analytics'\nimport 'firebase/storage'\n\nconst config = {\n    apiKey: \"AIzaSyBlIoSQfMBVD9aUeElvuRONeZrEmAOBrgM\",\n    authDomain: \"omok-7511f.firebaseapp.com\",\n    projectId: \"omok-7511f\",\n    storageBucket: \"omok-7511f.appspot.com\",\n    messagingSenderId: \"620688302381\",\n    appId: \"1:620688302381:web:b368b82c4639d6a7a873a4\"\n};\nfirebase.initializeApp(config);\n\nexport default firebase;\n\nexport const firestore = firebase.firestore();\nexport const auth = firebase.auth();\nexport const storage = firebase.storage();\nexport const analytics = firebase.analytics();\nexport const googleAuthProvider = new firebase.auth.GoogleAuthProvider();\nexport const FieldValue = firebase.firestore.FieldValue;","import accept from '../../images/accept.png'\r\nimport deny from '../../images/deny.png'\r\nimport { firestore } from '../../firebase'\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore'\r\nimport { useEffect, useState} from 'react'\r\n\r\n\r\nfunction ChallengeBox(props){\r\n    const challengeRef = firestore.collection('users').doc(props.uid).collection('challenges')\r\n    const [initalChallenges] = useCollectionData(challengeRef, { idField: 'id'})\r\n    var [challenges, setChallenges] = useState()\r\n\r\n    useEffect(() => {\r\n        if(initalChallenges && initalChallenges.length > 0){\r\n            var itemsProcessed = 0\r\n            initalChallenges.forEach( (item, i, self) => {\r\n                firestore.collection('users').doc(item.id).get().then(doc => {\r\n                    self[i].name = doc.data().name\r\n                    ++itemsProcessed\r\n                    if(itemsProcessed === self.length){\r\n                        setChallenges(initalChallenges)\r\n                    }\r\n                })\r\n            })\r\n        }else{\r\n            setChallenges()\r\n        }\r\n\r\n    }, [initalChallenges])\r\n\r\n    return(\r\n            <div id = \"challengeBox\">\r\n                <div id = 'challengeHeader'>Challenges</div>\r\n                {challenges && challenges.length > 0 ? challenges.map(chal => <Challenge key = {chal.id} name = {chal.name} uid = {chal.id} accept = {props.accept} decline = {props.decline}/>)\r\n                : <p style = {{fontSize: '20px', padding: '5px'}}>None :(</p>}\r\n            </div>\r\n    )\r\n}\r\n\r\nfunction Challenge(props){\r\n    return(\r\n        <div className = 'challengeWrapper'>\r\n            <p style = {{fontSize: '20px', paddingRight: '5px'}}>{props.name}</p>\r\n            <button className = 'challengeOptionBtn' onClick = {() => props.accept(props.uid)}><img className = 'challengeOptionIcon'src={accept} alt = \"accept\"/></button>\r\n            <button className = 'challengeOptionBtn' onClick = {() => props.decline(props.uid)} style = {{marginRight: '10px'}}><img className = 'challengeOptionIcon' src={deny} alt = \"deny\"/></button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChallengeBox","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAA1ElEQVRIie3VOwrCQBRA0SvuwJW4AkvRUhHtVCzE1v8fwc4fbsSFuAIXYqNoYiycwCNFJo4TbHLbvJw3DIFA0h/LAal0THgbOAGZOPAW4AIeMLGNNwU+tY03BD6zjdeAp8LntvGqwBe28YrAl2GDWQNcnjwUXwMOUP8CLwMPha90w2M16PD5EnSVBL6JeqKResHVLCkCdzW7jYr7DTVLCgLffYv7DRTwAjoB/Kae7U1xv35gSV7gh19xP3ldxneuq6tgDziaImH/gzNwBS5Az3RBkrY3LltA/9XJVDYAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAApUlEQVRIie2VQQ6DMAwEhz4BUtT+EuhPy6HPoQdcKSASeRN6Y67YsxExBi5EWmAEQkFvAF7mSDIACzADvSDvrWcxR5IuKvSGxPLZHFnuwNsaPsBTqH04DuQOKZZ7QqrluZDT5D/2l6gOgYv41NLJbxWhTUXvhr++oqMLVb4TWZ56Jod4RrE4RJlzOSRQv+yyq34S5UchY64wsO7z0h/OgGNdX2z4AhszUxhUUXjvAAAAAElFTkSuQmCC\"","import { auth } from '../../firebase'\r\n\r\nfunction BoardMsg(props){\r\n    const text = props.message\r\n    const msgClass = props.uid === auth.currentUser.uid ? 'sent' : 'received';\r\n    return(\r\n        <div id = \"bubble\" className = {msgClass}>\r\n            <p id = \"msgTxt\" className = {msgClass+\"Text\"}>{text}</p>\r\n        </div>\r\n    )\r\n}\r\nexport default BoardMsg","import { firestore, FieldValue } from '../../firebase'\r\nimport BoardMsg from './BoardMsg'\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore'   \r\n\r\nfunction BoardChat(props){\r\n    const messagesRef = firestore.collection('games').doc(props.gameData.docID).collection('msgs')\r\n    const query = messagesRef.orderBy('createdAt').limit(25);\r\n    const [messages] = useCollectionData(query, { idField: 'id' })\r\n\r\n    function sendMsg(e){\r\n        var msg = e.target.value\r\n        if(e.key === \"Enter\"){\r\n            e.preventDefault()\r\n            if (msg !== ''){\r\n                messagesRef.add({\r\n                    text: msg,\r\n                    createdAt: FieldValue.serverTimestamp(),\r\n                    uid: props.uid\r\n                })\r\n            }     \r\n            e.target.value = '';\r\n        }\r\n    }\r\n\r\n\r\n    return(\r\n        <div id = \"boardChatField\">\r\n            <div id = \"chatMessages\">\r\n                {messages && messages.map(msg => <BoardMsg uid = {msg.uid} key = {msg.id} message = {msg.text}/>)}\r\n            </div>\r\n            <div id = \"boardMsgWrapper\">\r\n                <div id=\"boardMsgInput\">\r\n                    <textarea id='boardChatArea' onKeyPress = {sendMsg} className=\"browser-default\" type=\"text\" autoComplete=\"off\"></textarea>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\nexport default BoardChat","import { firestore, FieldValue } from '../../firebase'\r\n\r\nvar xcoord = []\r\nvar ycoord = []\r\nvar placed = []\r\n\r\nexport function initBoard(canvas, coords, color){\r\n  drawBoard(canvas)\r\n  omokarrays()\r\n  coords.forEach(p => {\r\n    drawPiece(p.x, p.y, p.color, canvas, false)\r\n    p.color === color ? placed[(p.y-26)/35][(p.x-26)/35] = 1 : placed[(p.y-26)/35][(p.x-26)/35] = -1\r\n  })\r\n}\r\n\r\nexport function reInitBoard(canvas){\r\n  var context = canvas.getContext('2d')\r\n  context.clearRect(0, 0, canvas.width, canvas.height)\r\n  placed = Array.from({length: 20},()=> Array.from({length: 20}, () => 0))\r\n  drawBoard(canvas)\r\n}\r\n\r\nfunction omokarrays(){\r\n  for(var x = 0; x < 19; x++){\r\n    xcoord[x] = 26 +35*x;\r\n  }\r\n  for(var y = 0; y < 19; y++){\r\n    ycoord[y] = 26 + 35*y;\r\n  }\r\n  placed = Array.from({length: 20},()=> Array.from({length: 20}, () => 0))\r\n}\r\n\r\nexport function drawPiece(x, y, color, canvas, opponent){\r\n  var context = canvas.getContext('2d')\r\n  context.fillStyle = color\r\n  context.beginPath();\r\n  context.arc(x+7.5, y+7.5, 12, 0, 2 * Math.PI);\r\n  context.closePath();\r\n  context.fill()\r\n  if(opponent){\r\n    placed[(y-26)/35][(x-26)/35] = -1\r\n  }\r\n}\r\n\r\nexport function drawBoard(canvas){\r\n  var context = canvas.getContext('2d')\r\n  // Box width\r\n  var bw = 630;\r\n  // Box height\r\n  var bh = 630;\r\n  // Padding\r\n  var p = 34;\r\n  context.beginPath()\r\n  for (var x = 0; x <= bw; x += 35) {\r\n      context.moveTo(0.5 + x + p, p);\r\n      context.lineTo(0.5 + x + p, bh + p);\r\n  }\r\n  for (var y = 0; y <= bh; y += 35) {\r\n      context.moveTo(p, 0.5 + y + p);\r\n      context.lineTo(bw + p, 0.5 + y + p);\r\n  }\r\n  context.strokeStyle = \"black\";\r\n  context.stroke();\r\n}\r\n\r\nexport function handleClick(e, canvas, turn, color, canvasImage){\r\n  if(turn){\r\n    const rect = canvas.getBoundingClientRect()\r\n    var oldX = e.clientX - rect.left\r\n    var oldY = e.clientY - rect.top\r\n    oldX-=7.5\r\n    oldY-=7.5\r\n    const {x, y} = plotclosestpoint(oldX,oldY)\r\n    if(placed[(y-26)/35][(x-26)/35] === 1 || placed[(y-26)/35][(x-26)/35] === -1){\r\n      return {x, y, win: false, alreadyPlaced: true}\r\n    }\r\n    if(canvasImage){\r\n      canvas.getContext('2d').putImageData(canvasImage, 0, 0)\r\n    }\r\n    drawPiece(x,y, color, canvas, false)\r\n    placed[(y-26)/35][(x-26)/35] = 1\r\n    return {x,y, win: checkwin(), alreadyPlaced: false}\r\n  }\r\n}\r\n\r\nfunction plotclosestpoint(x,y){\r\n  if(x > 656){\r\n    x = 656\r\n  }else if(x < 26){\r\n    x = 26\r\n  }else{\r\n    for(var i = 0; i < 20; i++){\r\n      if(xcoord[i] <= x && xcoord[i+1] >= x ){\r\n        var x1 = xcoord[i];\r\n        var x2 = xcoord[i+1];\r\n        if(x2-x > x-x1){\r\n            x = x1;\r\n        }else{\r\n            x = x2;\r\n        }\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  if(y > 656){  \r\n    y = 656\r\n  }else if(y < 26){\r\n    y = 26\r\n  }else{\r\n    for(i = 0; i < 20; i++){\r\n      if(ycoord[i] <= y && ycoord[i+1] >= y ){\r\n        var y1 = xcoord[i]\r\n        var y2 = xcoord[i+1]\r\n      if(y2-y > y-y1){\r\n          y = y1\r\n      }else{\r\n          y = y2\r\n      }\r\n        break\r\n      }\r\n    }\r\n  }\r\n  return {x, y}\r\n}\r\n\r\nfunction checkwin(){\r\n  var numConsecHorizontal = 0;\r\n  for(var j = 0; j < 20; j++){\r\n    for(var i = 0; i <= 20; i++){\r\n      if(placed[j][i] === 1 && placed[j][i+1] === 1){\r\n        numConsecHorizontal++\r\n        if(numConsecHorizontal === 4){\r\n          return 'win';\r\n        }\r\n      }else{\r\n        numConsecHorizontal = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  var numConsecVertical = 0;\r\n  for(j = 0; j < 20; j++){\r\n    for(i = 0; i < 20; i++){\r\n      if(placed[i][j] === 1 && placed[i+1][j] === 1){\r\n        numConsecVertical++\r\n        if(numConsecVertical === 4){\r\n          return 'win';\r\n        }\r\n      }else{\r\n        numConsecVertical = 0;\r\n      }\r\n\r\n    }\r\n  }\r\n  //checking left diagonals\r\n  var UpperConsecDiagonal = 0;\r\n  var LowerConsecDiagonal = 0;\r\n  for(j = 0; j < 20; j++){\r\n    for(i = 0; i < 20-j; i++){\r\n      if(placed[i][i+j] === 1 && placed[i+1][i+1+j] === 1){\r\n        UpperConsecDiagonal++;\r\n        if(UpperConsecDiagonal === 4){\r\n          return 'win';\r\n        }\r\n      }else{\r\n        UpperConsecDiagonal = 0;\r\n      }\r\n    }\r\n    for(i = 0; i < 20-j; i++){\r\n      if(placed[i+j][i] === 1 && placed[i+1+j][i+1] === 1){\r\n        LowerConsecDiagonal++;\r\n        if(LowerConsecDiagonal === 4){\r\n          return 'win';\r\n        }\r\n      }else{\r\n        LowerConsecDiagonal = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  var k\r\n  for(i = 0; i < 19; i++){\r\n    for(j = 19, k = 0; j >= 0; k++, j--){\r\n      if(placed[k][j-i] === 1 && placed[k+1][j-1-i] === 1){\r\n        UpperConsecDiagonal++;\r\n        if(UpperConsecDiagonal === 4){\r\n          return 'win';\r\n        }\r\n      }else{\r\n        UpperConsecDiagonal = 0;\r\n      }\r\n    }\r\n\r\n    for(j = 19, k = 1; k+i < 19; k++, j--){\r\n      if(placed[k+i][j] === 1 && placed[k+i+1][j-1] === 1){\r\n        LowerConsecDiagonal++;\r\n        if(LowerConsecDiagonal === 4){\r\n          return 'win';\r\n        }\r\n      }else{\r\n        LowerConsecDiagonal = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport function setColor(win, defaultColor){\r\n  if(win === -1) return defaultColor\r\n  if(win) return 'black'\r\n  return 'red'\r\n}\r\n\r\nexport function updateWinLoss(win, uid){\r\n  if(win){\r\n    firestore.collection('users').doc(uid).update({\r\n      win: FieldValue.increment(1)\r\n    })\r\n  }else{\r\n    firestore.collection('users').doc(uid).update({\r\n      loss: FieldValue.increment(1)\r\n    })\r\n  }\r\n}","import { atom } from 'recoil'\r\n\r\nexport const coordinates = atom({\r\n    key: 'coordinates', // unique ID (with respect to other atoms/selectors)\r\n    default: [], // default value (aka initial value)\r\n})\r\n\r\nexport const turnAtom = atom({\r\n    key: 'turn', // unique ID (with respect to other atoms/selectors)\r\n    default: false, // default value (aka initial value)\r\n})\r\n\r\nexport const winAtom = atom({\r\n    key: 'win', // unique ID (with respect to other atoms/selectors)\r\n    default: -1, // default value (aka initial value)\r\n})\r\n\r\nexport const canvasImageAtom = atom({\r\n    key: 'canvas',\r\n    default: ''\r\n})","import { useEffect, useRef, useState } from 'react'\r\nimport BoardChat from './BoardChat'\r\nimport { initBoard, reInitBoard, drawPiece, handleClick, setColor, updateWinLoss } from './BoardFuncs'\r\nimport { coordinates, turnAtom, winAtom, canvasImageAtom } from '../../utils/atoms'\r\nimport { useRecoilState } from 'recoil'\r\n\r\nexport default function TestBoard(props){\r\n    const canvas = useRef()\r\n    const [coords, setCoords] = useRecoilState(coordinates)\r\n    const [turn, setTurn] = useRecoilState(turnAtom)\r\n    const [win, setWin] = useRecoilState(winAtom)\r\n    const [gameResult, setGameResult] = useState()\r\n    const [rematch, setRematch] = useState(false)\r\n    const [showRematch, setShowRematch] = useState(true)\r\n    const [canvasImage, setCanvasImage] = useState(null)\r\n    let color = setColor(win, props.gameData.color)\r\n\r\n    useEffect(() => {\r\n        initBoard(canvas.current, coords, color)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const ctx = canvas.current.getContext('2d')\r\n        props.socket.on('opponentPlaced', data => {\r\n            if(canvasImage){\r\n                ctx.putImageData(canvasImage, 0, 0)\r\n            }\r\n            drawPiece(data.x, data.y, data.color, canvas.current, true)\r\n            setTurn(true)\r\n            setCoords([...coords, {x:data.x, y:data.y, color}])\r\n            setCanvasImage(ctx.getImageData(0,0,canvas.current.width,canvas.current.height))\r\n            ctx.strokeStyle = \"purple\"\r\n            ctx.strokeRect(data.x-7, data.y-7, 30, 30)\r\n        })\r\n        props.socket.on('lostGame', () => {\r\n            updateWinLoss(false, props.uid)\r\n            setWin(false)\r\n            setTurn(false)\r\n            setGameResult(props.gameData.opponentName + ' wins!')\r\n        })\r\n        props.socket.on('rematchRequested', () => {\r\n            setGameResult(props.gameData.opponentName + ' wants to rematch!')\r\n            setRematch(true)\r\n        })\r\n        props.socket.on('startRematch', () => {\r\n            setCoords([])\r\n            setCanvasImage()\r\n            setGameResult()\r\n            reInitBoard(canvas.current)\r\n            win ? setTurn(false) : setTurn(true)\r\n            setRematch(false)\r\n            setShowRematch(true)\r\n        })\r\n        props.socket.on('opponentDc', () => {\r\n            if(gameResult){\r\n                updateWinLoss(true, props.uid)\r\n            }\r\n            setGameResult(props.gameData.opponentName + ' left')\r\n            setShowRematch(false)\r\n        })\r\n        props.socket.on('resign', () => {\r\n            updateWinLoss(true, props.uid)\r\n            setWin(true)\r\n            setTurn(false)\r\n            setGameResult(props.gameData.opponentName + ' resigned')\r\n        })\r\n        return () => {\r\n            props.socket.off('opponentPlaced')  \r\n            props.socket.off('lostGame')  \r\n            props.socket.off('rematchRequested')  \r\n            props.socket.off('startRematch') \r\n            props.socket.off('opponentDc') \r\n            props.socket.on('resign')\r\n        }\r\n    }, [canvasImage, win])\r\n\r\n    function click(e){\r\n        const ctx = canvas.current.getContext('2d')\r\n        if(!turn) return\r\n        let {x, y, win, alreadyPlaced} = handleClick(e, canvas.current, true, color, canvasImage)\r\n        if(alreadyPlaced) return \r\n        setCanvasImage(ctx.getImageData(0,0,canvas.current.width,canvas.current.height))\r\n        ctx.strokeStyle = 'purple'\r\n        ctx.strokeRect(x-7, y-7, 30, 30)\r\n        //send piece to opponent \r\n        props.socket.emit('placePiece', {x, y, color, otherUid: props.gameData.otherUid})\r\n        setTurn(!turn)\r\n        setCoords([...coords, {x, y, color}])\r\n        if(win){\r\n            updateWinLoss(true, props.uid)\r\n            setWin(true)\r\n            setTurn(false)\r\n            props.socket.emit('wonGame', props.gameData.otherUid)\r\n            setGameResult(props.name + ' wins!')\r\n        }\r\n    }\r\n\r\n    function requestRematch(){\r\n        if(rematch){\r\n            setCoords([])\r\n            setCanvasImage()\r\n            reInitBoard(canvas.current)\r\n            win ? setTurn(false) : setTurn(true)\r\n            setGameResult()\r\n            setRematch(false)\r\n            setShowRematch(true)\r\n            props.socket.emit('acceptRematch', props.gameData.otherUid)\r\n        }else{\r\n            props.socket.emit('requestRematch', props.gameData.otherUid)\r\n            setGameResult('Rematch Requested')\r\n            setShowRematch(false)\r\n        }\r\n    }\r\n    function leave(){\r\n        setCoords([])\r\n        props.leaveMatch()\r\n    }\r\n    function resign(){\r\n        updateWinLoss(false, props.uid)\r\n        setWin(false)\r\n        setTurn(false)\r\n        props.socket.emit('resign', props.gameData.otherUid)\r\n        setGameResult(props.gameData.opponentName + ' wins!')\r\n    }\r\n    return(\r\n        <div id = 'gameWrapper'>\r\n            <div style = {{display: 'flex', flexDirection: 'column', alignItems: 'flex-end'}}>\r\n                {gameResult &&\r\n                    <div id = 'gameResultWrapper'> \r\n                        <p id = 'gameResult'>{gameResult}</p>\r\n                        {showRematch && <button id = 'rematchBtn' onClick = {requestRematch}>rematch</button>}\r\n                        <button id = 'leaveBtn' onClick = {leave}>leave</button>\r\n                    </div>\r\n                }\r\n                <canvas ref = {canvas} onClick = { click } id = \"omokcanvas\" width = \"700\" height=\"700\" />\r\n                <button id = \"resignBtn\" onClick = {resign}>RESIGN</button>\r\n            </div>\r\n            <BoardChat {...props}/>\r\n        </div> \r\n    )\r\n}\r\n","export default \"data:image/png;base64,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\"","import ChallengeBox from './ChallengeBox'\r\nimport { useState, useEffect } from 'react'\r\nimport TestBoard from './TestBoard'\r\nimport { firestore } from '../../firebase'\r\nimport defaultPic from '../../images/defaultPic.png'\r\nimport { turnAtom } from '../../utils/atoms'\r\nimport { useSetRecoilState } from 'recoil'\r\nfunction Play(props){\r\n    var [playerData, setPlayerData] = useState()\r\n    var content\r\n    var headerStyle = {width: '100%'}\r\n    const setTurn = useSetRecoilState(turnAtom)\r\n    //show board\r\n    if(props.gameData){\r\n        content = <TestBoard {...props}/>\r\n        props.gameData.turn === 'first' ? setTurn(true) : setTurn(false)\r\n        headerStyle = {width: 'calc(100% - 400px)'}\r\n    //show challenges\r\n    }else{\r\n        content = <div id = 'challengeBoxWrapper'>\r\n                    <ChallengeBox {...props} accept = {accept} decline = {decline}/>\r\n                    {playerData && \r\n                        <div id = 'playerDataBox'>\r\n                            <p style = {{paddingTop: '5px', whiteSpace: 'nowrap'}}>win: {playerData.win}</p>\r\n                            <p style = {{whiteSpace: 'nowrap'}}>lose: {playerData.loss}</p>\r\n                        </div>}\r\n                    <div id = 'challengeHelper'>Challenge players on the right!</div>\r\n                  </div>\r\n    }\r\n\r\n    var opponentPhoto =  props.gameData && props.gameData.opponentPhoto ? props.gameData.opponentPhoto : defaultPic\r\n\r\n    useEffect(()=>{\r\n        firestore.collection('users').doc(props.uid).get().then(doc => {\r\n            var data = {win: doc.data().win, loss: doc.data().loss}\r\n            setPlayerData(data)\r\n        })\r\n    }, [])\r\n\r\n    \r\n    function accept(otherUid){\r\n        props.socket.emit('acceptGame', {otherUid, name: props.name, photo: props.photo})\r\n    }\r\n\r\n    function decline(otherUid){\r\n        firestore.collection('users').doc(props.uid).collection('challenges').doc(otherUid).delete()\r\n    }\r\n\r\n    return(\r\n        <div id = 'playWrapper'>\r\n            <div id = 'playHeaderWrapper'>\r\n                <div id = 'playHeader' style = {headerStyle}>Play</div>\r\n                {props.gameData  &&\r\n                <div style = {{paddingTop: '4px'}}>\r\n                    <img id = \"opponentPhoto\" src={opponentPhoto} alt = \"opponentPhoto\"/> \r\n                    <div id = 'playOpponentHeader'>{props.gameData.opponentName}</div>\r\n                </div>}\r\n            </div>\r\n            <div id = 'playContent'>\r\n                {content}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Play","import { useState } from 'react'\r\nimport { auth } from '../../firebase'\r\nimport dog from '../../images/defaultPic.png'\r\nimport { useMediaQuery } from 'react-responsive'\r\n\r\nfunction User(props){\r\n    const isDesktopOrLaptop = useMediaQuery({\r\n        query: '(min-device-width: 700px)'\r\n    })\r\n    var [isHovering, setHovering] = useState(false)\r\n    var photo = props.photo ? props.photo : dog\r\n    var status = props.status === 'online' ? 'onlineDot' : null\r\n    var userWrapper = props.uid === auth.currentUser.uid ? 'myUserWrapper' : 'userInfoWrapper'\r\n\r\n    function handleMouseHover(){\r\n        if(isDesktopOrLaptop){\r\n            setHovering(!isHovering)\r\n        }\r\n    }\r\n\r\n    function handleChallengeClick(){\r\n        setHovering(false)\r\n        props.challenge(props.uid)\r\n    }\r\n\r\n\r\n    return(\r\n        <>\r\n        <div className = {userWrapper} onMouseEnter = {handleMouseHover} onMouseLeave = {handleMouseHover}>\r\n            <img id = \"onlinePic\" src={photo} alt = \"profile pic\"/>\r\n            {status && <div className = {status}></div>}\r\n            <div className = \"onlineUsername\">{props.name}</div>\r\n\r\n            {isHovering && userWrapper ==='userInfoWrapper' && \r\n            <div className = \"userOptions\">\r\n                <button className = \"userOptionsBtn\" onClick = {() => props.showChat(props)}>Message</button>\r\n                <button className = \"userOptionsBtn\" onClick = {handleChallengeClick}>Challenge</button>\r\n            </div>}\r\n        </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default User","import User from './User'\r\nimport { firestore, FieldValue } from '../../firebase'\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore'\r\n\r\nfunction OnlineSidebar(props){\r\n    var usersQuery =  firestore.collection('users').orderBy(\"status\", \"desc\").limit(10)\r\n    var [users] = useCollectionData(usersQuery, { idField: 'id' })\r\n\r\n    function showChat(otherUser){\r\n        props.displayMsgs() \r\n        var docid\r\n        var users = [props.uid, otherUser.uid]\r\n\r\n        if(props.uid < otherUser){\r\n            docid = props.uid + '+' + otherUser.uid\r\n        }else{\r\n            docid = otherUser.uid + '+' + props.uid\r\n        }\r\n\r\n        var chatRef = firestore.collection('chats')\r\n        chatRef.doc(docid).get()\r\n        .then(doc =>{\r\n            if(!doc.exists){\r\n                chatRef.doc(docid).set({\r\n                    users,\r\n                    lastSent: FieldValue.serverTimestamp(),\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    function challenge(otherUid){\r\n        firestore.collection('users').doc(otherUid).collection('challenges').doc(props.uid).set({played: 'no', name: props.name})\r\n    }\r\n\r\n    return(\r\n        <div id = \"onlineSidebar\">\r\n            <div id = \"usersTitle\">Users</div>\r\n             {users && users.map(user => <User key = {user.id} uid = {user.id} photo = {user.photo} name = {user.name} status = {user.status} showChat = {showChat} challenge = {challenge}/>)} \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OnlineSidebar","import dog from '../../images/defaultPic.png'\r\n\r\nfunction Chat(props){\r\n    var photo = props.photo ? props.photo : dog\r\n    var date = props.lastSent ? dateToYMD(props.lastSent.toDate()) : ''\r\n    return(\r\n        <div className = 'msg' onClick = {() => props.displayChatBox(props)}>\r\n            <img className = \"msgProfile-pic\" src={photo} alt = \"profile pic\"/> \r\n            <div className = 'msgUserInfo'>\r\n                <div style = {{ fontWeight: \"600\"}}>{props.name}</div>\r\n                <div style = {{ color: \"grey\"}}>{date}</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction dateToYMD(date) {\r\n    var strArray=['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\r\n    var d = date.getDate()\r\n    var m = strArray[date.getMonth()]\r\n    var y = date.getFullYear()\r\n    return '' + m + ' ' + (d <= 9 ? '0' + d : d)\r\n}\r\n\r\nexport default Chat","import { auth } from '../../firebase'\r\n\r\nfunction Msg(props){\r\n    const text = props.text\r\n    const msgClass = props.uid === auth.currentUser.uid ? 'sent' : 'received';\r\n    return(\r\n        <div id = \"bubble\" className = {msgClass}>\r\n            <p id = \"msgTxt\" className = {msgClass+\"Text\"}>{text}</p>\r\n        </div>\r\n    )\r\n}\r\nexport default Msg","import { firestore, FieldValue } from '../../firebase'\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore'\r\nimport { useEffect} from 'react'\r\nimport Msg from './Msg'\r\nimport { useMediaQuery } from 'react-responsive'\r\nimport back from '../../images/back.png'\r\nimport dog from '../../images/defaultPic.png'\r\n\r\nfunction Chatbox(props){\r\n    var photo = props.photo ? props.photo : dog\r\n    const messagesRef = firestore.collection('chats').doc(props.id).collection('messages')\r\n    const query = messagesRef.orderBy('createdAt').limit(25)\r\n    const [messages] = useCollectionData(query, { idField: 'id'})\r\n\r\n    const isTabletOrMobileDevice = useMediaQuery({\r\n        query: '(max-device-width: 700px)'\r\n    })\r\n\r\n    function sendMsg(e){\r\n        if(e.key === 'Enter'){\r\n            e.preventDefault();\r\n            const msg = e.target.value\r\n            if(msg !== ''){\r\n                sendMsgToDb(msg)\r\n            }\r\n            e.target.value = ''\r\n        }\r\n    }\r\n\r\n    async function sendMsgToDb(msg){\r\n        await messagesRef.add({\r\n            text: msg,\r\n            createdAt: FieldValue.serverTimestamp(),\r\n            uid: props.uid\r\n        })\r\n    }\r\n\r\n    useEffect( ()=> {\r\n        var objDiv = document.getElementById(\"msgArea\")\r\n        if(objDiv){\r\n            objDiv.scrollTop = objDiv.scrollHeight\r\n        }\r\n    })\r\n\r\n    return(\r\n        <div id = 'chatbox'>\r\n            <div id = 'msgTextHeader' style = {{ paddingTop: '5px'}}>\r\n                {isTabletOrMobileDevice && <img onClick = {props.backClick} id = \"backMsgBtn\" src={back} alt = \"backMsgBtn\"/> }\r\n                <img className = \"chatBox-Pic\" src={photo} alt = \"profile pic\"/> \r\n                {props.name}\r\n            </div>\r\n            <div id = 'msgArea'>\r\n                {messages && messages.map(message => <Msg key = {message.id} text = {message.text} uid = {message.uid}/>)}\r\n            </div>\r\n            <div className = 'msgInputWrapper'>\r\n                <div className = 'msgInput'>\r\n                    <textarea id='chatInputArea' onKeyDown = { sendMsg } className=\"browser-default\" type=\"text\" autoComplete=\"off\"></textarea>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chatbox","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAABjklEQVRoge3asU4UQRyA8R+YsyCUJMTCQhJKCx7A5CiwtqPyAaSCijcQWh4AKuytbLCw0eJ8AC3oTCDSGCkIEGQtzomce5vMcZD/jdkv2WaTTb5NduebmV1aWh6Nc/GDu7K4JV300MGHYJeReYofqP4cO5gONRqBJzjyV77CLzyLlMplDl8NyldYj5TKZQaf1OVfR0rl0sE7dfl9TAV6ZTGFPXX5AzwM9MpmW12+h9lIqVzW1OUPMR8plcuq/vB4U/47FiOlcuni3KD8TyxFSuXyb2UrXGAlUiqXYZW9xstIqVyaKrsRKZVLU2W3IqVyaarsGwVX9r2CK/tZW9n7Z1hlj7EQKZXLsnplTwVU9rZr0Krh/MSPODcp+hFKvFLwS5zYUvAwSv+531VwyOjv8L1V6FQiMYOP6jexHSk1KnP4otDpdOIxvil0QZMYtqS8xPNIqVEZtqgPmW6MwwtcGbyJE4VsqyTaWk8Cba0nhaZaF7H1kvgval30R75E0Z9ZE12cYTNaZBzG+tWgJZrfnsjRrgELpIEAAAAASUVORK5CYII=\"","import Chat from './Chat'\r\nimport Chatbox from './Chatbox'\r\nimport ReactDOM from 'react-dom'\r\nimport { useState } from 'react'\r\nimport { useMediaQuery } from 'react-responsive'\r\n\r\nfunction MessageLayout(props){\r\n    var [msgClicked, setMsgClicked] = useState(false)\r\n    const isDesktopOrLaptop = useMediaQuery({\r\n        query: '(min-device-width: 700px)'\r\n    })\r\n    const isTabletOrMobileDevice = useMediaQuery({\r\n        query: '(max-device-width: 700px)'\r\n    })\r\n\r\n    function displayChatBox(data){\r\n        const element = <Chatbox {...data} backClick = {backClick}/>\r\n        if(isTabletOrMobileDevice){\r\n            setMsgClicked(element)\r\n        }else{\r\n            ReactDOM.render(element, document.getElementById('chatbox')) \r\n        }\r\n    }\r\n\r\n    function backClick(){\r\n        setMsgClicked()\r\n    }\r\n\r\n    return(\r\n        <>\r\n            {!msgClicked && <div id = 'messages'>\r\n                <div id = 'msgTextHeader'>Messages</div>\r\n                {props.messages && props.messages.map(msg => <Chat key = {msg.id} uid = {props.uid} {...msg} displayChatBox = {displayChatBox}/>)}\r\n            </div>}\r\n            {isDesktopOrLaptop && <div id = 'chatbox'></div>}\r\n\r\n            {msgClicked}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default MessageLayout","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAADqklEQVRoge3ZTYhWVRzH8c84M6A0OSlEZZaLjMFeyByL3qhFiBvNIqXcRIswjKJdLSsscFtMr1RQCW3SghZlVtAmekGKQo0WlWlBlC9l6hTOPC3OOd1bTDP33rnPfZ7g+cLlzJznf/7n97/nnHvP+V969OjRo0cH6CthO4KbsQrn4jwM4DD24AO8hq8K+luG9bgeF2MhTuEADmIX3sDXJTROy0q8h1aBaxJvY/k0/i6PNpMFfb6L0dkEMIixXIeH8DxuEkbnNMwVRmYtnhZGpyXc2UfQn/PXj0fjb8nfU1gTfcyNPkewDi9Em3SDnhBmQCkW4P3o5Di2YH6BdqfjYYzHti/HAPqxLdaN46FoOxPzheBPyEbnjKJBDOaC+F6YCmVZjv3RxzZZEN/hsgr+RoW1k4IpNDJjsiAWVeg0sST6SHN9P86fhb9FsmAen8l4pTAfj6s2Ev9mVJhK41hRg78VwjSbmMlfejptqaHTxAPxqovHBI27/stgRPY0KbKwi5IWe10My56OF6bKOTmDW2L5On6rseOJeNXFr8KLkvCCxj8DuTGWb9bYabtIGlelinwgS2K5pzE51dkbyymfgseEeTfUmJzqDAlaj6WK/IikBXmqSUUVmYzl3/rzgRyJ5cLG5FQnaTycKvKB/BLLcxqTU52k8VCqyAfyRSyvaExOda6M5eepIh/Ix7G8ujE51bkqlp9M9eMy4UlwRDgbdCvzhJdiS9iNTMnuaLChIVFVuF3QOOVoJO6LRruVO883RR8+EzRuns5wHn6Mhre2X1dp1gvaDiow/e+NxgeEnWa3MCwE0MI9RRoM4NPY4MX26SrNS4Kmj5Q4FlwqSyDc3R5dpdgsaDmJi8o2vis2/kNuu9wBVkcNLdxZ1UlKRPyOa+rRVYrrhPxBoYTDdPTjVVkwTY7MDcJJtSWkYmd9XB4UjpZpjm6crcMCbIx9tbA9aqiFfiGFmXJUz6qQvizYz1ZZmvaVdvTTJ6RDJ2Inbwmp1bpYgJ3R94SQVm3r7mItjsYOv1HPbvlafCvbtK6pwWchluJLWeZ9q2rzeAAP4s/oa5+wC2+UITwnWzcf4oIS7ZfGNumzwTPCZ4WOsRo/REEnhDs8Zxr7PmySZW1+Er65dAVnYodsdHZi8RR2i/FOzm57bNt1bMDPgsijuC332zohwZEW9KbG1ZXkbCF/nO76GJ7M/b8DZ3VMXQXuELY1KYCTuL+jimbBJUKedm/8+3/NsO46afZohL8AQdD5tJ4fnIQAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAADwklEQVRoge2YTWgcZRjHf8/MFpNqEAWb2TbGFgUFPy5FWuwm1GObDI0okRSl9CCoBys9+NWCVjx46KWCxK9DQTRWqM3HbgulaMhuIvXgofhBUUrAuE48VKSNpOnOPB6SyU6S3ezO7KaTw/4u884z7/s8/+d95+OdBxo0aNAgTqSaTnk71W54sk9Fu4CtQBtgAlcRLqHyHQnz6+Tg6GQ1/hy7c5t6Xi/CkwiPodwFuMAUMAma9kxzaMvQ2B81JTC1Z3ebaRaOAQcWBK+Gq3BKTeONcoHzdqodj/dF6K3Kn3LSFffte9Pf/xk6gbzd0SOqnwN3VAi0nGuCvmClx08FjY6d6lPlk0j+VJ+zMuPDpS4apYxOd+qQqJ6OEAygRZGBfNeuV31Dvjt1WJUvIvsTOePYqVdKXVyxAgszf5oyyYVABe1DDVHRL0vFCoknqk8tX4klThfu+V+JNlOluLZwbKmXv4ShD90zPJ73DUtm2TQL71I/8TAvvF7iAVpuehwLGhZXIG+n2kW5QuW3Q9y4rpvY2nZudAoCK2BAD+tfPIBpmoV9/sliAgp74tETBdnrt4rPgMoDsWiJhN7vtwIPsVpxSInIFr8RfAt5MQiJhuD6zcAtxFQsYqIQ0FpMwODnWMREQfjFbxbfQqpD8agJT1DrYgJNs81p4HosisLx302Vs/7JYgJ3X7jwL2h/PJpCIPTfl8n9458u2QvJBj1OcQO2Hpkx3cTxoGFJAtaZib8Vfe3WaqoeUXlz09lRJ2hbsedPpsc/Bv321smqDlHGWx/PfrjcviIBATWMwn5YV9+FaTdh9Mk7Kz+2Jf+6WocvToM8DcyuubTKzKnwTLlCQdnfxmQ6+4NAL1BYM2mV8UTlwOaRXK5ch1X/e610bkRVDhLPPklVecnKZL9arVOVha2OHlEdAJrqIq0yroi8aI1kP6vUsepKwV/dqd0Igyh31qatIjOoPJvMZDPVdA5V6nC6nnhExTjHfGlxLbhqqGG3ZsYmqh0QqvZjZSZ+IpHoAC6FllaZyybGzjDiIULxKjk4Ojl7PbFD4YOwY8sifHPbbNOOTemx38IPrYG8nXpelH7g9ogubgi8bqVzJ6JqqLXch7O381E1vAHg4ZBDL6vI/s0j2R9riV9zAgC6ffsGJ9l8BDhK5dqSivApNzYets6fn6k1dl0S8HHsXTtV5STwYJlwv6vowdW+rGGpawIwvxrTyeaXFd6jWGedU/jImNv4Vj1mPUjdE/Bx7M5tqt4JQAzlUGsmd2WtYjVo0KBBfPwPL8Y2i7i/8wcAAAAASUVORK5CYII=\"","import defaultPic from '../../images/defaultPic.png'\r\nfunction Comment(props){\r\n    var photo = props.photo ? props.photo : defaultPic\r\n    return(\r\n        <div className = 'commentWrapper'>\r\n            <img className = \"postCommentPhoto\" src={photo} alt = \"postCommentPhoto\"/>\r\n            <div className = 'commentTextWrapper'>\r\n                <p className = 'commentName'>{props.name}</p>\r\n                <p>{props.text}</p>\r\n            </div> \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Comment","import '../../css/fak.css'\r\nimport heart from '../../images/heart.png'\r\nimport filledHeart from '../../images/filledHeart.png'\r\nimport comment from '../../images/comment.png'\r\nimport defaultPic from '../../images/defaultPic.png'\r\nimport Comment from './Comment'\r\nimport { useState, useEffect } from 'react'\r\nimport { firestore, storage, auth, FieldValue } from '../../firebase'\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore'\r\nimport Modal from 'react-modal'\r\n\r\nconst customStyles = {\r\n    content: {\r\n      top: '50%',\r\n      left: '50%',\r\n      right: 'auto',\r\n      bottom: 'auto',\r\n      marginRight: '-50%',\r\n      transform: 'translate(-50%, -50%)',\r\n      border: 'none',\r\n      background: 'none',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      margin: '0',\r\n      padding: '0'\r\n    },\r\n    overlay: {\r\n        backgroundColor: \"rgba(0, 0, 0, 0.5)\"\r\n    }\r\n  };\r\n\r\nfunction Post(props){\r\n    var [options, setOptions] = useState()\r\n    var [numLikes, setNumLikes] = useState()\r\n    var [numComments, setNumComments] = useState()\r\n    var [liked, setLiked] = useState(heart)\r\n    var [displayComment, setDisplayComment] = useState(false)\r\n\r\n    var postsQuery = firestore.collection('posts').doc(props.docId)\r\n    var [likes] = useCollectionData(postsQuery.collection('likes'), { idField: 'id' })\r\n    var [initalComments] = useCollectionData(postsQuery.collection('comments').orderBy('createdAt', 'asc').limit(10))\r\n    var [comments, setComments] = useState()\r\n    const photoStyle = props.photo ? {\r\n        backgroundImage: `url(${props.photo})`\r\n    }: ''\r\n\r\n    var profilePic = props.profilePhoto ? props.profilePhoto : defaultPic\r\n    var optionsBtn\r\n    if(props.uid === auth.currentUser.uid){\r\n        optionsBtn = <div className = 'postOptionsBtn noselect' onClick = {showOptions}>&#10247;</div>\r\n    }\r\n\r\n    function showOptions(){\r\n        if(options === undefined){\r\n            setOptions(<div className = 'postOptions'>\r\n                            <button className = 'deletePostBtn' onClick = {deletePost}>Delete</button>\r\n                        </div>)\r\n        }else{\r\n            setOptions(undefined)\r\n        }\r\n    }\r\n\r\n    function closeOptions(){\r\n        setOptions()\r\n    }\r\n\r\n    async function deletePost(){\r\n        await firestore.collection('posts').doc(props.docId).delete()\r\n        if(props.photo){\r\n            await storage.ref().child(props.docId).delete();\r\n        }\r\n    }\r\n\r\n    function likePost(){\r\n        postsQuery.collection('likes').doc(auth.currentUser.uid).get().then(doc => {\r\n            if(!doc.exists){\r\n                postsQuery.collection('likes').doc(auth.currentUser.uid).set({liked: 'yes'})\r\n                postsQuery.get().then(doc => {\r\n                    setNumLikes(doc.data().likes + 1)\r\n                    postsQuery.update({likes: doc.data().likes+1})\r\n                })\r\n            }else{\r\n                postsQuery.collection('likes').doc(auth.currentUser.uid).delete()\r\n                postsQuery.get().then(doc => {\r\n                    if(doc.data().likes > 1){\r\n                        setNumLikes(doc.data().likes - 1)\r\n                    }else{\r\n                        setNumLikes()\r\n                    }\r\n                    postsQuery.update({likes: doc.data().likes -1})\r\n                })\r\n                setLiked(heart)\r\n            }\r\n        })\r\n    }\r\n\r\n    function sendComment(e){\r\n        if(e.key === 'Enter' && e.target.value !== ''){\r\n            e.preventDefault()\r\n            postsQuery.collection('comments').add({\r\n                text: e.target.value,\r\n                uid: auth.currentUser.uid,\r\n                createdAt: FieldValue.serverTimestamp(),\r\n            }).then(() => {\r\n                e.target.value = ''\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        if(likes && likes.length > 0){\r\n            setNumLikes(likes.length)\r\n        }\r\n        if(liked !== filledHeart){\r\n            firestore.collection('posts').doc(props.docId).collection('likes').doc(auth.currentUser.uid).get().then(doc => {\r\n                if(doc.exists){\r\n                    setLiked(filledHeart)\r\n                }\r\n            })\r\n        }\r\n    }, [likes, liked, props.docId])\r\n\r\n    useEffect(() => {\r\n        if(initalComments && initalComments.length > 0){\r\n            setNumComments(initalComments.length)\r\n            var itemsProcessed = 0\r\n            initalComments.forEach( (item, i, self) => {\r\n                firestore.collection('users').doc(item.uid).get().then(doc => {\r\n                    itemsProcessed++\r\n                    self[i].name = doc.data().name\r\n                    self[i].photo = doc.data().photo\r\n                    if(itemsProcessed === self.length){\r\n                        setComments(initalComments)\r\n                    }\r\n                })\r\n            })\r\n        }\r\n    }, [initalComments])\r\n\r\n    const [modalIsOpen, setIsOpen] = useState(false);\r\n\r\n    function openModal() {\r\n        document.getElementById('homeHeader').style.position = 'inherit'\r\n        setIsOpen(true);\r\n    }\r\n  \r\n    function closeModal() {\r\n        document.getElementById('homeHeader').style.position = 'sticky'\r\n        setIsOpen(false);\r\n    }\r\n\r\n    return(\r\n        <div style = {{position: 'relative', width: '100%'}}>\r\n            <div className = \"post\" onClick = {closeOptions}>\r\n                <div className = \"postUserInfoWrapper\">\r\n                    <div style = {{display: 'flex', flexDirection: 'row'}}>\r\n                        <img className = \"postProfile-pic\" src={profilePic} alt = \"profile pic\"/> \r\n                        <div className = \"postTextWrapper\">\r\n                            <div style = {{display: \"flex\", gap: \"10px\"}}>\r\n                                <b className = \"postName\">{props.name}</b>\r\n                                <div style = {{color: \"grey\"}}>{props.time}</div>\r\n                            </div>\r\n                            <p className = \"postText\">{props.text}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>  \r\n                {options}\r\n                {props.photo && <div className = \"postPic\" onClick = {openModal} style = {photoStyle}></div> }\r\n                <div className = \"postIconWrapper\">\r\n                    <div className = \"likeAndCommentWrapper\" onClick = {likePost}>\r\n                        <img className = \"likeBtn\"  src={liked} alt = \"heartIcon\"/> \r\n                        <p className = 'numLikesAndPosts'>{numLikes}</p>\r\n                    </div>\r\n                    <div className = 'likeAndCommentWrapper' onClick = {() => setDisplayComment(!displayComment)}>\r\n                        <img className = \"commentBtn\" src={comment} alt = \"commentIcon\"/> \r\n                        <p className = 'numLikesAndPosts'>{numComments}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {optionsBtn}\r\n            {displayComment &&\r\n                <div className = 'postComments'>\r\n                    {comments && comments.map(comment => <Comment key = {comment.id} {...comment}/>)}\r\n                    {numComments && <div className = 'commentInputLine'></div>}\r\n                    <input className = 'postCommentInput' onKeyDown = {sendComment} placeholder = \"Write a comment!\" type=\"text\" name=\"name\" autoComplete = \"off\"/>\r\n                </div>\r\n            }\r\n            <div onClick={closeModal}>\r\n            <Modal\r\n                isOpen={modalIsOpen}\r\n                onRequestClose={closeModal}\r\n                style={customStyles}\r\n                contentLabel=\"Example Modal\"\r\n                >\r\n                <img class = \"fullPostPhoto\" src = {props.photo}/>\r\n            </Modal>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Post","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAADzElEQVRoge3Z62tcRRjH8U/aJKZNNWmkL/pCi2nUWq0WLN7witB/QUq9vPVKFcFLFUXBl4Iogm99UVQEry3FomCpVqv1ElvpRa2oELSoaFttWkjii2dOclJ2k92zZ7cr5AuHw56Zeeb37Dkz88wzzDHHHDPRUaKtc3E11mAIg1iEvlT+N47iEH7A5/gEv5SooTBDeBp7MVHlOpquauXf4Cksb7F2cB22Yiwn6Gs8j/XirQxUaDeQym7FCxjOtR/DFlzTZO2If21LrvNDeBTnNWBzEBvxY87uOw3arEoH7sc/qaMDuAXzSuxjHtbhYOrjGO4r0b5FeD0ZPy7eQGeZHZxCFx7DaOrzVfQ2anQAnyaDB3FJowbr4FJ8l/reif6ihs7El8nQh6am0VbSj+1Jw27xddTFfDErTWAbFpSprk4W4oOkZbPQVjOPp4bDOKt0afXThz1C0yO1NroMJ8Uidn5zdBXiQjFrnlDjWH1feH53E0UVZYPQ9t5sFW9MFb/V3Cm2KF3YJzReP1PFN1Kl9S0QVZTbhcbXqlXoF2PjMLpbJKoIZ+B3MVYmJ6J8iLFWvLrNwqF25YTQ2C00Y7ojWdS5rYWiipJpnIyU846sSvfhlskpTqZxVaXCA2IQtfP4yOgRWvdnD/JvpE9Et+08PjJG0zUZ/+UdmVDu/qLZdAjNmC78TzG1LWy1ogL0CK1Hsgd5R35N93NaqaggWaJiMgOTd2R3ul/RMjnFWZ3ue7IHeUd2pfsNLZNTnGwh/LhSYa/Y8GdjpV3pESHKqNjFVmST9g8a7xAaX5mp0uUYF4tju4bx+4Uj185W+a1UcUOTRRXhAaFtay2VB8VY+RcrmiiqXi4SmkZxca2N7hGe78Xi5uiqi36xa53AQ/U07MDLpnJap3O1700aJvC2AmFUt6l80k6cXaa6GunHjqRhlwZSpwvEbixLma4pQ12NrMb3qe+PlJDp7MKLyeBJPNyowVnoxhOmktiblJDEzrMuGT5cptEcnbhNHMtlJ113NqOj5aa+1TIZEinan5P9cbyJZfUYqWf1virdv6hSvhFLxZngMH7CXyLrkbFEnEStwJUiIbgylY3jXTyj/D9rGtmR29pTnnfiOdUPO4+LBbZa+Vd4UoNHbbUeTy8Vr35ErPxj6fkFeAk34TcR1iwT2Y1BsZguFs4eEUfU2fH0Z+J4eqQRB+ol+8fvSr+X4Fnx2UyIfGw7hTMVWSkEH8ODIqjMHMjC6ar7gnZhvliMKn3b23Hz6ZM2ndlmrXvFGxnBH+IsfIcY+PuaK22O/zf/AZh9+Zk/uRRIAAAAAElFTkSuQmCC\"","import Post from './Post'\r\nimport { firestore, storage } from '../../firebase'\r\nimport picture from '../../images/picture1.png'\r\nimport cancel from '../../images/cancel.png'\r\nimport { useState } from 'react'\r\n\r\nfunction Feed(props){\r\n    var [postImage, setPostImage] = useState()\r\n    function autoGrow() {\r\n        let element = document.getElementById('postArea')\r\n        element.style.height = \"5px\";   \r\n        element.style.height = (element.scrollHeight)+\"px\";\r\n    }\r\n    function sendPost(e){\r\n        if(e.key === 'Enter'){\r\n            e.preventDefault();\r\n            post(e)\r\n        }\r\n    }   \r\n\r\n    async function post(e){\r\n        var msg = e.target.value\r\n        if(msg.replace(/ /g,'') === '' && !postImage){\r\n            return\r\n        }\r\n        document.getElementById('postArea').value = ''\r\n\r\n        const postsRef = firestore.collection('posts')\r\n        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\r\n        const current = new Date()\r\n        const today = months[current.getMonth()] + ' ' + current.getDate()\r\n        const data = {\r\n            uid: props.uid,\r\n            text: msg,\r\n            createdAt: Date.now(),\r\n            time: today,\r\n            likes: 0,\r\n            comments: 0\r\n        }\r\n        var res = await postsRef.add(data)\r\n        if(postImage){\r\n            await storage.ref().child(res.id).put(postImage)\r\n            firestore.collection('posts').doc(res.id).update({photo: 'yes'}) \r\n            removeImage()\r\n        }\r\n    }   \r\n\r\n    function showUploadedImage(e){\r\n        const f = e.target.files[0]\r\n        if(f && f['type'].split('/')[0] === 'image'){\r\n            setPostImage(f)\r\n        }\r\n    }\r\n\r\n    function removeImage(){\r\n        setPostImage()\r\n    }\r\n\r\n    function homeClick(){\r\n        document.getElementById('content').scrollTop = 0\r\n    }\r\n    \r\n    return(\r\n        <div id = \"feedWrapper\">\r\n            <div id = \"homeHeader\" style = {{position: props.position}}>\r\n                <p style = {{cursor: 'pointer', width: '60px', fontSize: '22px'}} onClick = {homeClick}>Home</p>\r\n            </div>\r\n            <div id = \"feed\">\r\n                <div id = \"postInput\">\r\n                    <div id = \"postInputResp\">\r\n                        <form>\r\n                            <label>\r\n                                <img id = \"uploadPic\" src={picture} alt = \"uploadPic\"/> \r\n                                <input id = \"postImage\" onChange={showUploadedImage} type=\"file\" style = {{display:\"none\"}}/>\r\n                            </label>\r\n                        </form>\r\n                        <textarea id='postArea' placeholder='post something!' onInput={autoGrow} onKeyDown = {sendPost} type=\"text\" autoComplete=\"off\" maxLength=\"162\"></textarea>\r\n                    </div>  \r\n                    {postImage && \r\n                        <div id = 'postImageWrapper'>\r\n                            <img id = \"removeImageBtn\" src = {cancel} onClick = {removeImage} alt = 'removeImage'/>\r\n                            <img id = \"uploadedPic\" src = {URL.createObjectURL(postImage)} alt = \"uploadPic\"/>\r\n                            <button id = 'postBtn' onClick = {post}>Post</button>\r\n                        </div>}\r\n                </div>\r\n                {!props.posts ? <div id = \"loader\"></div> : props.posts.map( (post, index, self) => {\r\n                    return <Post key = {post.id} name = {post.name} profilePhoto = {post.profilePic} text = {post.text} time = {post.time} photo = {post.photo ? post.photo: undefined} uid = {post.uid} docId = {post.id}/>\r\n                })}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Feed","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAABM0lEQVRYhe2W3WrCQBCFv4S+VilEBIMXpT5WEbwpVCn2rfoC2jdQ++dFepEJGddMdkO1e7MHQsJmNuebMyEEkpIiK1PXVQzv/J9Nz3TTsZZ1rF1SJ0lHT+CaAFPgHdgCZciGisu+iFv1zI3lE30EWr4EcoYBl9QpbIBJiE8fQA6s5fhraoMBGvPm/ksARF9agwC0+UGOClhhfy98aQUDZMCzMh8Bt8CeNgkXQu+pgNcOiCAAt/NC1Y2BD7n3pCCstNyReQG6Onc1Bj5px5E7ewrqtHaypsfhBbA6d1UCX1L7JucdcKdqCtokltKcFyDEvNFUQRypu3alIfT7YQJYsVuaKIiFUaPH4QUI6dzVPfAt++dGjU5i8JcwRA/AjzzjsQfiagAAMwVhJXHik/4Jk5Ki6xdOeZDYnBW7qwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABFUlEQVRIid2VTW7CQAyFP7UiZ+kCVrCDHqIpiDtBb0EERyoVZVsUtmFNWMyMVJk3kxDEon2SpZF/nh3P2IH/jgyYAxtgC5y8bIG1t2VdyafAHqgbZA/ktxA/Ax8tiK0sfWwjupD/TpLE+x3kQaLtyrju+RgYAaUgKoEhMDH6byIXPxckQ2/rmySl1+ELsHEzlWAjHI/AwNtfgB+hO4i4QiX4Eo622r45q9bVuDm5QhVxtl+SqjxIFRyfVKaWqBO2s1I+vEVr4aguVF28jVupBA9/pmrQJqQHbQS8Gv2OxIbNBdGt8hYjD7hn2S2ayMGt3GUH8tbrOiDHLa4m4h0t2hJDhnsRBfCJm9DKnwvcX6/Xlfxv4AK2lPndEfN11QAAAABJRU5ErkJggg==\"","import { auth, firestore } from '../../firebase'\r\n\r\nfunction SignOut(props) {\r\n  async function signOut(){\r\n    if(auth.currentUser.isAnonymous){\r\n      await firestore.collection('users').doc(auth.currentUser.uid).delete()\r\n    }\r\n    await auth.signOut()\r\n    props.socket.disconnect()\r\n  }\r\n  return auth.currentUser && (\r\n    <button id = 'signOutBtn' onClick={signOut}>Log Out</button>\r\n  )\r\n}\r\n\r\nexport default SignOut","import SignOut from './SignIn/SignOut'\r\n\r\nexport default function Sidebar(props){\r\n    return(\r\n        <div id = \"sidebar\">\r\n            <img id = \"profile-pic\" onClick={props.openModal} src={props.photo} alt = \"profile pic\"/>                   \r\n            <i id = \"profile-icon\" className = \"material-icons\">person</i>\r\n            <button onClick = {props.homeClick} className = \"sidebar-btn\">Home</button>\r\n            <button onClick = {props.playClick} className = \"sidebar-btn\">Play</button>\r\n            <button onClick = {props.messagesClick} className = \"sidebar-btn\">Messages</button>\r\n            <button onClick = {props.openModal} className = \"sidebar-btn\">Profile</button>\r\n            <SignOut socket = {props.socket}/>\r\n        </div>\r\n    )\r\n}","import React, { Component } from 'react'\r\nimport Play from './Play/Play'\r\nimport OnlineSidebar from './RightSidebar/OnlineSidebar'\r\nimport MessageLayout from './Messages/MessageLayout'\r\nimport Feed from './Feed/Feed'\r\nimport Modal from 'react-modal'\r\nimport openSocket from 'socket.io-client'\r\nimport { firestore } from '../firebase'\r\nimport homeIcon from '../images/home.png'\r\nimport playIcon from '../images/play.png'\r\nimport envelopeIcon from '../images/envelope.png'\r\nimport userIcon from '../images/user.png'\r\nimport Sidebar from './Sidebar'\r\n\r\nModal.setAppElement('#root')\r\n\r\nconst customStyles = {\r\n    content : {\r\n      top                   : '30%',\r\n      left                  : '50%',\r\n      right                 : 'auto',\r\n      bottom                : 'auto',\r\n      marginRight           : '-50%',\r\n      transform             : 'translate(-50%, -50%)',\r\n      borderRadius          : '15px'\r\n    },\r\n    overlay: {\r\n        backgroundColor: \"rgba(0, 0, 0, 0.5)\"\r\n    }\r\n}\r\nclass Layout extends Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.homeClick = this.homeClick.bind(this)\r\n        this.messagesClick = this.messagesClick.bind(this)\r\n        this.playClick = this.playClick.bind(this)\r\n        this.leaveMatch= this.leaveMatch.bind(this)\r\n        this.openModal = this.openModal.bind(this)\r\n        this.closeModal = this.closeModal.bind(this)\r\n        this.inputChange = this.inputChange.bind(this)\r\n        this.usersClick = this.usersClick.bind(this)\r\n        this.state = {home: true, users: false, messages: false, play: false, gameData: false, modalIsOpen: false, position: 'sticky'}\r\n        this.contentRef = React.createRef()\r\n    }\r\n\r\n    homeClick(){\r\n        this.setState({home: true, play: false})\r\n        this.contentRef.current.scrollTop = 0\r\n    }\r\n\r\n    playClick(){\r\n        this.setState({play: true, home: false, messages: false})\r\n    }\r\n\r\n    messagesClick(){\r\n        this.setState({messages: true, home: false, play: false})\r\n    }\r\n\r\n\r\n    leaveMatch(){\r\n        firestore.collection('users').doc(this.props.uid).update({inGame: 'no'})\r\n        firestore.collection('users').doc(this.state.gameData.otherUid).update({inGame: 'no'})\r\n        this.socket.emit('leftMatch', this.state.gameData.otherUid)\r\n        this.setState({gameData: undefined, play: true})\r\n    }\r\n\r\n    openModal(){\r\n        this.setState({modalIsOpen: true, position: 'inherit'})\r\n    }\r\n\r\n    closeModal(){\r\n        this.setState({modalIsOpen: false, position: 'sticky'})\r\n    }\r\n\r\n    usersClick(){\r\n        this.setState({users: true, play: false, home: false, messages: false})\r\n    }\r\n\r\n    inputChange(){\r\n        const reader = new FileReader();\r\n        const file = document.querySelector('#image-file').files[0];\r\n        reader.addEventListener(\"load\", function () {\r\n            // convert image file to base64 string\r\n            document.getElementById('change-pic').src = reader.result;\r\n        }, false);\r\n        if(file){\r\n            reader.readAsDataURL(file);\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        let isMounted = true\r\n        //used for server\r\n        this.socket = openSocket(\"https://mongomok.xyz/\", {query: `uid=${this.props.uid}`})\r\n        //used for local\r\n        //this.socket = openSocket(\"http://localhost:5000\",{query: `uid=${this.props.uid}`})\r\n        this.socket.on('startGame', (data) =>{\r\n            if(isMounted){\r\n            this.socket.emit('setOpponnentUid', data.otherUid)\r\n            this.setState({gameData: data})\r\n            this.playClick()\r\n            }\r\n        })\r\n        return () => { \r\n            isMounted = false\r\n            this.socket.off('startGame')\r\n        }\r\n    }\r\n\r\n    render(){\r\n        const home = this.state.home\r\n        const messages = this.state.messages\r\n        const play = this.state.play\r\n        const users = this.state.users\r\n        let content\r\n        if(home){\r\n            content = <Feed posts = {this.props.posts} time = {this.props.time} position = {this.state.position} uid = {this.props.uid}/>\r\n        }else if(messages){\r\n            content = <MessageLayout messages = {this.props.messages} uid = {this.props.uid}/>\r\n        }else if(play){\r\n            content = <Play name = {this.props.name} uid = {this.props.uid} photo = {this.props.photo} socket = {this.socket} gameData = {this.state.gameData} leaveMatch = {this.leaveMatch}/>\r\n        }else if(users){\r\n            content = <OnlineSidebar name = {this.props.name} uid = {this.props.uid} photo = {this.props.photo} displayMsgs = {this.messagesClick}/>\r\n        }\r\n\r\n        return(\r\n            <div>\r\n                <Modal isOpen={this.state.modalIsOpen} onRequestClose={this.closeModal} id ='profile-modal' style = {customStyles}>\r\n                    <form>\r\n                        <label>\r\n                            <img id = \"change-pic\" src={this.props.photo} alt = \"profile pic\"/>\r\n                            <i id = \"upload-icon\" className = \"material-icons\">cloud_upload</i>\r\n                            <input id = \"image-file\" onChange = {this.inputChange} type=\"file\" style = {{display:\"none\"}}/>\r\n                        </label>\r\n                    </form>\r\n                    <div id = \"change-name\">\r\n                        <p id = 'changeNameHeader'>Name</p>\r\n                        <input className = \"input-field\" defaultValue = {this.props.name} id=\"changeNameInput\" maxLength=\"15\" type=\"text\" autoComplete = \"off\"/>\r\n                    </div>\r\n                    <button id = \"profile-submit\"  onClick={this.props.updateProfile}>Apply</button>\r\n                </Modal>\r\n                <div id = \"content\" ref = {this.contentRef}>\r\n                    <Sidebar openModal = {this.openModal} playClick = {this.playClick} photo = {this.props.photo} homeClick = {this.homeClick} \r\n                        messagesClick = {this.messagesClick} openModal = {this.openModal} socket = {this.socket}/>\r\n                    {content}\r\n                    {!this.state.play && <OnlineSidebar name = {this.props.name} uid = {this.props.uid} photo = {this.props.photo} displayMsgs = {this.messagesClick}/>}\r\n                    {this.state.play && !this.state.gameData && <OnlineSidebar name = {this.props.name} uid = {this.props.uid} photo = {this.props.photo} displayMsgs = {this.messagesClick}/>}\r\n                </div>\r\n                <div id = 'bottomSidebar'>\r\n                    <img onClick = {this.homeClick} className = \"bottomSidebarBtn\" src={homeIcon} alt = \"homeIcon\"/>\r\n                    <img onClick = {this.playClick} className = \"bottomSidebarBtn\" src={playIcon} alt = \"playIcon\"/>\r\n                    <img onClick = {this.messagesClick} className = \"bottomSidebarBtn\" src={envelopeIcon} alt = \"envelopeIcon\"/>\r\n                    <img onClick = {this.usersClick} className = \"bottomSidebarBtn\" src={userIcon} alt = \"userIcon\"/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Layout","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAABQElEQVRYhe3WvS8EcRDG8Q8nIkFBFCIKjZJOdR2VTkWpuURJ6f4EpVZUOiqlkOhEodGoJHQ0EgmREHGrmWNPjnPvzX6TaXZmnnn2t7PZJaM5RiO6wjgucYXJTg+fwjWSiFtM/6gp51rODO5C/DwiwT1m221gDg8hfIphDOIorj0i3y4D83gK0UMMpHL92I/cCxZbbWAZbyG4i1yVmlzkklRtSwys4j3EttHzR20PtlLDmzawiVJEsY6+YvQkdfZ9kb6TEtYb0FjDh/+dXAU57Ph+lisNDC+zhNfQ2kNfrYZ+HKjc5mZZwLPqb08FQzj2vTz53wobIJ/SPYlZFYzgTAu3twpp7QuMpZOFSNz8w0BSI2r1lWcUfhZsYKIDBiZiVs3CevMN9fX+5aQTZAYyA5mBap/ItvzJ/jaz6yeQkfEJsCB4+A445oAAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAB+UlEQVRoge3ZP8hNcRzH8ZfnkeihFEViwUYYbAapZ7DZlIVFWJQsTzYTshmtBguLQcmT2AwySBnkLuTPoBSip8cTw/HrHud3/517z73n/nTe9VvuuX1/n8/p+/2e3x8aGhr6MYNTeIQWnuAc1tQpalBmcQe/O4wWjmNVbeoG4KLO4vPjKQ7VJbAfr7SFXsFOXMBnsZG72F2PzO4sawucy/2+Edfx078mlnADmyYrszt5cZ3YgZtYKfz3Gy5j7QQ09qSfgcBBPBan1VuckXWyWhjUQGAeL8VGnuHwOAT2o6wBWC1765/ERhaxt2KNPRnGQGC9rA5+FOIsy+pmS0UaezKKgcB2meBfhXih0NeNqLEnVRgI7MF9cVq9k6XcbAVzRFRpIDCPF2Ijz3GkwnkwHgNkbfUkPoqNLGJfVRONy0BgDgv4WphrBbewddQJxm0gsE3nQv+Oa9gwbOBJGQjsx0NxWrVwYJiAkzYQOCr+on/A5rKB6jJA1lZP40tOw6WyQeo0EDiW03Cv+LC2VeKkmLYUWigbZJqK+L0EirhbG33z91lpmg9ZH5JdSiS9mEt2OZ3shibZLWWym/qkj1WSPdhK9mhx6g93l7RFJXm8ns/nq9glsQuO82KhxTHVV0wzuK2z8CQu+cgEnsADvJZ1m7MSuWZtaPjf+QNI1Ut1JfKs2wAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAACRUlEQVRoge2YXUtUQRiAH7+2wKAQCSIi8TKQCBVxFYTwL/gT7C+E/6BLkW66T5QuKtdLr4IuBCHoIogokDYRocAi0crd7WLew86OczwzZ885u+g8MDDsmfed5x3mzJ5zIBAIBAKBeGaBdWAPOAUaBbVT4BuwBsykEe8HnhYonNRWxMmZbpLXi3Bi1gh8DYwDJZ8VaJMSMAFUNI86UHYJXteCKjkJ+vCSps+qS8CeFjCen5czEzR9qi4B+mlT5LaJo0Tr6dRCryWgT+vfzUnKB92hL3aUhn4D/wWeAbey90pkGHgCnBhOidiOsN+S7HoepgaDwGPgZ4xLIuedxd8l+ZWsrYEB4BGwn+CQiD54HnhnSbIrk9nuIV96gAXgk2WeD3ItdQGI5ALwxTLBDvCwDfky8NaS9ytqgaKbtq0CIkqS9MAy4RbwwEP8HvDCkucHaotedXTyKiDimkzyyxhbF6nRc3LfQZ1q5pPtEeqQuJHSKdXg2yLzz4j5I7/f1MYOieCxMbaGKnokIyf/wajtsGHENYBDYEnaoeX6hsRm7uRbQMQU8MYiarZtYM4zdyEFRMwD7zkr/hF1mvWkyFloAaDenhaBz9IW8XyjcnWyrUYj4XoniHXK4p+0o4QCOs2FLKCm9bvllTKiZl60FXCg9ccy1/HnvtbfdwlYo3nmbuZh5Mkrmj7PXQJmaP3jqACTFP9haxK1gPrT7rRrghXOPgp0ui37rEB/FxVRF3mnTyomZdTnvCrFf16vytzO2yYQCAQCl4//kmO6LAngQEgAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAABdUlEQVRYhe2VTU7DMBCFP1JIFpDSNd2xbA8BEhLbEgRnqAgUjoG4A1wHyqL8Iwq9BWGBhAosPFYsREKc1BuUJ40SyW/evNieCdSoYY8AGABD4E1iCBwAvuvibeAG+MqIa+E4QWAUfwJ6QCixBYxl7QpHO3FoFG/9st4yTOy7MHAp4r0czrZwLlwYSEQ8zOE0hfNaVNSraOon5mwTbAw8ynMjh6PXHmyNFMEAtb1jsi/hs3BiFwYCVJ9rExHqzJuoy6eLj3A4kNqoPs8aRCNgxVVxDR/V5+eozkjkPabElzcs+QuoqbcJrALLqJv/AcwLZwJ82hopgkjEs7Zfx0RMzgwecGIUuEWN5Q6wKNEFjoA7g3fMjOaMLv4O9P8Q9YA94WoTlRAZxdcs8tYNE3n/jlz4pGfeL5EfS+4L6vJaY5f0zMucZQO4F42dLFKecCTPU8q11RQ4k/dSXaFHa6dMsqBLOrqtof//SxUMhKKRVNCoUeOf4xvYvW2oRfLVqAAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/pikachu.7e8bbe70.jpg\";","import { useState } from 'react'\r\nimport { auth, googleAuthProvider, firestore } from '../../firebase'\r\nimport pikachu from '../../images/pikachu.jpg'\r\nimport google from '../../images/googleicon.png'\r\nimport * as EmailValidator from 'email-validator'\r\n\r\nfunction SignIn(){\r\n    var [content, setContent] = useState(<LogIn setContent = {childSetContent}/>)\r\n    function childSetContent(component){\r\n      setContent(component)\r\n    }\r\n    return (\r\n        <div id = 'loginPage' style = {{backgroundImage: `url(${pikachu})`}}>\r\n          {content}\r\n        </div>\r\n      )\r\n}\r\n\r\nfunction LogIn(props){\r\n  var [email, setEmail] = useState()\r\n  var [password, setPassword] = useState()\r\n\r\n  function signInWithGoogle(){\r\n    const provider = googleAuthProvider;\r\n    auth.signInWithPopup(provider).then(res => {\r\n    }).catch(err => {\r\n      console.log(err.message)\r\n    })\r\n  }\r\n\r\n  function tryLogIn(){\r\n    auth.signInWithEmailAndPassword(email, password)\r\n    .then((user) => {\r\n      console.log('signedIn')\r\n    })\r\n    .catch((error) => {\r\n      alert(\"Invalid Login\")\r\n    });\r\n  }\r\n\r\n  function enterLogin(e){\r\n    if(e.key === \"Enter\"){\r\n      e.preventDefault()\r\n      tryLogIn()\r\n    }\r\n  }\r\n  \r\n  return(\r\n    <div id = 'loginSection'>\r\n      <div id = 'loginWrapper'>\r\n        <p id = 'loginHeader'>LOGIN</p>\r\n        <input className = 'loginInput' onInput={e => setEmail(e.target.value)} onKeyPress = {enterLogin}\r\n               type=\"email\" style = {{marginBottom: '10px'}} placeholder = \"Email\"/>\r\n        <input className = 'loginInput' onInput={e => setPassword(e.target.value)} onKeyPress = {enterLogin} \r\n               type=\"password\" name=\"password\" placeholder = \"Password\"/>\r\n        <button className = 'loginBtn' onClick = {tryLogIn} style = {{top: '7%'}}>LOGIN</button>\r\n        {/* <img id = 'googleLogin' src={google} alt = \"google icon\"/> */}\r\n        <button className = 'loginBtn' style = {{top: '9.5%'}} \r\n          onClick = {()=> props.setContent(<LogInAnonymous setContent = {props.setContent}/>)}>ENTER AS GUEST</button>\r\n        <button id = \"googleBtn\" className = 'loginBtn' onClick={signInWithGoogle}>LOGIN WITH GOOGLE</button>\r\n        <p onClick = {()=> props.setContent(<Register setContent = {props.setContent}/>)} style = {{position: 'relative', top: '21%', cursor: 'pointer'}}>Or Sign Up Here</p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction Register(props){\r\n  var [email, setEmail] = useState()\r\n  var [password, setPassword] = useState()\r\n  var [username, setUsername] = useState()\r\n\r\n  async function tryRegister(){\r\n    if(!EmailValidator.validate(email)){\r\n      alert(\"Invalid Email\")\r\n      return\r\n    }\r\n    const snap = await firestore.collection('users').where('name', '==', username).get()\r\n    if(snap.docs.length > 0){\r\n      alert('Username taken!')\r\n      return\r\n    }\r\n    if(password && password.length > 3){\r\n      auth.createUserWithEmailAndPassword(email, password)\r\n        .then(() => {\r\n          firestore.collection('users').doc(auth.currentUser.uid).set({\r\n            name: username,\r\n            win: 0, \r\n            loss: 0,\r\n            status: 'online',\r\n          })\r\n        })\r\n        .catch((error) => {\r\n          var errorCode = error.code;\r\n          var errorMessage = error.message;\r\n          console.log(errorCode, errorMessage)\r\n        });\r\n    }else{\r\n      alert('Password has to be at least 4 characters!')\r\n    }\r\n  }\r\n\r\n  function enterRegister(e){\r\n    if(e.key === \"Enter\"){\r\n      tryRegister()\r\n    }\r\n  }\r\n\r\n  return(\r\n    <div id = 'loginSection' style = {{height: '528px'}}>\r\n      <div id = 'loginWrapper'>\r\n        <p id = 'loginHeader'>REGISTER</p>\r\n        <input className = 'loginInput' onInput={e => setEmail(e.target.value)} onKeyPress = {enterRegister} type=\"email\" style = {{marginBottom: '10px'}} placeholder = \"Email\"/>\r\n        <input className = 'loginInput' onInput={e => setUsername(e.target.value)} onKeyPress = {enterRegister} type = \"name\" style = {{marginBottom: '10px'}} placeholder = \"Username\"/>\r\n        <input className = 'loginInput' onInput={e => setPassword(e.target.value)} onKeyPress = {enterRegister} type=\"password\" placeholder = \"Password\"/>\r\n        <button className = 'loginBtn' onClick = {tryRegister} style = {{top: '7%'}}>Register</button>\r\n        <p onClick = {()=> props.setContent(<SignIn/>)} style = {{position: 'relative', top: '14%', cursor: 'pointer'}}>Log In</p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction LogInAnonymous(props){\r\n  var [username, setUsername] = useState()\r\n  function tryLogInAnon(){\r\n    auth.signInAnonymously()\r\n    .then(() => {console.log(username)\r\n      firestore.collection('users').doc(auth.currentUser.uid).set({\r\n        name: username,\r\n        win: 0, \r\n        loss: 0,\r\n        status: 'online',\r\n        anonymous: 'true'\r\n      })\r\n    })\r\n    .catch((error) => {\r\n      var errorCode = error.code;\r\n      var errorMessage = error.message;\r\n      console.log(errorCode, errorMessage)\r\n    });\r\n  }\r\n  return(\r\n    <div id = 'loginSection' style = {{height: '360px'}}>\r\n      <div id = 'loginWrapper'>\r\n        <p id = 'loginHeader' style = {{paddingBottom: '33px'}}>Enter Username</p>\r\n        <input className = 'loginInput' onInput={e => setUsername(e.target.value)} type=\"name\" style = {{marginBottom: '10px'}} placeholder = \"Username\"/>\r\n        <button className = 'loginBtn' onClick = {tryLogInAnon} style = {{top: '7%'}}>Enter</button>\r\n        <p onClick = {()=> props.setContent(<SignIn/>)} style = {{position: 'relative', top: '17%', cursor: 'pointer'}}>Go Back</p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SignIn","import Layout from './components/Layout'\nimport SignIn from './components/SignIn/SignIn'\nimport './css/App.css'\nimport './css/fak.css'\nimport { firestore, auth, storage } from './firebase'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport React, { useState, useEffect } from 'react'\nimport { useCollectionData } from 'react-firebase-hooks/firestore'\nimport dog from './images/defaultPic.png'\n\nfunction App() {\n  const [user] = useAuthState(auth)\n  var [username, setUsername] = useState()\n  var [photoLink, setPhoto] = useState()\n  var [privateChats, setChats] = useState()\n  var [posts, setPosts] = useState(false)\n  var chatsQuery, postsQuery\n\n\n  if(user){\n    postsQuery = firestore.collection('posts').orderBy('createdAt', 'desc').limit(25)\n    chatsQuery = firestore.collection('chats').where('users', 'array-contains-any', [user.uid]).limit(25)\n  }\n\n  //listens for any updates in these queries and updates in useEffects\n  const [chats] = useCollectionData(chatsQuery, { idField: 'id' })\n  const [initalPosts] = useCollectionData(postsQuery, { idField: 'id' })\n\n  //sets username and photo\n  useEffect(()=>{\n    if(user){\n      //set the name and photo of current user\n      var usersRef = firestore.collection('users')\n      usersRef.doc(user.uid).get().then(function(doc){\n        if(doc.exists){\n          setUsername(doc.data().name)\n          doc.data().photo ? setPhoto(doc.data().photo) : setPhoto(dog)\n        }else{\n          setUsername(user.displayName)\n          setPhoto(user.photoURL)\n          usersRef.doc(user.uid).set({\n            name: user.displayName,\n            photo: user.photoURL,\n            status: 'online',\n            win: 0,\n            loss: 0\n          })\n        }\n      })\n    } \n\n  }, [user, username, photoLink]) \n\n  //sets the messages data with the other user's name and photo\n  useEffect(() => {\n    async function setChatsData(thisUser){\n      var usersRef = firestore.collection('users')\n      for(var i = 0; i < chats.length; i++){\n        var otherUid\n        if(chats[i].users[0] === thisUser.uid){\n          otherUid = chats[i].users[1]\n        }else{\n          otherUid = chats[i].users[0]\n        }\n        var user = await usersRef.doc(otherUid).get()  \n        chats[i].name = user.data().name\n        chats[i].photo = user.data().photo\n        chats[i].otherUid = otherUid\n      }\n      setChats(chats)\n    }\n    if(user && chats && chats.length > 0){\n      setChatsData(user)\n    }\n  }, [chats, user])\n    \n  //sets the post data from user uid\n  useEffect(() => {\n    async function setPostsData(){\n      var usersRef = firestore.collection('users')\n      for(var i = 0; i < initalPosts.length; i++){\n        var user = await usersRef.doc(initalPosts[i].uid).get()  \n        initalPosts[i].name = user.data().name\n        initalPosts[i].profilePic = user.data().photo\n  \n        if(initalPosts[i].photo){\n          var url = await storage.ref().child(initalPosts[i].id).getDownloadURL()\n          initalPosts[i].photo = url\n        }\n      }\n      setPosts(initalPosts)\n    }\n    if(user && initalPosts && initalPosts.length > 0){\n      setPostsData(initalPosts)\n    }\n  }, [username, photoLink, user, initalPosts])\n\n  async function updateProfile(){\n    const image = new Promise(resolve => {\n      if(document.querySelector(\"#image-file\").files[0] !== undefined){\n        resolve();\n      }\n    })\n\n    image.then(() => {\n      const file = document.querySelector(\"#image-file\").files[0];\n      const ref = storage.ref();\n      const name = user.uid;\n      //insert image into storage\n      const task = ref.child(name).put(file);\n      task.then(snapshot => {\n          snapshot.ref.getDownloadURL().then(url =>{\n              setPhoto(url)\n              //update user's photo in 'users' collection\n              firestore.collection('users').doc(user.uid)\n              .update({                    \n                  photo: url\n              }); \n          })\n      })\n    })\n\n    const inputName = document.getElementById('changeNameInput').value\n    if(inputName !== user.displayName && inputName !== ''){\n      setUsername(inputName);\n      //update user's name in 'users' collection\n      firestore.collection('users').doc(user.uid)\n      .update({\n        name: inputName\n      })\n    }\n  }\n  return (\n    <div className=\"App\">\n        {user ? <Layout posts = {posts} messages = {privateChats} updateProfile = {updateProfile} name = {username} photo = {photoLink} uid = {user.uid}/> : <SignIn/>}\n    </div>\n  );\n}\n\n\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { RecoilRoot } from \"recoil\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <RecoilRoot>\n      <App />\n    </RecoilRoot>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}