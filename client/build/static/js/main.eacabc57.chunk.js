(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{116:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(2),c=n.n(i),s=n(22),o=n.n(s),r=n(6),l=n.n(r),d=n(10),u=n(4),p=n(7),j=n(57),m=n(58),h=n(13),b=n(64),f=n(63),O=n(18);n(71),n(73),n(118),n(119);O.a.initializeApp({apiKey:"AIzaSyDS-A0cw26s47ra6HoDkJqDbvebpvltWgo",authDomain:"omok-77b55.firebaseapp.com",databaseURL:"https://omok-77b55.firebaseio.com",projectId:"omok-77b55",storageBucket:"omok-77b55.appspot.com",messagingSenderId:"658119935119",appId:"1:658119935119:web:2c790660a0afcaf2e2dcfa",measurementId:"G-111CH2C0D9"});O.a;var A=O.a.firestore(),g=O.a.auth(),x=O.a.storage(),v=(O.a.analytics(),new O.a.auth.GoogleAuthProvider),y=O.a.firestore.FieldValue,k=n(8);function w(e){return Object(a.jsxs)("div",{className:"challengeWrapper",children:[Object(a.jsx)("p",{style:{fontSize:"20px",paddingRight:"5px"},children:e.name}),Object(a.jsx)("button",{className:"challengeOptionBtn",onClick:function(){return e.accept(e.uid)},children:Object(a.jsx)("img",{className:"challengeOptionIcon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAA1ElEQVRIie3VOwrCQBRA0SvuwJW4AkvRUhHtVCzE1v8fwc4fbsSFuAIXYqNoYiycwCNFJo4TbHLbvJw3DIFA0h/LAal0THgbOAGZOPAW4AIeMLGNNwU+tY03BD6zjdeAp8LntvGqwBe28YrAl2GDWQNcnjwUXwMOUP8CLwMPha90w2M16PD5EnSVBL6JeqKResHVLCkCdzW7jYr7DTVLCgLffYv7DRTwAjoB/Kae7U1xv35gSV7gh19xP3ldxneuq6tgDziaImH/gzNwBS5Az3RBkrY3LltA/9XJVDYAAAAASUVORK5CYII=",alt:"accept"})}),Object(a.jsx)("button",{className:"challengeOptionBtn",style:{marginRight:"10px"},children:Object(a.jsx)("img",{className:"challengeOptionIcon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAApUlEQVRIie2VQQ6DMAwEhz4BUtT+EuhPy6HPoQdcKSASeRN6Y67YsxExBi5EWmAEQkFvAF7mSDIACzADvSDvrWcxR5IuKvSGxPLZHFnuwNsaPsBTqH04DuQOKZZ7QqrluZDT5D/2l6gOgYv41NLJbxWhTUXvhr++oqMLVb4TWZ56Jod4RrE4RJlzOSRQv+yyq34S5UchY64wsO7z0h/OgGNdX2z4AhszUxhUUXjvAAAAAElFTkSuQmCC",alt:"deny"})})]})}var D=function(e){var t=A.collection("users").doc(e.uid).collection("challenges"),n=Object(k.a)(t,{idField:"id"}),i=Object(u.a)(n,3),c=i[0];return i[1],i[2],Object(a.jsxs)("div",{id:"challengeBox",children:[Object(a.jsx)("div",{id:"challengeHeader",children:"Challenges"}),c&&c.length>0?c.map((function(t){return Object(a.jsx)(w,{name:t.name,uid:t.id,accept:e.accept},t.id)})):Object(a.jsx)("p",{style:{fontSize:"20px",padding:"5px"},children:"None :("})]})};var C=function(e){var t=e.message,n=e.uid===g.currentUser.uid?"sent":"received";return Object(a.jsx)("div",{id:"bubble",className:n,children:Object(a.jsx)("p",{id:"msgTxt",className:n+"Text",children:t})})};var I=function(e){var t=A.collection("games").doc(e.gameData.docID).collection("msgs"),n=t.orderBy("createdAt").limit(25),c=Object(k.a)(n,{idField:"id"}),s=Object(u.a)(c,1)[0];return Object(i.useEffect)((function(){function n(){return(n=Object(d.a)(l.a.mark((function n(a){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.add({text:a,createdAt:y.serverTimestamp(),uid:e.uid});case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var a=document.getElementById("boardChatArea");a.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),""!==a.value&&function(e){n.apply(this,arguments)}(a.value),a.value="")}))}),[t,e.uid]),Object(a.jsxs)("div",{id:"boardChatField",children:[Object(a.jsx)("div",{id:"chatMessages",children:s&&s.map((function(e){return Object(a.jsx)(C,{uid:e.uid,message:e.text},e.id)}))}),Object(a.jsx)("div",{id:"boardMsgWrapper",children:Object(a.jsx)("div",{id:"boardMsgInput",children:Object(a.jsx)("textarea",{id:"boardChatArea",className:"browser-default",type:"text",autoComplete:"off"})})})]})},N=c.a.createContext();function P(e){var t=e.children,n=Object(i.useState)(Array.from({length:10},(function(){return Array.from({length:10},(function(){return 0}))}))),c=Object(u.a)(n,2),s=c[0],o=c[1],r=Object(i.useState)(),l=Object(u.a)(r,2),d=l[0],p=l[1],j=[],m=[];return function(){for(var e=0;e<19;e++)j[e]=26+35*e;for(var t=0;t<19;t++)m[t]=26+35*t;for(var n=0;n<20;n++)s[n]=new Array(20);for(var a=0;a<20;a++)for(n=0;n<20;n++)s[a][n]=0}(),Object(a.jsx)(N.Provider,{value:[s,o,j,m,d,p],children:t})}var V=function(e){var t=A.collection("games").doc(e.gameData.docID).collection("moves").orderBy("createdAt","desc").limit(1),n=Object(k.a)(t,{idField:"id"}),c=Object(u.a)(n,1)[0];return Object(i.useEffect)((function(){c&&0===c.length&&e.setIsNewGame(!1),e.isNewGame||(c&&c.length>0?(e.drawPiece(c[0].x,c[0].y,c[0].color),c[0].uid===e.uid?e.setTurn(!1):e.setTurn(!0)):c&&0!==c.length||"first"!==e.gameData.turn?e.setTurn(!1):e.setTurn(!0))}),[c,e]),Object(a.jsx)(a.Fragment,{})};var B=function(e){var t=Object(i.useState)(),n=Object(u.a)(t,2),c=n[0],s=n[1],o=Object(i.useState)(!1),r=Object(u.a)(o,2),l=r[0],d=r[1],j=Object(i.useState)(),m=Object(u.a)(j,2),h=m[0],b=m[1],f=Object(i.useState)(!1),O=Object(u.a)(f,2),g=O[0],x=O[1],v=Object(i.useRef)(),k=Object(i.useContext)(N),w=Object(u.a)(k,6),D=w[0],C=w[1],P=w[2],B=w[3],R=w[4],S=w[5];function E(e,t,n){var a=v.current.getContext("2d");a.fillStyle=n,a.beginPath(),a.arc(e+7.5,t+7.5,12,0,2*Math.PI),a.closePath(),a.fill()}function T(){v.current.getContext("2d").clearRect(0,0,v.current.width,v.current.height),J()}function J(){var e=v.current.getContext("2d"),t=34;e.beginPath();for(var n=0;n<=630;n+=35)e.moveTo(.5+n+t,t),e.lineTo(.5+n+t,664);for(var a=0;a<=630;a+=35)e.moveTo(t,.5+a+t),e.lineTo(664,.5+a+t);e.strokeStyle="black",e.stroke()}return Object(i.useEffect)((function(){J(),console.log("drawing board");var t=A.collection("games").doc(e.gameData.docID).collection("moves");t.get().then((function(e){e.forEach((function(e){E(e.data().x,e.data().y,e.data().color)}))})),e.socket.on("lostGame",(function(){console.log("lost"),s(e.opponentName+" wins!"),b(!1)})),e.socket.on("rematchRequested",(function(){s(e.opponentName+" wants to rematch!"),S(!0),d(!0)})),e.socket.on("startRematch",(function(){var e=Array.from({length:10},(function(){return Array.from({length:10},(function(){return 0}))}));C(e),s(void 0),T(),d(!0),b(!0),t.get().then((function(e){e.docs.forEach((function(e){t.doc(e.id).delete()}))}))})),e.socket.on("opponentDc",(function(){s(e.opponentName+" left"),x(!0)}))}),[e.opponentName,e.socket]),Object(a.jsxs)("div",{id:"gameWrapper",children:[Object(a.jsxs)("div",{children:[c&&Object(a.jsxs)("div",{id:"gameResultWrapper",children:[Object(a.jsx)("p",{id:"gameResult",children:c}),!g&&Object(a.jsx)("button",{id:"rematchBtn",onClick:function(){if(R){e.socket.emit("acceptRematch",e.gameData.otherUid);var t=Array.from({length:10},(function(){return Array.from({length:10},(function(){return 0}))}));C(t),b(!1),s(void 0),T()}else e.socket.emit("requestRematch",e.gameData.otherUid),s("Rematch Requested"),document.getElementById("rematchBtn").style.display="none"},children:"rematch"}),Object(a.jsx)("button",{id:"leaveBtn",onClick:e.leaveMatch,children:"leave"})]}),Object(a.jsx)("canvas",{ref:v,onClick:function(t){if(console.log("clicked",h),h){var n=v.current.getBoundingClientRect(),a=t.clientX-n.left,i=t.clientY-n.top;(function(t,n){if(t>656)t=656;else if(t<26)t=26;else for(var a=0;a<20;a++)if(P[a]<=t&&P[a+1]>=t){var i=P[a],c=P[a+1];t=c-t>t-i?i:c;break}if(n>656)n=656;else if(n<26)n=26;else for(a=0;a<20;a++)if(B[a]<=n&&B[a+1]>=n){var o=P[a],r=P[a+1];n=r-n>n-o?o:r;break}if(0!==D[(n-26)/35][(t-26)/35])return;E(t,n,e.gameData.color),b(!1),A.collection("games").doc(e.gameData.docID).collection("moves").add({x:t,y:n,color:e.gameData.color,createdAt:y.serverTimestamp(),uid:e.uid}).then((function(){D[(n-26)/35][(t-26)/35]=1,C(D),function(){for(var e=0,t=0;t<20;t++)for(var n=0;n<=20;n++)if(1===D[t][n]&&1===D[t][n+1]){if(4===++e)return"win"}else e=0;var a=0;for(t=0;t<20;t++)for(n=0;n<20;n++)if(1===D[n][t]&&1===D[n+1][t]){if(4===++a)return"win"}else a=0;var i,c=0,s=0;for(t=0;t<20;t++){for(n=0;n<20-t;n++)if(1===D[n][n+t]&&1===D[n+1][n+1+t]){if(4===++c)return"win"}else c=0;for(n=0;n<20-t;n++)if(1===D[n+t][n]&&1===D[n+1+t][n+1]){if(4===++s)return"win"}else s=0}for(n=0;n<19;n++){for(t=19,i=0;t>=0;i++,t--)if(1===D[i][t-n]&&1===D[i+1][t-1-n]){if(4===++c)return"win"}else c=0;for(t=19,i=1;i+n<19;i++,t--)if(1===D[i+n][t]&&1===D[i+n+1][t-1]){if(4===++s)return"win"}else s=0}return 0}()&&(console.log("won"),e.socket.emit("wonGame",e.gameData.otherUid),s(e.name+" wins!"))}))})(a-=7.5,i-=7.5)}},id:"omokcanvas",width:"700",height:"700"}),Object(a.jsx)(V,Object(p.a)(Object(p.a)({},e),{},{drawPiece:E,setTurn:b,isNewGame:l,setIsNewGame:d}))]}),Object(a.jsx)(I,Object(p.a)({},e))]})};var R=function(e){var t,n=Object(i.useState)(),c=Object(u.a)(n,2),s=c[0],o=c[1],r=Object(i.useState)(),l=Object(u.a)(r,2),d=l[0],j=l[1],m={width:"100%"};return e.gameData?(t=Object(a.jsx)(B,Object(p.a)(Object(p.a)({},e),s)),document.getElementById("onlineSidebar").style.display="none",m={width:"calc(100% - 400px)"}):t=Object(a.jsxs)("div",{id:"challengeBoxWrapper",children:[Object(a.jsx)(D,Object(p.a)(Object(p.a)({},e),{},{accept:function(t){e.socket.emit("acceptGame",t)}})),d&&Object(a.jsxs)("div",{id:"playerDataBox",children:[Object(a.jsxs)("p",{style:{paddingTop:"5px"},children:["win: ",d.win]}),Object(a.jsxs)("p",{children:["lose: ",d.loss]})]})]}),Object(i.useEffect)((function(){e.gameData&&A.collection("users").doc(e.gameData.otherUid).get().then((function(e){o({opponentName:e.data().name,opponentPhoto:e.data().photo})})),A.collection("users").doc(e.uid).get().then((function(e){var t={win:e.data().win,loss:e.data().loss};j(t)}))}),[e.gameData]),Object(a.jsxs)("div",{id:"playWrapper",children:[Object(a.jsxs)("div",{id:"playHeaderWrapper",children:[Object(a.jsx)("div",{id:"playHeader",style:m,children:"Play"}),e.gameData&&s&&Object(a.jsxs)("div",{children:[Object(a.jsx)("img",{id:"opponentPhoto",src:s.opponentPhoto,alt:"opponentPhoto"}),Object(a.jsx)("div",{id:"playOpponentHeader",children:s.opponentName})]})]}),Object(a.jsx)("div",{id:"playContent",children:t})]})},S="data:image/png;base64,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";var E=function(e){var t=Object(i.useState)(!1),n=Object(u.a)(t,2),c=n[0],s=n[1],o=e.photo?e.photo:S,r="online"===e.status?"onlineDot":null,l=e.uid===g.currentUser.uid?"myUserWrapper":"userInfoWrapper";function d(){e.uid!==g.currentUser.uid&&s(!c)}return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:l,onMouseEnter:d,onMouseLeave:d,children:[Object(a.jsx)("img",{id:"onlinePic",src:o,alt:"profile pic"}),Object(a.jsx)("div",{className:"onlineUsername",children:e.name}),c&&Object(a.jsxs)("div",{className:"userOptions",children:[Object(a.jsx)("button",{className:"userOptionsBtn",onClick:function(){return e.showChat(e)},children:"Message"}),Object(a.jsx)("button",{className:"userOptionsBtn",onClick:function(){return e.challenge(e.uid)},children:"Challenge"})]})]}),Object(a.jsx)("div",{className:r})]})};var T=function(e){var t=A.collection("users"),n=Object(k.a)(t,{idField:"id"}),i=Object(u.a)(n,1)[0];function c(e){return s.apply(this,arguments)}function s(){return(s=Object(d.a)(l.a.mark((function t(n){var a,i,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.uid!==e.uid){t.next=2;break}return t.abrupt("return");case 2:e.displayMsgs(),i=[e.uid,n.uid],a=e.uid<n?e.uid+"+"+n.uid:n.uid+"+"+e.uid,(c=A.collection("chats")).doc(a).get().then((function(e){e.exists||c.doc(a).set({users:i,lastSent:y.serverTimestamp()})}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(t){A.collection("users").doc(t).collection("challenges").doc(e.uid).set({played:"no",name:e.name})}return Object(a.jsxs)("div",{id:"onlineSidebar",children:[Object(a.jsx)("div",{id:"usersTitle",children:"Users"}),i&&i.map((function(e){return Object(a.jsx)(E,{uid:e.id,photo:e.photo,name:e.name,status:e.status,showChat:c,challenge:o},e.id)}))]})};var J=function(e){return Object(a.jsxs)("div",{className:"msg",onClick:function(){return e.displayChatBox(e)},children:[Object(a.jsx)("img",{className:"msgProfile-pic",src:e.photo,alt:"profile pic"}),Object(a.jsxs)("div",{className:"msgUserInfo",children:[Object(a.jsx)("div",{style:{fontWeight:"600"},children:e.name}),Object(a.jsx)("div",{style:{color:"grey"},children:"Dec 16"})]})]})};var M=function(e){var t=e.text,n=e.uid===g.currentUser.uid?"sent":"received";return Object(a.jsx)("div",{id:"bubble",className:n,children:Object(a.jsx)("p",{id:"msgTxt",className:n+"Text",children:t})})};var U=function(e){var t=A.collection("chats").doc(e.id).collection("messages"),n=t.orderBy("createdAt").limit(25),i=Object(k.a)(n,{idField:"id"}),c=Object(u.a)(i,1)[0];function s(){return(s=Object(d.a)(l.a.mark((function n(a){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.add({text:a,createdAt:y.serverTimestamp(),uid:e.uid});case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return console.log(c),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{id:"msgTextHeader",style:{paddingTop:"5px"},children:[Object(a.jsx)("img",{className:"chatBox-Pic",src:e.photo,alt:"profile pic"}),e.name]}),Object(a.jsx)("div",{id:"msgArea",children:c&&c.map((function(e){return Object(a.jsx)(M,{text:e.text,uid:e.uid},e.id)}))}),Object(a.jsx)("div",{className:"msgInputWrapper",children:Object(a.jsx)("div",{className:"msgInput",children:Object(a.jsx)("textarea",{id:"chatInputArea",onKeyDown:function(e){if("Enter"===e.key){e.preventDefault();var t=e.target.value;""!==t&&function(e){s.apply(this,arguments)}(t),e.target.value=""}},className:"browser-default",type:"text",autoComplete:"off"})})})]})};var q=function(e){function t(e){var t=Object(a.jsx)(U,Object(p.a)({},e));o.a.render(t,document.getElementById("chatbox"))}return Object(i.useEffect)((function(){document.getElementById("onlineSidebar").style.display="block"})),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{id:"messages",children:[Object(a.jsx)("div",{id:"msgTextHeader",children:"Messages"}),e.messages&&e.messages.map((function(n){return Object(a.jsx)(J,Object(p.a)(Object(p.a)({uid:e.uid},n),{},{displayChatBox:t}),n.id)}))]}),Object(a.jsx)("div",{id:"chatbox"})]})},z=(n(37),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAADqklEQVRoge3ZTYhWVRzH8c84M6A0OSlEZZaLjMFeyByL3qhFiBvNIqXcRIswjKJdLSsscFtMr1RQCW3SghZlVtAmekGKQo0WlWlBlC9l6hTOPC3OOd1bTDP33rnPfZ7g+cLlzJznf/7n97/nnHvP+V969OjRo0cH6CthO4KbsQrn4jwM4DD24AO8hq8K+luG9bgeF2MhTuEADmIX3sDXJTROy0q8h1aBaxJvY/k0/i6PNpMFfb6L0dkEMIixXIeH8DxuEkbnNMwVRmYtnhZGpyXc2UfQn/PXj0fjb8nfU1gTfcyNPkewDi9Em3SDnhBmQCkW4P3o5Di2YH6BdqfjYYzHti/HAPqxLdaN46FoOxPzheBPyEbnjKJBDOaC+F6YCmVZjv3RxzZZEN/hsgr+RoW1k4IpNDJjsiAWVeg0sST6SHN9P86fhb9FsmAen8l4pTAfj6s2Ev9mVJhK41hRg78VwjSbmMlfejptqaHTxAPxqovHBI27/stgRPY0KbKwi5IWe10My56OF6bKOTmDW2L5On6rseOJeNXFr8KLkvCCxj8DuTGWb9bYabtIGlelinwgS2K5pzE51dkbyymfgseEeTfUmJzqDAlaj6WK/IikBXmqSUUVmYzl3/rzgRyJ5cLG5FQnaTycKvKB/BLLcxqTU52k8VCqyAfyRSyvaExOda6M5eepIh/Ix7G8ujE51bkqlp9M9eMy4UlwRDgbdCvzhJdiS9iNTMnuaLChIVFVuF3QOOVoJO6LRruVO883RR8+EzRuns5wHn6Mhre2X1dp1gvaDiow/e+NxgeEnWa3MCwE0MI9RRoM4NPY4MX26SrNS4Kmj5Q4FlwqSyDc3R5dpdgsaDmJi8o2vis2/kNuu9wBVkcNLdxZ1UlKRPyOa+rRVYrrhPxBoYTDdPTjVVkwTY7MDcJJtSWkYmd9XB4UjpZpjm6crcMCbIx9tbA9aqiFfiGFmXJUz6qQvizYz1ZZmvaVdvTTJ6RDJ2Inbwmp1bpYgJ3R94SQVm3r7mItjsYOv1HPbvlafCvbtK6pwWchluJLWeZ9q2rzeAAP4s/oa5+wC2+UITwnWzcf4oIS7ZfGNumzwTPCZ4WOsRo/REEnhDs8Zxr7PmySZW1+Er65dAVnYodsdHZi8RR2i/FOzm57bNt1bMDPgsijuC332zohwZEW9KbG1ZXkbCF/nO76GJ7M/b8DZ3VMXQXuELY1KYCTuL+jimbBJUKedm/8+3/NsO46afZohL8AQdD5tJ4fnIQAAAAASUVORK5CYII="),Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAADwklEQVRoge2YTWgcZRjHf8/MFpNqEAWb2TbGFgUFPy5FWuwm1GObDI0okRSl9CCoBys9+NWCVjx46KWCxK9DQTRWqM3HbgulaMhuIvXgofhBUUrAuE48VKSNpOnOPB6SyU6S3ezO7KaTw/4u884z7/s8/+d95+OdBxo0aNAgTqSaTnk71W54sk9Fu4CtQBtgAlcRLqHyHQnz6+Tg6GQ1/hy7c5t6Xi/CkwiPodwFuMAUMAma9kxzaMvQ2B81JTC1Z3ebaRaOAQcWBK+Gq3BKTeONcoHzdqodj/dF6K3Kn3LSFffte9Pf/xk6gbzd0SOqnwN3VAi0nGuCvmClx08FjY6d6lPlk0j+VJ+zMuPDpS4apYxOd+qQqJ6OEAygRZGBfNeuV31Dvjt1WJUvIvsTOePYqVdKXVyxAgszf5oyyYVABe1DDVHRL0vFCoknqk8tX4klThfu+V+JNlOluLZwbKmXv4ShD90zPJ73DUtm2TQL71I/8TAvvF7iAVpuehwLGhZXIG+n2kW5QuW3Q9y4rpvY2nZudAoCK2BAD+tfPIBpmoV9/sliAgp74tETBdnrt4rPgMoDsWiJhN7vtwIPsVpxSInIFr8RfAt5MQiJhuD6zcAtxFQsYqIQ0FpMwODnWMREQfjFbxbfQqpD8agJT1DrYgJNs81p4HosisLx302Vs/7JYgJ3X7jwL2h/PJpCIPTfl8n9458u2QvJBj1OcQO2Hpkx3cTxoGFJAtaZib8Vfe3WaqoeUXlz09lRJ2hbsedPpsc/Bv321smqDlHGWx/PfrjcviIBATWMwn5YV9+FaTdh9Mk7Kz+2Jf+6WocvToM8DcyuubTKzKnwTLlCQdnfxmQ6+4NAL1BYM2mV8UTlwOaRXK5ch1X/e610bkRVDhLPPklVecnKZL9arVOVha2OHlEdAJrqIq0yroi8aI1kP6vUsepKwV/dqd0Igyh31qatIjOoPJvMZDPVdA5V6nC6nnhExTjHfGlxLbhqqGG3ZsYmqh0QqvZjZSZ+IpHoAC6FllaZyybGzjDiIULxKjk4Ojl7PbFD4YOwY8sifHPbbNOOTemx38IPrYG8nXpelH7g9ogubgi8bqVzJ6JqqLXch7O381E1vAHg4ZBDL6vI/s0j2R9riV9zAgC6ffsGJ9l8BDhK5dqSivApNzYets6fn6k1dl0S8HHsXTtV5STwYJlwv6vowdW+rGGpawIwvxrTyeaXFd6jWGedU/jImNv4Vj1mPUjdE/Bx7M5tqt4JQAzlUGsmd2WtYjVo0KBBfPwPL8Y2i7i/8wcAAAAASUVORK5CYII=";var L=function(e){return Object(a.jsxs)("div",{className:"commentWrapper",children:[Object(a.jsx)("img",{className:"postCommentPhoto",src:e.photo,alt:"postCommentPhoto"}),Object(a.jsxs)("div",{className:"commentTextWrapper",children:[Object(a.jsx)("p",{className:"commentName",children:e.name}),Object(a.jsx)("p",{children:e.text})]})]})};var Z=function(e){var t,n=Object(i.useState)(),c=Object(u.a)(n,2),s=c[0],o=c[1],r=Object(i.useState)(),j=Object(u.a)(r,2),m=j[0],h=j[1],b=Object(i.useState)(),f=Object(u.a)(b,2),O=f[0],v=f[1],w=Object(i.useState)(z),D=Object(u.a)(w,2),C=D[0],I=D[1],N=Object(i.useState)(!1),P=Object(u.a)(N,2),V=P[0],B=P[1],R=A.collection("posts").doc(e.docId),S=Object(k.a)(R.collection("likes"),{idField:"id"}),E=Object(u.a)(S,1)[0],T=Object(k.a)(R.collection("comments").orderBy("createdAt","asc").limit(10),{idField:"id"}),J=Object(u.a)(T,1)[0],M=Object(i.useState)(),U=Object(u.a)(M,2),q=U[0],Z=U[1];function W(){return Y.apply(this,arguments)}function Y(){return(Y=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.collection("posts").doc(e.docId).delete();case 2:if(!e.photo){t.next=5;break}return t.next=5,x.ref().child(e.docId).delete();case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return e.uid===g.currentUser.uid&&(t=Object(a.jsx)("div",{className:"postOptionsBtn noselect",onClick:function(){o(void 0===s?Object(a.jsx)("div",{className:"postOptions",children:Object(a.jsx)("button",{className:"deletePostBtn",onClick:W,children:"Delete"})}):void 0)},children:"\u2807"})),Object(i.useEffect)((function(){E&&E.length>0&&h(E.length),C!==Q&&A.collection("posts").doc(e.docId).collection("likes").doc(g.currentUser.uid).get().then((function(e){e.exists&&I(Q)}))}),[E,C,e.docId]),Object(i.useEffect)((function(){if(J&&J.length>0){v(J.length);var e=0;J.forEach((function(t,n,a){A.collection("users").doc(t.uid).get().then((function(t){e++,a[n].name=t.data().name,a[n].photo=t.data().photo,e===a.length&&Z(J)}))}))}}),[J]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"post",children:[Object(a.jsxs)("div",{className:"postUserInfoWrapper",children:[Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(a.jsx)("img",{className:"postProfile-pic",src:e.profilePhoto,alt:"profile pic"}),Object(a.jsxs)("div",{className:"postTextWrapper",children:[Object(a.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[Object(a.jsx)("b",{className:"postName",children:e.name}),Object(a.jsx)("div",{style:{color:"grey"},children:e.time})]}),Object(a.jsx)("p",{className:"postText",children:e.text})]})]}),t]}),s,e.photo&&Object(a.jsx)("img",{className:"postPic",src:e.photo,alt:"post pic"}),Object(a.jsxs)("div",{className:"postIconWrapper",children:[Object(a.jsxs)("div",{className:"likeAndCommentWrapper",children:[Object(a.jsx)("img",{className:"likeBtn",onClick:function(){R.collection("likes").doc(g.currentUser.uid).get().then((function(e){e.exists?(R.collection("likes").doc(g.currentUser.uid).delete(),R.get().then((function(e){e.data().likes>1?h(e.data().likes-1):h(),R.update({likes:e.data().likes-1})})),I(z)):(R.collection("likes").doc(g.currentUser.uid).set({liked:"yes"}),R.get().then((function(e){h(e.data().likes+1),R.update({likes:e.data().likes+1})})))}))},src:C,alt:"heartIcon"}),Object(a.jsx)("p",{className:"numLikesAndPosts",children:m})]}),Object(a.jsxs)("div",{className:"likeAndCommentWrapper",children:[Object(a.jsx)("img",{className:"commentBtn",onClick:function(){return B(!V)},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAADzElEQVRoge3Z62tcRRjH8U/aJKZNNWmkL/pCi2nUWq0WLN7witB/QUq9vPVKFcFLFUXBl4Iogm99UVQEry3FomCpVqv1ElvpRa2oELSoaFttWkjii2dOclJ2k92zZ7cr5AuHw56Zeeb37Dkz88wzzDHHHDPRUaKtc3E11mAIg1iEvlT+N47iEH7A5/gEv5SooTBDeBp7MVHlOpquauXf4Cksb7F2cB22Yiwn6Gs8j/XirQxUaDeQym7FCxjOtR/DFlzTZO2If21LrvNDeBTnNWBzEBvxY87uOw3arEoH7sc/qaMDuAXzSuxjHtbhYOrjGO4r0b5FeD0ZPy7eQGeZHZxCFx7DaOrzVfQ2anQAnyaDB3FJowbr4FJ8l/reif6ihs7El8nQh6am0VbSj+1Jw27xddTFfDErTWAbFpSprk4W4oOkZbPQVjOPp4bDOKt0afXThz1C0yO1NroMJ8Uidn5zdBXiQjFrnlDjWH1feH53E0UVZYPQ9t5sFW9MFb/V3Cm2KF3YJzReP1PFN1Kl9S0QVZTbhcbXqlXoF2PjMLpbJKoIZ+B3MVYmJ6J8iLFWvLrNwqF25YTQ2C00Y7ojWdS5rYWiipJpnIyU846sSvfhlskpTqZxVaXCA2IQtfP4yOgRWvdnD/JvpE9Et+08PjJG0zUZ/+UdmVDu/qLZdAjNmC78TzG1LWy1ogL0CK1Hsgd5R35N93NaqaggWaJiMgOTd2R3ul/RMjnFWZ3ue7IHeUd2pfsNLZNTnGwh/LhSYa/Y8GdjpV3pESHKqNjFVmST9g8a7xAaX5mp0uUYF4tju4bx+4Uj185W+a1UcUOTRRXhAaFtay2VB8VY+RcrmiiqXi4SmkZxca2N7hGe78Xi5uiqi36xa53AQ/U07MDLpnJap3O1700aJvC2AmFUt6l80k6cXaa6GunHjqRhlwZSpwvEbixLma4pQ12NrMb3qe+PlJDp7MKLyeBJPNyowVnoxhOmktiblJDEzrMuGT5cptEcnbhNHMtlJ113NqOj5aa+1TIZEinan5P9cbyJZfUYqWf1virdv6hSvhFLxZngMH7CXyLrkbFEnEStwJUiIbgylY3jXTyj/D9rGtmR29pTnnfiOdUPO4+LBbZa+Vd4UoNHbbUeTy8Vr35ErPxj6fkFeAk34TcR1iwT2Y1BsZguFs4eEUfU2fH0Z+J4eqQRB+ol+8fvSr+X4Fnx2UyIfGw7hTMVWSkEH8ODIqjMHMjC6ar7gnZhvliMKn3b23Hz6ZM2ndlmrXvFGxnBH+IsfIcY+PuaK22O/zf/AZh9+Zk/uRRIAAAAAElFTkSuQmCC",alt:"commentIcon"}),Object(a.jsx)("p",{className:"numLikesAndPosts",children:O})]})]})]}),V&&Object(a.jsxs)("div",{className:"postComments",children:[q&&q.map((function(e){return Object(a.jsx)(L,Object(p.a)({},e),e.id)})),O&&Object(a.jsx)("div",{className:"commentInputLine"}),Object(a.jsx)("input",{className:"postCommentInput",onKeyDown:function(e){"Enter"===e.key&&""!==e.target.value&&(e.preventDefault(),R.collection("comments").add({text:e.target.value,uid:g.currentUser.uid,createdAt:y.serverTimestamp()}).then((function(){e.target.value=""})))},placeholder:"Write a comment!",type:"text",name:"name",autoComplete:"off"})]})]})};var W=function(e){var t=Object(i.useState)(),n=Object(u.a)(t,2),c=n[0],s=n[1];function o(){return r.apply(this,arguments)}function r(){return(r=Object(d.a)(l.a.mark((function t(){var n,a,i,c,s,o,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==(n=document.getElementById("postArea").value)){t.next=3;break}return t.abrupt("return");case 3:return document.getElementById("postArea").value="",a=A.collection("posts"),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=new Date,s=i[c.getMonth()]+" "+c.getDate(),o={uid:e.uid,text:n,createdAt:y.serverTimestamp(),time:s,likes:0,comments:0},t.next=11,a.add(o);case 11:r=t.sent,new Promise((function(e){void 0!==document.querySelector("#postImage").files[0]&&e()})).then((function(){var e=document.querySelector("#postImage").files[0];x.ref().child(r.id).put(e).then((function(){A.collection("posts").doc(r.id).update({photo:"yes"})})),p()}));case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){document.getElementById("postImage").value="",s()}return Object(i.useEffect)((function(){document.getElementById("onlineSidebar").style.display="block"}),[]),Object(a.jsxs)("div",{style:{height:"100%"},children:[Object(a.jsx)("div",{id:"homeHeader",style:{position:e.position},children:Object(a.jsx)("p",{style:{cursor:"pointer",width:"60px",fontSize:"22px"},onClick:function(){document.getElementById("content").scrollTop=0},children:"Home"})}),Object(a.jsxs)("div",{id:"feed",children:[Object(a.jsxs)("div",{id:"postInput",children:[Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",height:"43px"},children:[Object(a.jsx)("form",{children:Object(a.jsxs)("label",{children:[Object(a.jsx)("img",{id:"uploadPic",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAABM0lEQVRYhe2W3WrCQBCFv4S+VilEBIMXpT5WEbwpVCn2rfoC2jdQ++dFepEJGddMdkO1e7MHQsJmNuebMyEEkpIiK1PXVQzv/J9Nz3TTsZZ1rF1SJ0lHT+CaAFPgHdgCZciGisu+iFv1zI3lE30EWr4EcoYBl9QpbIBJiE8fQA6s5fhraoMBGvPm/ksARF9agwC0+UGOClhhfy98aQUDZMCzMh8Bt8CeNgkXQu+pgNcOiCAAt/NC1Y2BD7n3pCCstNyReQG6Onc1Bj5px5E7ewrqtHaypsfhBbA6d1UCX1L7JucdcKdqCtokltKcFyDEvNFUQRypu3alIfT7YQJYsVuaKIiFUaPH4QUI6dzVPfAt++dGjU5i8JcwRA/AjzzjsQfiagAAMwVhJXHik/4Jk5Ki6xdOeZDYnBW7qwAAAABJRU5ErkJggg==",alt:"uploadPic"}),Object(a.jsx)("input",{id:"postImage",onChange:function(){var e=new FileReader,t=document.querySelector("#postImage").files[0];t&&e.readAsDataURL(t),e.addEventListener("load",(function(){s(Object(a.jsxs)("div",{id:"postImageWrapper",children:[Object(a.jsx)("img",{id:"uploadedPic",src:e.result,alt:"uploadPic"}),Object(a.jsx)("img",{id:"removeImageBtn",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABFUlEQVRIid2VTW7CQAyFP7UiZ+kCVrCDHqIpiDtBb0EERyoVZVsUtmFNWMyMVJk3kxDEon2SpZF/nh3P2IH/jgyYAxtgC5y8bIG1t2VdyafAHqgbZA/ktxA/Ax8tiK0sfWwjupD/TpLE+x3kQaLtyrju+RgYAaUgKoEhMDH6byIXPxckQ2/rmySl1+ELsHEzlWAjHI/AwNtfgB+hO4i4QiX4Eo622r45q9bVuDm5QhVxtl+SqjxIFRyfVKaWqBO2s1I+vEVr4aguVF28jVupBA9/pmrQJqQHbQS8Gv2OxIbNBdGt8hYjD7hn2S2ayMGt3GUH8tbrOiDHLa4m4h0t2hJDhnsRBfCJm9DKnwvcX6/Xlfxv4AK2lPndEfN11QAAAABJRU5ErkJggg==",onClick:p,alt:"removeImage"}),Object(a.jsx)("button",{id:"postBtn",onClick:o,children:"Post"})]}))}),!1)},type:"file",style:{display:"none"}})]})}),Object(a.jsx)("textarea",{id:"postArea",placeholder:"post something!",onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),o())},type:"text",autoComplete:"off"})]}),c]}),e.posts&&e.posts.map((function(e){return Object(a.jsx)(Z,{name:e.name,profilePhoto:e.profilePic,text:e.text,time:e.time,photo:e.photo?e.photo:void 0,uid:e.uid,docId:e.id},e.id)}))]})]})},Y=n(36),F=n.n(Y),G=n(60),K=n.n(G);var H=function(){return g.currentUser&&Object(a.jsx)("button",{id:"signOutBtn",onClick:function(){return g.signOut()},children:"Log Out"})};F.a.setAppElement("#root");var X={content:{top:"30%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"15px"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)"}},_=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).homeClick=a.homeClick.bind(Object(h.a)(a)),a.messagesClick=a.messagesClick.bind(Object(h.a)(a)),a.playClick=a.playClick.bind(Object(h.a)(a)),a.leaveMatch=a.leaveMatch.bind(Object(h.a)(a)),a.openModal=a.openModal.bind(Object(h.a)(a)),a.closeModal=a.closeModal.bind(Object(h.a)(a)),a.inputChange=a.inputChange.bind(Object(h.a)(a)),a.state={home:!0,messages:!1,play:!1,gameData:void 0,modalIsOpen:!1,position:"sticky"},a}return Object(m.a)(n,[{key:"homeClick",value:function(){this.setState({home:!0}),document.getElementById("content").scrollTop=0}},{key:"playClick",value:function(){this.setState({play:!0,home:!1,messages:!1})}},{key:"messagesClick",value:function(){this.setState({messages:!0,home:!1,play:!1})}},{key:"leaveMatch",value:function(){A.collection("users").doc(this.props.uid).update({inGame:"no"}),A.collection("users").doc(this.state.gameData.otherUid).update({inGame:"no"}),this.socket.emit("leftMatch",this.state.gameData.otherUid),this.setState({gameData:void 0,play:!0})}},{key:"openModal",value:function(){this.setState({modalIsOpen:!0,position:"inherit"})}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1,position:"sticky"})}},{key:"inputChange",value:function(){var e=new FileReader,t=document.querySelector("#image-file").files[0];e.addEventListener("load",(function(){document.getElementById("change-pic").src=e.result}),!1),t&&e.readAsDataURL(t)}},{key:"componentDidMount",value:function(){var e=this,t=!0;return this.socket=K()({query:"uid=".concat(this.props.uid)}),this.socket.on("startGame",(function(n){t&&(e.setState({gameData:n}),e.playClick())})),function(){t=!1}}},{key:"render",value:function(){var e,t=this.state.home,n=this.state.messages,i=this.state.play;return t?e=Object(a.jsx)(W,{posts:this.props.posts,position:this.state.position}):n?e=Object(a.jsx)(q,{messages:this.props.messages,uid:this.props.uid}):i&&(e=Object(a.jsx)(R,{name:this.props.name,uid:this.props.uid,photo:this.props.photo,socket:this.socket,gameData:this.state.gameData,leaveMatch:this.leaveMatch})),Object(a.jsxs)("div",{children:[Object(a.jsxs)(F.a,{isOpen:this.state.modalIsOpen,onRequestClose:this.closeModal,id:"profile-modal",style:X,children:[Object(a.jsx)("form",{children:Object(a.jsxs)("label",{children:[Object(a.jsx)("img",{id:"change-pic",src:this.props.photo,alt:"profile pic"}),Object(a.jsx)("i",{id:"upload-icon",className:"material-icons",children:"cloud_upload"}),Object(a.jsx)("input",{id:"image-file",onChange:this.inputChange,type:"file",style:{display:"none"}})]})}),Object(a.jsxs)("div",{id:"change-name",children:[Object(a.jsx)("p",{id:"changeNameHeader",children:"Name"}),Object(a.jsx)("input",{className:"input-field",defaultValue:this.props.name,id:"changeNameInput",maxLength:"15",type:"text",autoComplete:"off"})]}),Object(a.jsx)("button",{id:"profile-submit",onClick:this.props.updateProfile,children:"Apply"})]}),Object(a.jsxs)("div",{id:"content",children:[Object(a.jsxs)("div",{id:"sidebar",children:[Object(a.jsx)("img",{id:"profile-pic",onClick:this.openModal,src:this.props.photo,alt:"profile pic"}),Object(a.jsx)("i",{id:"profile-icon",className:"material-icons",children:"person"}),Object(a.jsx)("button",{onClick:this.homeClick,className:"sidebar-btn",children:"Home"}),Object(a.jsx)("button",{onClick:this.playClick,className:"sidebar-btn",children:"Play"}),Object(a.jsx)("button",{onClick:this.messagesClick,className:"sidebar-btn",children:"Messages"}),Object(a.jsx)("button",{onClick:this.openModal,className:"sidebar-btn",children:"Profile"}),Object(a.jsx)(H,{})]}),e,Object(a.jsx)(T,Object(p.a)(Object(p.a)({},this.props),{},{displayMsgs:this.messagesClick}))]})]})}}]),n}(i.Component),$=n.p+"static/media/pikachu.7e8bbe70.jpg",ee=n(61);function te(){var e=Object(i.useState)(Object(a.jsx)(ne,{setContent:function(e){c(e)}})),t=Object(u.a)(e,2),n=t[0],c=t[1];return Object(a.jsx)("div",{id:"loginPage",style:{backgroundImage:"url(".concat($,")")},children:n})}function ne(e){var t=Object(i.useState)(),n=Object(u.a)(t,2),c=n[0],s=n[1],o=Object(i.useState)(),r=Object(u.a)(o,2),l=r[0],d=r[1];return Object(a.jsx)("div",{id:"loginSection",children:Object(a.jsxs)("div",{id:"loginWrapper",children:[Object(a.jsx)("p",{id:"loginHeader",children:"MongOmok"}),Object(a.jsx)("p",{id:"emailInputInfo",children:"Email"}),Object(a.jsx)("input",{className:"loginInput",onInput:function(e){return s(e.target.value)},type:"email",style:{marginBottom:"10px"}}),Object(a.jsx)("p",{id:"passwordInputInfo",children:"Password"}),Object(a.jsx)("input",{className:"loginInput",onInput:function(e){return d(e.target.value)},type:"password",name:"password"}),Object(a.jsx)("button",{className:"loginBtn",onClick:function(){g.signInWithEmailAndPassword(c,l).then((function(e){console.log("signedIn")})).catch((function(e){var t=e.code,n=e.message;console.log(t,n)}))},style:{top:"7%"},children:"Sign In"}),Object(a.jsx)("button",{className:"loginBtn",style:{top:"12%"},onClick:function(){var e=v;g.signInWithPopup(e)},children:"Sign In with Google"}),Object(a.jsx)("p",{onClick:function(){return e.setContent(Object(a.jsx)(ae,{setContent:e.setContent}))},style:{position:"relative",top:"18%",cursor:"pointer"},children:"Create Account"})]})})}function ae(e){var t=Object(i.useState)(),n=Object(u.a)(t,2),c=n[0],s=n[1],o=Object(i.useState)(),r=Object(u.a)(o,2),l=r[0],d=r[1],p=Object(i.useState)(),j=Object(u.a)(p,2),m=j[0],h=j[1];return Object(a.jsx)("div",{id:"loginSection",children:Object(a.jsxs)("div",{id:"loginWrapper",children:[Object(a.jsx)("p",{id:"loginHeader",children:"MongOmok"}),Object(a.jsx)("p",{id:"emailInputInfo",children:"Email"}),Object(a.jsx)("input",{className:"loginInput",onInput:function(e){return s(e.target.value)},type:"email",style:{marginBottom:"10px"}}),Object(a.jsx)("p",{id:"usernameInputInfo",children:"Username"}),Object(a.jsx)("input",{className:"loginInput",onInput:function(e){return h(e.target.value)},type:"name",style:{marginBottom:"10px"}}),Object(a.jsx)("p",{id:"passwordInputInfo",children:"Password"}),Object(a.jsx)("input",{className:"loginInput",onInput:function(e){return d(e.target.value)},type:"password"}),Object(a.jsx)("button",{className:"loginBtn",onClick:function(){ee.validate(c)&&l&&l.length>3&&g.createUserWithEmailAndPassword(c,l).then((function(){A.collection("users").doc(g.currentUser.uid).set({name:m,win:0,loss:0})})).catch((function(e){var t=e.code,n=e.message;console.log(t,n)}))},style:{top:"7%"},children:"Register"}),Object(a.jsx)("p",{onClick:function(){return e.setContent(Object(a.jsx)(te,{}))},style:{position:"relative",top:"18%",cursor:"pointer"},children:"Log In"})]})})}var ie=te,ce=(n(116),n(62));var se=function(){var e,t,n=Object(ce.a)(g),c=Object(u.a)(n,1)[0],s=Object(i.useState)(),o=Object(u.a)(s,2),r=o[0],p=o[1],j=Object(i.useState)(),m=Object(u.a)(j,2),h=m[0],b=m[1],f=Object(i.useState)(),O=Object(u.a)(f,2),v=O[0],y=O[1],w=Object(i.useState)(),D=Object(u.a)(w,2),C=D[0],I=D[1];c&&(t=A.collection("posts").orderBy("createdAt","desc").limit(25),e=A.collection("chats").where("users","array-contains-any",[c.uid]).limit(25));var N=Object(k.a)(e,{idField:"id"}),V=Object(u.a)(N,1)[0],B=Object(k.a)(t,{idField:"id"}),R=Object(u.a)(B,1)[0];function E(){return(E=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new Promise((function(e){void 0!==document.querySelector("#image-file").files[0]&&e()})).then((function(){var e=document.querySelector("#image-file").files[0],t=x.ref(),n=c.uid;t.child(n).put(e).then((function(e){e.ref.getDownloadURL().then((function(e){b(e),A.collection("users").doc(c.uid).update({photo:e})}))}))})),(t=document.getElementById("changeNameInput").value)!==c.displayName&&""!==t&&(p(t),A.collection("users").doc(c.uid).update({name:t}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){if(c){var e=A.collection("users");e.doc(c.uid).get().then((function(t){t.exists?(p(t.data().name),t.data().photo?b(t.data().photo):b(S)):(p(c.displayName),b(c.photoURL),e.doc(c.uid).set({name:c.displayName,photo:c.photoURL,status:"online",win:0,loss:0}))}))}}),[c,r,h]),Object(i.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(t){var n,a,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=A.collection("users"),a=0;case 2:if(!(a<V.length)){e.next=13;break}return i=V[a].users[0]===t.uid?V[a].users[1]:V[a].users[0],e.next=6,n.doc(i).get();case 6:c=e.sent,V[a].name=c.data().name,V[a].photo=c.data().photo,V[a].otherUid=i;case 10:a++,e.next=2;break;case 13:y(V);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c&&V&&V.length>0&&function(t){e.apply(this,arguments)}(c)}),[V,c]),Object(i.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,n,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=A.collection("users"),n=0;case 2:if(!(n<R.length)){e.next=16;break}return e.next=5,t.doc(R[n].uid).get();case 5:if(a=e.sent,R[n].name=a.data().name,R[n].profilePic=a.data().photo,void 0===R[n].photo){e.next=13;break}return e.next=11,x.ref().child(R[n].id).getDownloadURL();case 11:i=e.sent,R[n].photo=i;case 13:n++,e.next=2;break;case 16:I(R);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c&&R&&R.length>0&&function(){e.apply(this,arguments)}()}),[R,r,h,c]),Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(P,{children:c?Object(a.jsx)(_,{posts:C,messages:v,updateProfile:function(){return E.apply(this,arguments)},name:r,photo:h,uid:c.uid}):Object(a.jsx)(ie,{})})})};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(se,{})}),document.getElementById("root"))},37:function(e,t,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.eacabc57.chunk.js.map