(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{128:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(2),c=n.n(i),s=n(26),o=n.n(s),r=n(7),l=n.n(r),d=n(9),u=n(3),p=n(8),j=n(20),h=n(10),m=n(21),A=n(22),b=n(5),g=n(23);n(83),n(85),n(130),n(131);g.a.initializeApp({apiKey:"AIzaSyBlIoSQfMBVD9aUeElvuRONeZrEmAOBrgM",authDomain:"omok-7511f.firebaseapp.com",projectId:"omok-7511f",storageBucket:"omok-7511f.appspot.com",messagingSenderId:"620688302381",appId:"1:620688302381:web:b368b82c4639d6a7a873a4"});g.a;var O=g.a.firestore(),f=g.a.auth(),x=g.a.storage(),v=(g.a.analytics(),new g.a.auth.GoogleAuthProvider),y=g.a.firestore.FieldValue,k=n(12);function C(e){return Object(a.jsxs)("div",{className:"challengeWrapper",children:[Object(a.jsx)("p",{style:{fontSize:"20px",paddingRight:"5px"},children:e.name}),Object(a.jsx)("button",{className:"challengeOptionBtn",onClick:function(){return e.accept(e.uid)},children:Object(a.jsx)("img",{className:"challengeOptionIcon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAA1ElEQVRIie3VOwrCQBRA0SvuwJW4AkvRUhHtVCzE1v8fwc4fbsSFuAIXYqNoYiycwCNFJo4TbHLbvJw3DIFA0h/LAal0THgbOAGZOPAW4AIeMLGNNwU+tY03BD6zjdeAp8LntvGqwBe28YrAl2GDWQNcnjwUXwMOUP8CLwMPha90w2M16PD5EnSVBL6JeqKResHVLCkCdzW7jYr7DTVLCgLffYv7DRTwAjoB/Kae7U1xv35gSV7gh19xP3ldxneuq6tgDziaImH/gzNwBS5Az3RBkrY3LltA/9XJVDYAAAAASUVORK5CYII=",alt:"accept"})}),Object(a.jsx)("button",{className:"challengeOptionBtn",onClick:function(){return e.decline(e.uid)},style:{marginRight:"10px"},children:Object(a.jsx)("img",{className:"challengeOptionIcon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAApUlEQVRIie2VQQ6DMAwEhz4BUtT+EuhPy6HPoQdcKSASeRN6Y67YsxExBi5EWmAEQkFvAF7mSDIACzADvSDvrWcxR5IuKvSGxPLZHFnuwNsaPsBTqH04DuQOKZZ7QqrluZDT5D/2l6gOgYv41NLJbxWhTUXvhr++oqMLVb4TWZ56Jod4RrE4RJlzOSRQv+yyq34S5UchY64wsO7z0h/OgGNdX2z4AhszUxhUUXjvAAAAAElFTkSuQmCC",alt:"deny"})})]})}var w=function(e){var t=O.collection("users").doc(e.uid).collection("challenges"),n=Object(k.a)(t,{idField:"id"}),c=Object(u.a)(n,1)[0],s=Object(i.useState)(),o=Object(u.a)(s,2),r=o[0],l=o[1];return Object(i.useEffect)((function(){if(c&&c.length>0){var e=0;c.forEach((function(t,n,a){O.collection("users").doc(t.id).get().then((function(t){a[n].name=t.data().name,++e===a.length&&l(c)}))}))}else l()}),[c]),Object(a.jsxs)("div",{id:"challengeBox",children:[Object(a.jsx)("div",{id:"challengeHeader",children:"Challenges"}),r&&r.length>0?r.map((function(t){return Object(a.jsx)(C,{name:t.name,uid:t.id,accept:e.accept,decline:e.decline},t.id)})):Object(a.jsx)("p",{style:{fontSize:"20px",padding:"5px"},children:"None :("})]})};var D=function(e){var t=e.message,n=e.uid===f.currentUser.uid?"sent":"received";return Object(a.jsx)("div",{id:"bubble",className:n,children:Object(a.jsx)("p",{id:"msgTxt",className:n+"Text",children:t})})};var B=function(e){var t=O.collection("games").doc(e.gameData.docID).collection("msgs"),n=t.orderBy("createdAt").limit(25),i=Object(k.a)(n,{idField:"id"}),c=Object(u.a)(i,1)[0];return Object(a.jsxs)("div",{id:"boardChatField",children:[Object(a.jsx)("div",{id:"chatMessages",children:c&&c.map((function(e){return Object(a.jsx)(D,{uid:e.uid,message:e.text},e.id)}))}),Object(a.jsx)("div",{id:"boardMsgWrapper",children:Object(a.jsx)("div",{id:"boardMsgInput",children:Object(a.jsx)("textarea",{id:"boardChatArea",onKeyPress:function(n){var a=n.target.value;"Enter"===n.key&&(n.preventDefault(),""!==a&&t.add({text:a,createdAt:y.serverTimestamp(),uid:e.uid}),n.target.value="")},className:"browser-default",type:"text",autoComplete:"off"})})})]})};var I=n(30),N=[],R=[],P=[];function V(e,t,n){U(e),function(){for(var e=0;e<19;e++)N[e]=26+35*e;for(var t=0;t<19;t++)R[t]=26+35*t;P=Array.from({length:20},(function(){return Array.from({length:20},(function(){return 0}))}))}(),t.forEach((function(t){S(t.x,t.y,t.color,e,!1),t.color===n?P[(t.y-26)/35][(t.x-26)/35]=1:P[(t.y-26)/35][(t.x-26)/35]=-1}))}function E(e){e.getContext("2d").clearRect(0,0,e.width,e.height),P=Array.from({length:20},(function(){return Array.from({length:20},(function(){return 0}))})),U(e)}function S(e,t,n,a,i){var c=a.getContext("2d");c.fillStyle=n,c.beginPath(),c.arc(e+7.5,t+7.5,12,0,2*Math.PI),c.closePath(),c.fill(),i&&(P[(t-26)/35][(e-26)/35]=-1)}function U(e){var t=e.getContext("2d"),n=34;t.beginPath();for(var a=0;a<=630;a+=35)t.moveTo(.5+a+n,n),t.lineTo(.5+a+n,664);for(var i=0;i<=630;i+=35)t.moveTo(n,.5+i+n),t.lineTo(664,.5+i+n);t.strokeStyle="black",t.stroke()}function T(e,t,n,a,i){if(n){var c=t.getBoundingClientRect(),s=e.clientX-c.left,o=e.clientY-c.top,r=function(e,t){if(e>656)e=656;else if(e<26)e=26;else for(var n=0;n<20;n++)if(N[n]<=e&&N[n+1]>=e){var a=N[n],i=N[n+1];e=i-e>e-a?a:i;break}if(t>656)t=656;else if(t<26)t=26;else for(n=0;n<20;n++)if(R[n]<=t&&R[n+1]>=t){var c=N[n],s=N[n+1];t=s-t>t-c?c:s;break}return{x:e,y:t}}(s-=7.5,o-=7.5),l=r.x,d=r.y;return 1===P[(d-26)/35][(l-26)/35]||-1===P[(d-26)/35][(l-26)/35]?{x:l,y:d,win:!1,alreadyPlaced:!0}:(i&&t.getContext("2d").putImageData(i,0,0),S(l,d,a,t,!1),P[(d-26)/35][(l-26)/35]=1,{x:l,y:d,win:J(),alreadyPlaced:!1})}}function J(){for(var e=0,t=0;t<20;t++)for(var n=0;n<=20;n++)if(1===P[t][n]&&1===P[t][n+1]){if(4===++e)return"win"}else e=0;var a=0;for(t=0;t<20;t++)for(n=0;n<20;n++)if(1===P[n][t]&&1===P[n+1][t]){if(4===++a)return"win"}else a=0;var i,c=0,s=0;for(t=0;t<20;t++){for(n=0;n<20-t;n++)if(1===P[n][n+t]&&1===P[n+1][n+1+t]){if(4===++c)return"win"}else c=0;for(n=0;n<20-t;n++)if(1===P[n+t][n]&&1===P[n+1+t][n+1]){if(4===++s)return"win"}else s=0}for(n=0;n<19;n++){for(t=19,i=0;t>=0;i++,t--)if(1===P[i][t-n]&&1===P[i+1][t-1-n]){if(4===++c)return"win"}else c=0;for(t=19,i=1;i+n<19;i++,t--)if(1===P[i+n][t]&&1===P[i+n+1][t-1]){if(4===++s)return"win"}else s=0}return!1}function M(e,t){e?O.collection("users").doc(t).update({win:y.increment(1)}):O.collection("users").doc(t).update({loss:y.increment(1)})}var Q=n(15),z=Object(Q.b)({key:"coordinates",default:[]}),Z=Object(Q.b)({key:"turn",default:!1}),L=Object(Q.b)({key:"win",default:-1});Object(Q.b)({key:"canvas",default:""});function Y(e){var t=Object(i.useRef)(),n=Object(Q.c)(z),c=Object(u.a)(n,2),s=c[0],o=c[1],r=Object(Q.c)(Z),l=Object(u.a)(r,2),d=l[0],p=l[1],j=Object(Q.c)(L),h=Object(u.a)(j,2),m=h[0],A=h[1],g=Object(i.useState)(),O=Object(u.a)(g,2),f=O[0],x=O[1],v=Object(i.useState)(!1),y=Object(u.a)(v,2),k=y[0],C=y[1],w=Object(i.useState)(!0),D=Object(u.a)(w,2),N=D[0],R=D[1],P=Object(i.useState)(null),U=Object(u.a)(P,2),J=U[0],Y=U[1],q=function(e,t){return-1===e?t:e?"black":"red"}(m,e.gameData.color);return Object(i.useEffect)((function(){V(t.current,s,q)}),[]),Object(i.useEffect)((function(){var n=t.current.getContext("2d");return e.socket.on("opponentPlaced",(function(e){J&&n.putImageData(J,0,0),S(e.x,e.y,e.color,t.current,!0),p(!0),o([].concat(Object(I.a)(s),[{x:e.x,y:e.y,color:q}])),Y(n.getImageData(0,0,t.current.width,t.current.height)),n.strokeStyle="purple",n.strokeRect(e.x-7,e.y-7,30,30)})),e.socket.on("lostGame",(function(){M(!1,e.uid),A(!1),p(!1),x(e.gameData.opponentName+" wins!")})),e.socket.on("rematchRequested",(function(){x(e.gameData.opponentName+" wants to rematch!"),C(!0)})),e.socket.on("startRematch",(function(){o([]),Y(),x(),E(t.current),p(!m),C(!1),R(!0)})),e.socket.on("opponentDc",(function(){f&&M(!0,e.uid),x(e.gameData.opponentName+" left"),R(!1)})),e.socket.on("resign",(function(){M(!0,e.uid),A(!0),p(!1),x(e.gameData.opponentName+" resigned")})),function(){e.socket.off("opponentPlaced"),e.socket.off("lostGame"),e.socket.off("rematchRequested"),e.socket.off("startRematch"),e.socket.off("opponentDc"),e.socket.on("resign")}}),[J]),Object(a.jsxs)("div",{id:"gameWrapper",children:[Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[f&&Object(a.jsxs)("div",{id:"gameResultWrapper",children:[Object(a.jsx)("p",{id:"gameResult",children:f}),N&&Object(a.jsx)("button",{id:"rematchBtn",onClick:function(){k?(o([]),Y(),E(t.current),p(!m),x(),C(!1),R(!0),e.socket.emit("acceptRematch",e.gameData.otherUid)):(e.socket.emit("requestRematch",e.gameData.otherUid),x("Rematch Requested"),R(!1))},children:"rematch"}),Object(a.jsx)("button",{id:"leaveBtn",onClick:function(){o([]),e.leaveMatch()},children:"leave"})]}),Object(a.jsx)("canvas",{ref:t,onClick:function(n){var a=t.current.getContext("2d");if(d){var i=T(n,t.current,!0,q,J),c=i.x,r=i.y,l=i.win;i.alreadyPlaced||(Y(a.getImageData(0,0,t.current.width,t.current.height)),a.strokeStyle="purple",a.strokeRect(c-7,r-7,30,30),e.socket.emit("placePiece",{x:c,y:r,color:q,otherUid:e.gameData.otherUid}),p(!d),o([].concat(Object(I.a)(s),[{x:c,y:r,color:q}])),l&&(M(!0,e.uid),A(!0),p(!1),e.socket.emit("wonGame",e.gameData.otherUid),x(e.name+" wins!")))}},id:"omokcanvas",width:"700",height:"700"}),Object(a.jsx)("button",{id:"resignBtn",onClick:function(){M(!1,e.uid),A(!1),p(!1),e.socket.emit("resign",e.gameData.otherUid),x(e.gameData.opponentName+" wins!")},children:"RESIGN"})]}),Object(a.jsx)(B,Object(b.a)({},e))]})}var q="data:image/png;base64,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";var K=function(e){var t,n=Object(i.useState)(),c=Object(u.a)(n,2),s=c[0],o=c[1],r={width:"100%"},l=Object(Q.d)(Z);e.gameData?(t=Object(a.jsx)(Y,Object(b.a)({},e)),"first"===e.gameData.turn?l(!0):l(!1),r={width:"calc(100% - 400px)"}):t=Object(a.jsxs)("div",{id:"challengeBoxWrapper",children:[Object(a.jsx)(w,Object(b.a)(Object(b.a)({},e),{},{accept:function(t){e.socket.emit("acceptGame",{otherUid:t,name:e.name,photo:e.photo})},decline:function(t){O.collection("users").doc(e.uid).collection("challenges").doc(t).delete()}})),s&&Object(a.jsxs)("div",{id:"playerDataBox",children:[Object(a.jsxs)("p",{style:{paddingTop:"5px"},children:["win: ",s.win]}),Object(a.jsxs)("p",{children:["lose: ",s.loss]})]}),Object(a.jsx)("div",{id:"challengeHelper",children:"Challenge players on the right!"})]});var d=e.gameData&&e.gameData.opponentPhoto?e.gameData.opponentPhoto:q;return Object(i.useEffect)((function(){O.collection("users").doc(e.uid).get().then((function(e){var t={win:e.data().win,loss:e.data().loss};o(t)}))}),[]),Object(a.jsxs)("div",{id:"playWrapper",children:[Object(a.jsxs)("div",{id:"playHeaderWrapper",children:[Object(a.jsx)("div",{id:"playHeader",style:r,children:"Play"}),e.gameData&&Object(a.jsxs)("div",{style:{paddingTop:"4px"},children:[Object(a.jsx)("img",{id:"opponentPhoto",src:d,alt:"opponentPhoto"}),Object(a.jsx)("div",{id:"playOpponentHeader",children:e.gameData.opponentName})]})]}),Object(a.jsx)("div",{id:"playContent",children:t})]})},W=n(25);var G=function(e){var t=Object(W.useMediaQuery)({query:"(min-device-width: 700px)"}),n=Object(i.useState)(!1),c=Object(u.a)(n,2),s=c[0],o=c[1],r=e.photo?e.photo:q,l="online"===e.status?"onlineDot":null,d=e.uid===f.currentUser.uid?"myUserWrapper":"userInfoWrapper";function p(){t&&o(!s)}return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:d,onMouseEnter:p,onMouseLeave:p,children:[Object(a.jsx)("img",{id:"onlinePic",src:r,alt:"profile pic"}),l&&Object(a.jsx)("div",{className:l}),Object(a.jsx)("div",{className:"onlineUsername",children:e.name}),s&&"userInfoWrapper"===d&&Object(a.jsxs)("div",{className:"userOptions",children:[Object(a.jsx)("button",{className:"userOptionsBtn",onClick:function(){return e.showChat(e)},children:"Message"}),Object(a.jsx)("button",{className:"userOptionsBtn",onClick:function(){o(!1),e.challenge(e.uid)},children:"Challenge"})]})]})})};var F=function(e){var t=O.collection("users").orderBy("status","desc").limit(10),n=Object(k.a)(t,{idField:"id"}),i=Object(u.a)(n,1)[0];function c(t){var n;e.displayMsgs();var a=[e.uid,t.uid];n=e.uid<t?e.uid+"+"+t.uid:t.uid+"+"+e.uid;var i=O.collection("chats");i.doc(n).get().then((function(e){e.exists||i.doc(n).set({users:a,lastSent:y.serverTimestamp()})}))}function s(t){O.collection("users").doc(t).collection("challenges").doc(e.uid).set({played:"no",name:e.name})}return Object(a.jsxs)("div",{id:"onlineSidebar",children:[Object(a.jsx)("div",{id:"usersTitle",children:"Users"}),i&&i.map((function(e){return Object(a.jsx)(G,{uid:e.id,photo:e.photo,name:e.name,status:e.status,showChat:c,challenge:s},e.id)}))]})};var H=function(e){var t=e.photo?e.photo:q,n=e.lastSent?function(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=e.getDate(),a=t[e.getMonth()];e.getFullYear();return a+" "+(n<=9?"0"+n:n)}(e.lastSent.toDate()):"";return Object(a.jsxs)("div",{className:"msg",onClick:function(){return e.displayChatBox(e)},children:[Object(a.jsx)("img",{className:"msgProfile-pic",src:t,alt:"profile pic"}),Object(a.jsxs)("div",{className:"msgUserInfo",children:[Object(a.jsx)("div",{style:{fontWeight:"600"},children:e.name}),Object(a.jsx)("div",{style:{color:"grey"},children:n})]})]})};var X=function(e){var t=e.text,n=e.uid===f.currentUser.uid?"sent":"received";return Object(a.jsx)("div",{id:"bubble",className:n,children:Object(a.jsx)("p",{id:"msgTxt",className:n+"Text",children:t})})};var _=function(e){var t=e.photo?e.photo:q,n=O.collection("chats").doc(e.id).collection("messages"),c=n.orderBy("createdAt").limit(25),s=Object(k.a)(c,{idField:"id"}),o=Object(u.a)(s,1)[0],r=Object(W.useMediaQuery)({query:"(max-device-width: 700px)"});function p(){return(p=Object(d.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.add({text:a,createdAt:y.serverTimestamp(),uid:e.uid});case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(i.useEffect)((function(){var e=document.getElementById("msgArea");e&&(e.scrollTop=e.scrollHeight)})),Object(a.jsxs)("div",{id:"chatbox",children:[Object(a.jsxs)("div",{id:"msgTextHeader",style:{paddingTop:"5px"},children:[r&&Object(a.jsx)("img",{onClick:e.backClick,id:"backMsgBtn",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAABjklEQVRoge3asU4UQRyA8R+YsyCUJMTCQhJKCx7A5CiwtqPyAaSCijcQWh4AKuytbLCw0eJ8AC3oTCDSGCkIEGQtzomce5vMcZD/jdkv2WaTTb5NduebmV1aWh6Nc/GDu7K4JV300MGHYJeReYofqP4cO5gONRqBJzjyV77CLzyLlMplDl8NyldYj5TKZQaf1OVfR0rl0sE7dfl9TAV6ZTGFPXX5AzwM9MpmW12+h9lIqVzW1OUPMR8plcuq/vB4U/47FiOlcuni3KD8TyxFSuXyb2UrXGAlUiqXYZW9xstIqVyaKrsRKZVLU2W3IqVyaarsGwVX9r2CK/tZW9n7Z1hlj7EQKZXLsnplTwVU9rZr0Krh/MSPODcp+hFKvFLwS5zYUvAwSv+531VwyOjv8L1V6FQiMYOP6jexHSk1KnP4otDpdOIxvil0QZMYtqS8xPNIqVEZtqgPmW6MwwtcGbyJE4VsqyTaWk8Cba0nhaZaF7H1kvgval30R75E0Z9ZE12cYTNaZBzG+tWgJZrfnsjRrgELpIEAAAAASUVORK5CYII=",alt:"backMsgBtn"}),Object(a.jsx)("img",{className:"chatBox-Pic",src:t,alt:"profile pic"}),e.name]}),Object(a.jsx)("div",{id:"msgArea",children:o&&o.map((function(e){return Object(a.jsx)(X,{text:e.text,uid:e.uid},e.id)}))}),Object(a.jsx)("div",{className:"msgInputWrapper",children:Object(a.jsx)("div",{className:"msgInput",children:Object(a.jsx)("textarea",{id:"chatInputArea",onKeyDown:function(e){if("Enter"===e.key){e.preventDefault();var t=e.target.value;""!==t&&function(e){p.apply(this,arguments)}(t),e.target.value=""}},className:"browser-default",type:"text",autoComplete:"off"})})})]})};var $=function(e){var t=Object(i.useState)(!1),n=Object(u.a)(t,2),c=n[0],s=n[1],r=Object(W.useMediaQuery)({query:"(min-device-width: 700px)"}),l=Object(W.useMediaQuery)({query:"(max-device-width: 700px)"});function d(e){var t=Object(a.jsx)(_,Object(b.a)(Object(b.a)({},e),{},{backClick:p}));l?s(t):o.a.render(t,document.getElementById("chatbox"))}function p(){s()}return Object(a.jsxs)(a.Fragment,{children:[!c&&Object(a.jsxs)("div",{id:"messages",children:[Object(a.jsx)("div",{id:"msgTextHeader",children:"Messages"}),e.messages&&e.messages.map((function(t){return Object(a.jsx)(H,Object(b.a)(Object(b.a)({uid:e.uid},t),{},{displayChatBox:d}),t.id)}))]}),r&&Object(a.jsx)("div",{id:"chatbox"}),c]})},ee=(n(53),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAADqklEQVRoge3ZTYhWVRzH8c84M6A0OSlEZZaLjMFeyByL3qhFiBvNIqXcRIswjKJdLSsscFtMr1RQCW3SghZlVtAmekGKQo0WlWlBlC9l6hTOPC3OOd1bTDP33rnPfZ7g+cLlzJznf/7n97/nnHvP+V969OjRo0cH6CthO4KbsQrn4jwM4DD24AO8hq8K+luG9bgeF2MhTuEADmIX3sDXJTROy0q8h1aBaxJvY/k0/i6PNpMFfb6L0dkEMIixXIeH8DxuEkbnNMwVRmYtnhZGpyXc2UfQn/PXj0fjb8nfU1gTfcyNPkewDi9Em3SDnhBmQCkW4P3o5Di2YH6BdqfjYYzHti/HAPqxLdaN46FoOxPzheBPyEbnjKJBDOaC+F6YCmVZjv3RxzZZEN/hsgr+RoW1k4IpNDJjsiAWVeg0sST6SHN9P86fhb9FsmAen8l4pTAfj6s2Ev9mVJhK41hRg78VwjSbmMlfejptqaHTxAPxqovHBI27/stgRPY0KbKwi5IWe10My56OF6bKOTmDW2L5On6rseOJeNXFr8KLkvCCxj8DuTGWb9bYabtIGlelinwgS2K5pzE51dkbyymfgseEeTfUmJzqDAlaj6WK/IikBXmqSUUVmYzl3/rzgRyJ5cLG5FQnaTycKvKB/BLLcxqTU52k8VCqyAfyRSyvaExOda6M5eepIh/Ix7G8ujE51bkqlp9M9eMy4UlwRDgbdCvzhJdiS9iNTMnuaLChIVFVuF3QOOVoJO6LRruVO883RR8+EzRuns5wHn6Mhre2X1dp1gvaDiow/e+NxgeEnWa3MCwE0MI9RRoM4NPY4MX26SrNS4Kmj5Q4FlwqSyDc3R5dpdgsaDmJi8o2vis2/kNuu9wBVkcNLdxZ1UlKRPyOa+rRVYrrhPxBoYTDdPTjVVkwTY7MDcJJtSWkYmd9XB4UjpZpjm6crcMCbIx9tbA9aqiFfiGFmXJUz6qQvizYz1ZZmvaVdvTTJ6RDJ2Inbwmp1bpYgJ3R94SQVm3r7mItjsYOv1HPbvlafCvbtK6pwWchluJLWeZ9q2rzeAAP4s/oa5+wC2+UITwnWzcf4oIS7ZfGNumzwTPCZ4WOsRo/REEnhDs8Zxr7PmySZW1+Er65dAVnYodsdHZi8RR2i/FOzm57bNt1bMDPgsijuC332zohwZEW9KbG1ZXkbCF/nO76GJ7M/b8DZ3VMXQXuELY1KYCTuL+jimbBJUKedm/8+3/NsO46afZohL8AQdD5tJ4fnIQAAAAASUVORK5CYII="),te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAADwklEQVRoge2YTWgcZRjHf8/MFpNqEAWb2TbGFgUFPy5FWuwm1GObDI0okRSl9CCoBys9+NWCVjx46KWCxK9DQTRWqM3HbgulaMhuIvXgofhBUUrAuE48VKSNpOnOPB6SyU6S3ezO7KaTw/4u884z7/s8/+d95+OdBxo0aNAgTqSaTnk71W54sk9Fu4CtQBtgAlcRLqHyHQnz6+Tg6GQ1/hy7c5t6Xi/CkwiPodwFuMAUMAma9kxzaMvQ2B81JTC1Z3ebaRaOAQcWBK+Gq3BKTeONcoHzdqodj/dF6K3Kn3LSFffte9Pf/xk6gbzd0SOqnwN3VAi0nGuCvmClx08FjY6d6lPlk0j+VJ+zMuPDpS4apYxOd+qQqJ6OEAygRZGBfNeuV31Dvjt1WJUvIvsTOePYqVdKXVyxAgszf5oyyYVABe1DDVHRL0vFCoknqk8tX4klThfu+V+JNlOluLZwbKmXv4ShD90zPJ73DUtm2TQL71I/8TAvvF7iAVpuehwLGhZXIG+n2kW5QuW3Q9y4rpvY2nZudAoCK2BAD+tfPIBpmoV9/sliAgp74tETBdnrt4rPgMoDsWiJhN7vtwIPsVpxSInIFr8RfAt5MQiJhuD6zcAtxFQsYqIQ0FpMwODnWMREQfjFbxbfQqpD8agJT1DrYgJNs81p4HosisLx302Vs/7JYgJ3X7jwL2h/PJpCIPTfl8n9458u2QvJBj1OcQO2Hpkx3cTxoGFJAtaZib8Vfe3WaqoeUXlz09lRJ2hbsedPpsc/Bv321smqDlHGWx/PfrjcviIBATWMwn5YV9+FaTdh9Mk7Kz+2Jf+6WocvToM8DcyuubTKzKnwTLlCQdnfxmQ6+4NAL1BYM2mV8UTlwOaRXK5ch1X/e610bkRVDhLPPklVecnKZL9arVOVha2OHlEdAJrqIq0yroi8aI1kP6vUsepKwV/dqd0Igyh31qatIjOoPJvMZDPVdA5V6nC6nnhExTjHfGlxLbhqqGG3ZsYmqh0QqvZjZSZ+IpHoAC6FllaZyybGzjDiIULxKjk4Ojl7PbFD4YOwY8sifHPbbNOOTemx38IPrYG8nXpelH7g9ogubgi8bqVzJ6JqqLXch7O381E1vAHg4ZBDL6vI/s0j2R9riV9zAgC6ffsGJ9l8BDhK5dqSivApNzYets6fn6k1dl0S8HHsXTtV5STwYJlwv6vowdW+rGGpawIwvxrTyeaXFd6jWGedU/jImNv4Vj1mPUjdE/Bx7M5tqt4JQAzlUGsmd2WtYjVo0KBBfPwPL8Y2i7i/8wcAAAAASUVORK5CYII=";var ne=function(e){var t=e.photo?e.photo:q;return Object(a.jsxs)("div",{className:"commentWrapper",children:[Object(a.jsx)("img",{className:"postCommentPhoto",src:t,alt:"postCommentPhoto"}),Object(a.jsxs)("div",{className:"commentTextWrapper",children:[Object(a.jsx)("p",{className:"commentName",children:e.name}),Object(a.jsx)("p",{children:e.text})]})]})},ae=n(34),ie=n.n(ae),ce={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",border:"none",background:"none",display:"flex",alignItems:"center",justifyContent:"center",margin:"0",padding:"0"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)"}};var se=function(e){var t,n=Object(i.useState)(),c=Object(u.a)(n,2),s=c[0],o=c[1],r=Object(i.useState)(),p=Object(u.a)(r,2),j=p[0],h=p[1],m=Object(i.useState)(),A=Object(u.a)(m,2),g=A[0],v=A[1],C=Object(i.useState)(ee),w=Object(u.a)(C,2),D=w[0],B=w[1],I=Object(i.useState)(!1),N=Object(u.a)(I,2),R=N[0],P=N[1],V=O.collection("posts").doc(e.docId),E=Object(k.a)(V.collection("likes"),{idField:"id"}),S=Object(u.a)(E,1)[0],U=Object(k.a)(V.collection("comments").orderBy("createdAt","asc").limit(10)),T=Object(u.a)(U,1)[0],J=Object(i.useState)(),M=Object(u.a)(J,2),Q=M[0],z=M[1],Z=e.photo?{backgroundImage:"url(".concat(e.photo,")")}:"",L=e.profilePhoto?e.profilePhoto:q;function Y(){return K.apply(this,arguments)}function K(){return(K=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.collection("posts").doc(e.docId).delete();case 2:if(!e.photo){t.next=5;break}return t.next=5,x.ref().child(e.docId).delete();case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.uid===f.currentUser.uid&&(t=Object(a.jsx)("div",{className:"postOptionsBtn noselect",onClick:function(){o(void 0===s?Object(a.jsx)("div",{className:"postOptions",children:Object(a.jsx)("button",{className:"deletePostBtn",onClick:Y,children:"Delete"})}):void 0)},children:"\u2807"})),Object(i.useEffect)((function(){S&&S.length>0&&h(S.length),D!==te&&O.collection("posts").doc(e.docId).collection("likes").doc(f.currentUser.uid).get().then((function(e){e.exists&&B(te)}))}),[S,D,e.docId]),Object(i.useEffect)((function(){if(T&&T.length>0){v(T.length);var e=0;T.forEach((function(t,n,a){O.collection("users").doc(t.uid).get().then((function(t){e++,a[n].name=t.data().name,a[n].photo=t.data().photo,e===a.length&&z(T)}))}))}}),[T]);var W=Object(i.useState)(!1),G=Object(u.a)(W,2),F=G[0],H=G[1];function X(){document.getElementById("homeHeader").style.position="sticky",H(!1)}return Object(a.jsxs)("div",{style:{position:"relative",width:"100%"},children:[Object(a.jsxs)("div",{className:"post",onClick:function(){o()},children:[Object(a.jsx)("div",{className:"postUserInfoWrapper",children:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(a.jsx)("img",{className:"postProfile-pic",src:L,alt:"profile pic"}),Object(a.jsxs)("div",{className:"postTextWrapper",children:[Object(a.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[Object(a.jsx)("b",{className:"postName",children:e.name}),Object(a.jsx)("div",{style:{color:"grey"},children:e.time})]}),Object(a.jsx)("p",{className:"postText",children:e.text})]})]})}),s,e.photo&&Object(a.jsx)("div",{className:"postPic",onClick:function(){document.getElementById("homeHeader").style.position="inherit",H(!0)},style:Z}),Object(a.jsxs)("div",{className:"postIconWrapper",children:[Object(a.jsxs)("div",{className:"likeAndCommentWrapper",onClick:function(){V.collection("likes").doc(f.currentUser.uid).get().then((function(e){e.exists?(V.collection("likes").doc(f.currentUser.uid).delete(),V.get().then((function(e){e.data().likes>1?h(e.data().likes-1):h(),V.update({likes:e.data().likes-1})})),B(ee)):(V.collection("likes").doc(f.currentUser.uid).set({liked:"yes"}),V.get().then((function(e){h(e.data().likes+1),V.update({likes:e.data().likes+1})})))}))},children:[Object(a.jsx)("img",{className:"likeBtn",src:D,alt:"heartIcon"}),Object(a.jsx)("p",{className:"numLikesAndPosts",children:j})]}),Object(a.jsxs)("div",{className:"likeAndCommentWrapper",onClick:function(){return P(!R)},children:[Object(a.jsx)("img",{className:"commentBtn",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAADzElEQVRoge3Z62tcRRjH8U/aJKZNNWmkL/pCi2nUWq0WLN7witB/QUq9vPVKFcFLFUXBl4Iogm99UVQEry3FomCpVqv1ElvpRa2oELSoaFttWkjii2dOclJ2k92zZ7cr5AuHw56Zeeb37Dkz88wzzDHHHDPRUaKtc3E11mAIg1iEvlT+N47iEH7A5/gEv5SooTBDeBp7MVHlOpquauXf4Cksb7F2cB22Yiwn6Gs8j/XirQxUaDeQym7FCxjOtR/DFlzTZO2If21LrvNDeBTnNWBzEBvxY87uOw3arEoH7sc/qaMDuAXzSuxjHtbhYOrjGO4r0b5FeD0ZPy7eQGeZHZxCFx7DaOrzVfQ2anQAnyaDB3FJowbr4FJ8l/reif6ihs7El8nQh6am0VbSj+1Jw27xddTFfDErTWAbFpSprk4W4oOkZbPQVjOPp4bDOKt0afXThz1C0yO1NroMJ8Uidn5zdBXiQjFrnlDjWH1feH53E0UVZYPQ9t5sFW9MFb/V3Cm2KF3YJzReP1PFN1Kl9S0QVZTbhcbXqlXoF2PjMLpbJKoIZ+B3MVYmJ6J8iLFWvLrNwqF25YTQ2C00Y7ojWdS5rYWiipJpnIyU846sSvfhlskpTqZxVaXCA2IQtfP4yOgRWvdnD/JvpE9Et+08PjJG0zUZ/+UdmVDu/qLZdAjNmC78TzG1LWy1ogL0CK1Hsgd5R35N93NaqaggWaJiMgOTd2R3ul/RMjnFWZ3ue7IHeUd2pfsNLZNTnGwh/LhSYa/Y8GdjpV3pESHKqNjFVmST9g8a7xAaX5mp0uUYF4tju4bx+4Uj185W+a1UcUOTRRXhAaFtay2VB8VY+RcrmiiqXi4SmkZxca2N7hGe78Xi5uiqi36xa53AQ/U07MDLpnJap3O1700aJvC2AmFUt6l80k6cXaa6GunHjqRhlwZSpwvEbixLma4pQ12NrMb3qe+PlJDp7MKLyeBJPNyowVnoxhOmktiblJDEzrMuGT5cptEcnbhNHMtlJ113NqOj5aa+1TIZEinan5P9cbyJZfUYqWf1virdv6hSvhFLxZngMH7CXyLrkbFEnEStwJUiIbgylY3jXTyj/D9rGtmR29pTnnfiOdUPO4+LBbZa+Vd4UoNHbbUeTy8Vr35ErPxj6fkFeAk34TcR1iwT2Y1BsZguFs4eEUfU2fH0Z+J4eqQRB+ol+8fvSr+X4Fnx2UyIfGw7hTMVWSkEH8ODIqjMHMjC6ar7gnZhvliMKn3b23Hz6ZM2ndlmrXvFGxnBH+IsfIcY+PuaK22O/zf/AZh9+Zk/uRRIAAAAAElFTkSuQmCC",alt:"commentIcon"}),Object(a.jsx)("p",{className:"numLikesAndPosts",children:g})]})]})]}),t,R&&Object(a.jsxs)("div",{className:"postComments",children:[Q&&Q.map((function(e){return Object(a.jsx)(ne,Object(b.a)({},e),e.id)})),g&&Object(a.jsx)("div",{className:"commentInputLine"}),Object(a.jsx)("input",{className:"postCommentInput",onKeyDown:function(e){"Enter"===e.key&&""!==e.target.value&&(e.preventDefault(),V.collection("comments").add({text:e.target.value,uid:f.currentUser.uid,createdAt:y.serverTimestamp()}).then((function(){e.target.value=""})))},placeholder:"Write a comment!",type:"text",name:"name",autoComplete:"off"})]}),Object(a.jsx)("div",{onClick:X,children:Object(a.jsx)(ie.a,{isOpen:F,onRequestClose:X,style:ce,contentLabel:"Example Modal",children:Object(a.jsx)("img",{class:"fullPostPhoto",src:e.photo})})})]})};var oe=function(e){var t=Object(i.useState)(),n=Object(u.a)(t,2),c=n[0],s=n[1];function o(e){return r.apply(this,arguments)}function r(){return(r=Object(d.a)(l.a.mark((function t(n){var a,i,c,s,o,r,d;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==(a=n.target.value)||void 0!==document.querySelector("#postImage").files[0]){t.next=3;break}return t.abrupt("return");case 3:return n.target.value="",i=O.collection("posts"),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date,o=c[s.getMonth()]+" "+s.getDate(),r={uid:e.uid,text:a,createdAt:Date.now(),time:o,likes:0,comments:0},t.next=11,i.add(r);case 11:d=t.sent,new Promise((function(e){void 0!==document.querySelector("#postImage").files[0]&&e()})).then((function(){var e=document.querySelector("#postImage").files[0];x.ref().child(d.id).put(e).then((function(){O.collection("posts").doc(d.id).update({photo:"yes"})})),p()}));case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){document.getElementById("postImage").value="",s()}return Object(a.jsxs)("div",{id:"feedWrapper",children:[Object(a.jsx)("div",{id:"homeHeader",style:{position:e.position},children:Object(a.jsx)("p",{style:{cursor:"pointer",width:"60px",fontSize:"22px"},onClick:function(){document.getElementById("content").scrollTop=0},children:"Home"})}),Object(a.jsxs)("div",{id:"feed",children:[Object(a.jsxs)("div",{id:"postInput",children:[Object(a.jsxs)("div",{id:"postInputResp",children:[Object(a.jsx)("form",{children:Object(a.jsxs)("label",{children:[Object(a.jsx)("img",{id:"uploadPic",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAABM0lEQVRYhe2W3WrCQBCFv4S+VilEBIMXpT5WEbwpVCn2rfoC2jdQ++dFepEJGddMdkO1e7MHQsJmNuebMyEEkpIiK1PXVQzv/J9Nz3TTsZZ1rF1SJ0lHT+CaAFPgHdgCZciGisu+iFv1zI3lE30EWr4EcoYBl9QpbIBJiE8fQA6s5fhraoMBGvPm/ksARF9agwC0+UGOClhhfy98aQUDZMCzMh8Bt8CeNgkXQu+pgNcOiCAAt/NC1Y2BD7n3pCCstNyReQG6Onc1Bj5px5E7ewrqtHaypsfhBbA6d1UCX1L7JucdcKdqCtokltKcFyDEvNFUQRypu3alIfT7YQJYsVuaKIiFUaPH4QUI6dzVPfAt++dGjU5i8JcwRA/AjzzjsQfiagAAMwVhJXHik/4Jk5Ki6xdOeZDYnBW7qwAAAABJRU5ErkJggg==",alt:"uploadPic"}),Object(a.jsx)("input",{id:"postImage",onChange:function(){var e=new FileReader,t=document.querySelector("#postImage").files[0];t&&"image"===t.type.split("/")[0]&&e.readAsDataURL(t),e.addEventListener("load",(function(){s(Object(a.jsxs)("div",{id:"postImageWrapper",children:[Object(a.jsx)("img",{id:"removeImageBtn",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABFUlEQVRIid2VTW7CQAyFP7UiZ+kCVrCDHqIpiDtBb0EERyoVZVsUtmFNWMyMVJk3kxDEon2SpZF/nh3P2IH/jgyYAxtgC5y8bIG1t2VdyafAHqgbZA/ktxA/Ax8tiK0sfWwjupD/TpLE+x3kQaLtyrju+RgYAaUgKoEhMDH6byIXPxckQ2/rmySl1+ELsHEzlWAjHI/AwNtfgB+hO4i4QiX4Eo622r45q9bVuDm5QhVxtl+SqjxIFRyfVKaWqBO2s1I+vEVr4aguVF28jVupBA9/pmrQJqQHbQS8Gv2OxIbNBdGt8hYjD7hn2S2ayMGt3GUH8tbrOiDHLa4m4h0t2hJDhnsRBfCJm9DKnwvcX6/Xlfxv4AK2lPndEfN11QAAAABJRU5ErkJggg==",onClick:p,alt:"removeImage"}),Object(a.jsx)("img",{id:"uploadedPic",src:e.result,alt:"uploadPic"}),Object(a.jsx)("button",{id:"postBtn",onClick:o,children:"Post"})]}))}),!1)},type:"file",style:{display:"none"}})]})}),Object(a.jsx)("textarea",{id:"postArea",placeholder:"post something!",onInput:function(){var e=document.getElementById("postArea");e.style.height="5px",e.style.height=e.scrollHeight+"px"},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),o(e))},type:"text",autoComplete:"off",maxLength:"162"})]}),c]}),e.posts?e.posts.map((function(e,t,n){return Object(a.jsx)(se,{name:e.name,profilePhoto:e.profilePic,text:e.text,time:e.time,photo:e.photo?e.photo:void 0,uid:e.uid,docId:e.id},e.id)})):Object(a.jsx)("div",{id:"loader"})]})]})},re=n(74),le=n.n(re);var de=function(e){function t(){return(t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!f.currentUser.isAnonymous){t.next=3;break}return t.next=3,O.collection("users").doc(f.currentUser.uid).delete();case 3:return t.next=5,f.signOut();case 5:e.socket.disconnect();case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return f.currentUser&&Object(a.jsx)("button",{id:"signOutBtn",onClick:function(){return t.apply(this,arguments)},children:"Log Out"})};ie.a.setAppElement("#root");var ue={content:{top:"30%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"15px"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)"}},pe=function(e){Object(m.a)(n,e);var t=Object(A.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).homeClick=a.homeClick.bind(Object(h.a)(a)),a.messagesClick=a.messagesClick.bind(Object(h.a)(a)),a.playClick=a.playClick.bind(Object(h.a)(a)),a.leaveMatch=a.leaveMatch.bind(Object(h.a)(a)),a.openModal=a.openModal.bind(Object(h.a)(a)),a.closeModal=a.closeModal.bind(Object(h.a)(a)),a.inputChange=a.inputChange.bind(Object(h.a)(a)),a.usersClick=a.usersClick.bind(Object(h.a)(a)),a.state={home:!0,users:!1,messages:!1,play:!1,gameData:!1,modalIsOpen:!1,position:"sticky"},a}return Object(j.a)(n,[{key:"homeClick",value:function(){this.setState({home:!0,play:!1}),document.getElementById("content").scrollTop=0}},{key:"playClick",value:function(){this.setState({play:!0,home:!1,messages:!1})}},{key:"messagesClick",value:function(){this.setState({messages:!0,home:!1,play:!1})}},{key:"leaveMatch",value:function(){O.collection("users").doc(this.props.uid).update({inGame:"no"}),O.collection("users").doc(this.state.gameData.otherUid).update({inGame:"no"}),this.socket.emit("leftMatch",this.state.gameData.otherUid),this.setState({gameData:void 0,play:!0})}},{key:"openModal",value:function(){this.setState({modalIsOpen:!0,position:"inherit"})}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1,position:"sticky"})}},{key:"usersClick",value:function(){this.setState({users:!0,play:!1,home:!1,messages:!1})}},{key:"inputChange",value:function(){var e=new FileReader,t=document.querySelector("#image-file").files[0];e.addEventListener("load",(function(){document.getElementById("change-pic").src=e.result}),!1),t&&e.readAsDataURL(t)}},{key:"componentDidMount",value:function(){var e=this,t=!0;return this.socket=le()("https://mongomok.xyz/",{query:"uid=".concat(this.props.uid)}),this.socket.on("startGame",(function(n){t&&(e.socket.emit("setOpponnentUid",n.otherUid),e.setState({gameData:n}),e.playClick())})),function(){t=!1,e.socket.off("startGame")}}},{key:"render",value:function(){var e,t=this.state.home,n=this.state.messages,i=this.state.play,c=this.state.users;return t?e=Object(a.jsx)(oe,{posts:this.props.posts,time:this.props.time,position:this.state.position,uid:this.props.uid}):n?e=Object(a.jsx)($,{messages:this.props.messages,uid:this.props.uid}):i?e=Object(a.jsx)(K,{name:this.props.name,uid:this.props.uid,photo:this.props.photo,socket:this.socket,gameData:this.state.gameData,leaveMatch:this.leaveMatch}):c&&(e=Object(a.jsx)(F,{name:this.props.name,uid:this.props.uid,photo:this.props.photo,displayMsgs:this.messagesClick})),Object(a.jsxs)("div",{children:[Object(a.jsxs)(ie.a,{isOpen:this.state.modalIsOpen,onRequestClose:this.closeModal,id:"profile-modal",style:ue,children:[Object(a.jsx)("form",{children:Object(a.jsxs)("label",{children:[Object(a.jsx)("img",{id:"change-pic",src:this.props.photo,alt:"profile pic"}),Object(a.jsx)("i",{id:"upload-icon",className:"material-icons",children:"cloud_upload"}),Object(a.jsx)("input",{id:"image-file",onChange:this.inputChange,type:"file",style:{display:"none"}})]})}),Object(a.jsxs)("div",{id:"change-name",children:[Object(a.jsx)("p",{id:"changeNameHeader",children:"Name"}),Object(a.jsx)("input",{className:"input-field",defaultValue:this.props.name,id:"changeNameInput",maxLength:"15",type:"text",autoComplete:"off"})]}),Object(a.jsx)("button",{id:"profile-submit",onClick:this.props.updateProfile,children:"Apply"})]}),Object(a.jsxs)("div",{id:"content",children:[Object(a.jsxs)("div",{id:"sidebar",children:[Object(a.jsx)("img",{id:"profile-pic",onClick:this.openModal,src:this.props.photo,alt:"profile pic"}),Object(a.jsx)("i",{id:"profile-icon",className:"material-icons",children:"person"}),Object(a.jsx)("button",{onClick:this.homeClick,className:"sidebar-btn",children:"Home"}),Object(a.jsx)("button",{onClick:this.playClick,className:"sidebar-btn",children:"Play"}),Object(a.jsx)("button",{onClick:this.messagesClick,className:"sidebar-btn",children:"Messages"}),Object(a.jsx)("button",{onClick:this.openModal,className:"sidebar-btn",children:"Profile"}),Object(a.jsx)(de,{socket:this.socket})]}),e,!this.state.play&&Object(a.jsx)(F,{name:this.props.name,uid:this.props.uid,photo:this.props.photo,displayMsgs:this.messagesClick}),this.state.play&&!this.state.gameData&&Object(a.jsx)(F,{name:this.props.name,uid:this.props.uid,photo:this.props.photo,displayMsgs:this.messagesClick})]}),Object(a.jsxs)("div",{id:"bottomSidebar",children:[Object(a.jsx)("img",{onClick:this.homeClick,className:"bottomSidebarBtn",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAABQElEQVRYhe3WvS8EcRDG8Q8nIkFBFCIKjZJOdR2VTkWpuURJ6f4EpVZUOiqlkOhEodGoJHQ0EgmREHGrmWNPjnPvzX6TaXZmnnn2t7PZJaM5RiO6wjgucYXJTg+fwjWSiFtM/6gp51rODO5C/DwiwT1m221gDg8hfIphDOIorj0i3y4D83gK0UMMpHL92I/cCxZbbWAZbyG4i1yVmlzkklRtSwys4j3EttHzR20PtlLDmzawiVJEsY6+YvQkdfZ9kb6TEtYb0FjDh/+dXAU57Ph+lisNDC+zhNfQ2kNfrYZ+HKjc5mZZwLPqb08FQzj2vTz53wobIJ/SPYlZFYzgTAu3twpp7QuMpZOFSNz8w0BSI2r1lWcUfhZsYKIDBiZiVs3CevMN9fX+5aQTZAYyA5mBap/ItvzJ/jaz6yeQkfEJsCB4+A445oAAAAAASUVORK5CYII=",alt:"homeIcon"}),Object(a.jsx)("img",{onClick:this.playClick,className:"bottomSidebarBtn",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAB+UlEQVRoge3ZP8hNcRzH8ZfnkeihFEViwUYYbAapZ7DZlIVFWJQsTzYTshmtBguLQcmT2AwySBnkLuTPoBSip8cTw/HrHud3/517z73n/nTe9VvuuX1/n8/p+/2e3x8aGhr6MYNTeIQWnuAc1tQpalBmcQe/O4wWjmNVbeoG4KLO4vPjKQ7VJbAfr7SFXsFOXMBnsZG72F2PzO4sawucy/2+Edfx078mlnADmyYrszt5cZ3YgZtYKfz3Gy5j7QQ09qSfgcBBPBan1VuckXWyWhjUQGAeL8VGnuHwOAT2o6wBWC1765/ERhaxt2KNPRnGQGC9rA5+FOIsy+pmS0UaezKKgcB2meBfhXih0NeNqLEnVRgI7MF9cVq9k6XcbAVzRFRpIDCPF2Ijz3GkwnkwHgNkbfUkPoqNLGJfVRONy0BgDgv4WphrBbewddQJxm0gsE3nQv+Oa9gwbOBJGQjsx0NxWrVwYJiAkzYQOCr+on/A5rKB6jJA1lZP40tOw6WyQeo0EDiW03Cv+LC2VeKkmLYUWigbZJqK+L0EirhbG33z91lpmg9ZH5JdSiS9mEt2OZ3shibZLWWym/qkj1WSPdhK9mhx6g93l7RFJXm8ns/nq9glsQuO82KhxTHVV0wzuK2z8CQu+cgEnsADvJZ1m7MSuWZtaPjf+QNI1Ut1JfKs2wAAAABJRU5ErkJggg==",alt:"playIcon"}),Object(a.jsx)("img",{onClick:this.messagesClick,className:"bottomSidebarBtn",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAACRUlEQVRoge2YXUtUQRiAH7+2wKAQCSIi8TKQCBVxFYTwL/gT7C+E/6BLkW66T5QuKtdLr4IuBCHoIogokDYRocAi0crd7WLew86OczwzZ885u+g8MDDsmfed5x3mzJ5zIBAIBAKBeGaBdWAPOAUaBbVT4BuwBsykEe8HnhYonNRWxMmZbpLXi3Bi1gh8DYwDJZ8VaJMSMAFUNI86UHYJXteCKjkJ+vCSps+qS8CeFjCen5czEzR9qi4B+mlT5LaJo0Tr6dRCryWgT+vfzUnKB92hL3aUhn4D/wWeAbey90pkGHgCnBhOidiOsN+S7HoepgaDwGPgZ4xLIuedxd8l+ZWsrYEB4BGwn+CQiD54HnhnSbIrk9nuIV96gAXgk2WeD3ItdQGI5ALwxTLBDvCwDfky8NaS9ytqgaKbtq0CIkqS9MAy4RbwwEP8HvDCkucHaotedXTyKiDimkzyyxhbF6nRc3LfQZ1q5pPtEeqQuJHSKdXg2yLzz4j5I7/f1MYOieCxMbaGKnokIyf/wajtsGHENYBDYEnaoeX6hsRm7uRbQMQU8MYiarZtYM4zdyEFRMwD7zkr/hF1mvWkyFloAaDenhaBz9IW8XyjcnWyrUYj4XoniHXK4p+0o4QCOs2FLKCm9bvllTKiZl60FXCg9ccy1/HnvtbfdwlYo3nmbuZh5Mkrmj7PXQJmaP3jqACTFP9haxK1gPrT7rRrghXOPgp0ui37rEB/FxVRF3mnTyomZdTnvCrFf16vytzO2yYQCAQCl4//kmO6LAngQEgAAAAASUVORK5CYII=",alt:"envelopeIcon"}),Object(a.jsx)("img",{onClick:this.usersClick,className:"bottomSidebarBtn",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAABdUlEQVRYhe2VTU7DMBCFP1JIFpDSNd2xbA8BEhLbEgRnqAgUjoG4A1wHyqL8Iwq9BWGBhAosPFYsREKc1BuUJ40SyW/evNieCdSoYY8AGABD4E1iCBwAvuvibeAG+MqIa+E4QWAUfwJ6QCixBYxl7QpHO3FoFG/9st4yTOy7MHAp4r0czrZwLlwYSEQ8zOE0hfNaVNSraOon5mwTbAw8ynMjh6PXHmyNFMEAtb1jsi/hs3BiFwYCVJ9rExHqzJuoy6eLj3A4kNqoPs8aRCNgxVVxDR/V5+eozkjkPabElzcs+QuoqbcJrALLqJv/AcwLZwJ82hopgkjEs7Zfx0RMzgwecGIUuEWN5Q6wKNEFjoA7g3fMjOaMLv4O9P8Q9YA94WoTlRAZxdcs8tYNE3n/jlz4pGfeL5EfS+4L6vJaY5f0zMucZQO4F42dLFKecCTPU8q11RQ4k/dSXaFHa6dMsqBLOrqtof//SxUMhKKRVNCoUeOf4xvYvW2oRfLVqAAAAABJRU5ErkJggg==",alt:"userIcon"})]})]})}}]),n}(i.Component),je=n.p+"static/media/pikachu.7e8bbe70.jpg",he=n(75);function me(){var e=Object(i.useState)(Object(a.jsx)(Ae,{setContent:function(e){c(e)}})),t=Object(u.a)(e,2),n=t[0],c=t[1];return Object(a.jsx)("div",{id:"loginPage",style:{backgroundImage:"url(".concat(je,")")},children:n})}function Ae(e){var t=Object(i.useState)(),n=Object(u.a)(t,2),c=n[0],s=n[1],o=Object(i.useState)(),r=Object(u.a)(o,2),l=r[0],d=r[1];function p(){f.signInWithEmailAndPassword(c,l).then((function(e){console.log("signedIn")})).catch((function(e){alert("Invalid Login")}))}function j(e){"Enter"===e.key&&(e.preventDefault(),p())}return Object(a.jsx)("div",{id:"loginSection",children:Object(a.jsxs)("div",{id:"loginWrapper",children:[Object(a.jsx)("p",{id:"loginHeader",children:"LOGIN"}),Object(a.jsx)("input",{className:"loginInput",onInput:function(e){return s(e.target.value)},onKeyPress:j,type:"email",style:{marginBottom:"10px"},placeholder:"Email"}),Object(a.jsx)("input",{className:"loginInput",onInput:function(e){return d(e.target.value)},onKeyPress:j,type:"password",name:"password",placeholder:"Password"}),Object(a.jsx)("button",{className:"loginBtn",onClick:p,style:{top:"7%"},children:"LOGIN"}),Object(a.jsx)("button",{className:"loginBtn",style:{top:"9.5%"},onClick:function(){return e.setContent(Object(a.jsx)(ge,{setContent:e.setContent}))},children:"ENTER AS GUEST"}),Object(a.jsx)("button",{id:"googleBtn",className:"loginBtn",onClick:function(){var e=v;f.signInWithPopup(e).then((function(e){})).catch((function(e){console.log(e.message)}))},children:"LOGIN WITH GOOGLE"}),Object(a.jsx)("p",{onClick:function(){return e.setContent(Object(a.jsx)(be,{setContent:e.setContent}))},style:{position:"relative",top:"21%",cursor:"pointer"},children:"Or Sign Up Here"})]})})}function be(e){var t=Object(i.useState)(),n=Object(u.a)(t,2),c=n[0],s=n[1],o=Object(i.useState)(),r=Object(u.a)(o,2),p=r[0],j=r[1],h=Object(i.useState)(),m=Object(u.a)(h,2),A=m[0],b=m[1];function g(){return x.apply(this,arguments)}function x(){return(x=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(he.validate(c)){e.next=3;break}return alert("Invalid Email"),e.abrupt("return");case 3:return e.next=5,O.collection("users").where("name","==",A).get();case 5:if(!(e.sent.docs.length>0)){e.next=9;break}return alert("Username taken!"),e.abrupt("return");case 9:p&&p.length>3?f.createUserWithEmailAndPassword(c,p).then((function(){O.collection("users").doc(f.currentUser.uid).set({name:A,win:0,loss:0,status:"online"})})).catch((function(e){var t=e.code,n=e.message;console.log(t,n)})):alert("Password has to be at least 4 characters!");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){"Enter"===e.key&&g()}return Object(a.jsx)("div",{id:"loginSection",style:{height:"528px"},children:Object(a.jsxs)("div",{id:"loginWrapper",children:[Object(a.jsx)("p",{id:"loginHeader",children:"REGISTER"}),Object(a.jsx)("input",{className:"loginInput",onInput:function(e){return s(e.target.value)},onKeyPress:v,type:"email",style:{marginBottom:"10px"},placeholder:"Email"}),Object(a.jsx)("input",{className:"loginInput",onInput:function(e){return b(e.target.value)},onKeyPress:v,type:"name",style:{marginBottom:"10px"},placeholder:"Username"}),Object(a.jsx)("input",{className:"loginInput",onInput:function(e){return j(e.target.value)},onKeyPress:v,type:"password",placeholder:"Password"}),Object(a.jsx)("button",{className:"loginBtn",onClick:g,style:{top:"7%"},children:"Register"}),Object(a.jsx)("p",{onClick:function(){return e.setContent(Object(a.jsx)(me,{}))},style:{position:"relative",top:"14%",cursor:"pointer"},children:"Log In"})]})})}function ge(e){var t=Object(i.useState)(),n=Object(u.a)(t,2),c=n[0],s=n[1];return Object(a.jsx)("div",{id:"loginSection",style:{height:"360px"},children:Object(a.jsxs)("div",{id:"loginWrapper",children:[Object(a.jsx)("p",{id:"loginHeader",style:{paddingBottom:"33px"},children:"Enter Username"}),Object(a.jsx)("input",{className:"loginInput",onInput:function(e){return s(e.target.value)},type:"name",style:{marginBottom:"10px"},placeholder:"Username"}),Object(a.jsx)("button",{className:"loginBtn",onClick:function(){f.signInAnonymously().then((function(){console.log(c),O.collection("users").doc(f.currentUser.uid).set({name:c,win:0,loss:0,status:"online",anonymous:"true"})})).catch((function(e){var t=e.code,n=e.message;console.log(t,n)}))},style:{top:"7%"},children:"Enter"}),Object(a.jsx)("p",{onClick:function(){return e.setContent(Object(a.jsx)(me,{}))},style:{position:"relative",top:"17%",cursor:"pointer"},children:"Go Back"})]})})}var Oe=me,fe=(n(128),n(76));var xe=function(){var e,t,n=Object(fe.a)(f),c=Object(u.a)(n,1)[0],s=Object(i.useState)(),o=Object(u.a)(s,2),r=o[0],p=o[1],j=Object(i.useState)(),h=Object(u.a)(j,2),m=h[0],A=h[1],b=Object(i.useState)(),g=Object(u.a)(b,2),v=g[0],y=g[1],C=Object(i.useState)(!1),w=Object(u.a)(C,2),D=w[0],B=w[1];c&&(t=O.collection("posts").orderBy("createdAt","desc").limit(25),e=O.collection("chats").where("users","array-contains-any",[c.uid]).limit(25));var I=Object(k.a)(e,{idField:"id"}),N=Object(u.a)(I,1)[0],R=Object(k.a)(t,{idField:"id"}),P=Object(u.a)(R,1)[0];function V(){return(V=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new Promise((function(e){void 0!==document.querySelector("#image-file").files[0]&&e()})).then((function(){var e=document.querySelector("#image-file").files[0],t=x.ref(),n=c.uid;t.child(n).put(e).then((function(e){e.ref.getDownloadURL().then((function(e){A(e),O.collection("users").doc(c.uid).update({photo:e})}))}))})),(t=document.getElementById("changeNameInput").value)!==c.displayName&&""!==t&&(p(t),O.collection("users").doc(c.uid).update({name:t}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){if(c){var e=O.collection("users");e.doc(c.uid).get().then((function(t){t.exists?(p(t.data().name),t.data().photo?A(t.data().photo):A(q)):(p(c.displayName),A(c.photoURL),e.doc(c.uid).set({name:c.displayName,photo:c.photoURL,status:"online",win:0,loss:0}))}))}}),[c,r,m]),Object(i.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(t){var n,a,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=O.collection("users"),a=0;case 2:if(!(a<N.length)){e.next=13;break}return i=N[a].users[0]===t.uid?N[a].users[1]:N[a].users[0],e.next=6,n.doc(i).get();case 6:c=e.sent,N[a].name=c.data().name,N[a].photo=c.data().photo,N[a].otherUid=i;case 10:a++,e.next=2;break;case 13:y(N);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c&&N&&N.length>0&&function(t){e.apply(this,arguments)}(c)}),[N,c]),Object(i.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,n,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=O.collection("users"),n=0;case 2:if(!(n<P.length)){e.next=16;break}return e.next=5,t.doc(P[n].uid).get();case 5:if(a=e.sent,P[n].name=a.data().name,P[n].profilePic=a.data().photo,!P[n].photo){e.next=13;break}return e.next=11,x.ref().child(P[n].id).getDownloadURL();case 11:i=e.sent,P[n].photo=i;case 13:n++,e.next=2;break;case 16:B(P);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c&&P&&P.length>0&&function(){e.apply(this,arguments)}(P)}),[r,m,c,P]),Object(a.jsx)("div",{className:"App",children:c?Object(a.jsx)(pe,{posts:D,messages:v,updateProfile:function(){return V.apply(this,arguments)},name:r,photo:m,uid:c.uid}):Object(a.jsx)(Oe,{})})};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(Q.a,{children:Object(a.jsx)(xe,{})})}),document.getElementById("root"))},53:function(e,t,n){}},[[129,1,2]]]);
//# sourceMappingURL=main.b4677ce5.chunk.js.map