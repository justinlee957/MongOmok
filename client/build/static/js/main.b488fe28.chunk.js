(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a(2),c=a.n(i),s=a(28),r=a.n(s),o=a(6),l=a.n(o),d=a(8),u=a(5),p=a(7),j=a(29),h=a(30),m=a(18),b=a(32),f=a(31),O=a(17);a(65),a(67),a(102),a(103);O.a.initializeApp({apiKey:"AIzaSyDS-A0cw26s47ra6HoDkJqDbvebpvltWgo",authDomain:"omok-77b55.firebaseapp.com",databaseURL:"https://omok-77b55.firebaseio.com",projectId:"omok-77b55",storageBucket:"omok-77b55.appspot.com",messagingSenderId:"658119935119",appId:"1:658119935119:web:2c790660a0afcaf2e2dcfa",measurementId:"G-111CH2C0D9"});O.a;var g=O.a.firestore(),x=O.a.auth(),A=O.a.storage(),v=(O.a.analytics(),new O.a.auth.GoogleAuthProvider),y=O.a.firestore.FieldValue,k=a(12);function w(e){return Object(n.jsxs)("div",{className:"challengeWrapper",children:[Object(n.jsx)("p",{style:{fontSize:"20px",paddingRight:"5px"},children:e.name}),Object(n.jsx)("button",{className:"challengeOptionBtn",onClick:function(){return e.accept(e.uid)},children:Object(n.jsx)("img",{className:"challengeOptionIcon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAA1ElEQVRIie3VOwrCQBRA0SvuwJW4AkvRUhHtVCzE1v8fwc4fbsSFuAIXYqNoYiycwCNFJo4TbHLbvJw3DIFA0h/LAal0THgbOAGZOPAW4AIeMLGNNwU+tY03BD6zjdeAp8LntvGqwBe28YrAl2GDWQNcnjwUXwMOUP8CLwMPha90w2M16PD5EnSVBL6JeqKResHVLCkCdzW7jYr7DTVLCgLffYv7DRTwAjoB/Kae7U1xv35gSV7gh19xP3ldxneuq6tgDziaImH/gzNwBS5Az3RBkrY3LltA/9XJVDYAAAAASUVORK5CYII=",alt:"accept"})}),Object(n.jsx)("button",{className:"challengeOptionBtn",style:{marginRight:"10px"},children:Object(n.jsx)("img",{className:"challengeOptionIcon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAApUlEQVRIie2VQQ6DMAwEhz4BUtT+EuhPy6HPoQdcKSASeRN6Y67YsxExBi5EWmAEQkFvAF7mSDIACzADvSDvrWcxR5IuKvSGxPLZHFnuwNsaPsBTqH04DuQOKZZ7QqrluZDT5D/2l6gOgYv41NLJbxWhTUXvhr++oqMLVb4TWZ56Jod4RrE4RJlzOSRQv+yyq34S5UchY64wsO7z0h/OgGNdX2z4AhszUxhUUXjvAAAAAElFTkSuQmCC",alt:"deny"})})]})}var C=function(e){var t=g.collection("users").doc(e.uid).collection("challenges"),a=Object(k.a)(t,{idField:"id"}),i=Object(u.a)(a,3),c=i[0];return i[1],i[2],Object(n.jsx)("div",{id:"challengeBoxWrapper",children:Object(n.jsxs)("div",{id:"challengeBox",children:[Object(n.jsx)("div",{id:"challengeHeader",children:"Challenges"}),c&&c.length>0&&c.map((function(t){return Object(n.jsx)(w,{name:t.name,uid:t.id,accept:e.accept},t.id)}))]})})};var D=function(e){var t=e.message,a=e.uid===x.currentUser.uid?"sent":"received";return Object(n.jsx)("div",{id:"bubble",className:a,children:Object(n.jsx)("p",{id:"msgTxt",className:a+"Text",children:t})})};var N=function(e){var t=g.collection("games").doc(e.gameData.docID).collection("msgs"),a=t.orderBy("createdAt").limit(25),c=Object(k.a)(a,{idField:"id"}),s=Object(u.a)(c,1)[0];return Object(i.useEffect)((function(){function a(){return(a=Object(d.a)(l.a.mark((function a(n){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.add({text:n,createdAt:y.serverTimestamp(),uid:e.uid});case 2:case"end":return a.stop()}}),a)})))).apply(this,arguments)}var n=document.getElementById("boardChatArea");n.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),""!==n.value&&function(e){a.apply(this,arguments)}(n.value),n.value="")}))}),[t,e.uid]),Object(n.jsxs)("div",{id:"boardChatField",children:[Object(n.jsx)("div",{id:"chatMessages",children:s&&s.map((function(e){return Object(n.jsx)(D,{uid:e.uid,message:e.text},e.id)}))}),Object(n.jsx)("div",{id:"boardMsgWrapper",children:Object(n.jsx)("div",{id:"boardMsgInput",children:Object(n.jsx)("textarea",{id:"boardChatArea",className:"browser-default",type:"text",autoComplete:"off"})})})]})},E=c.a.createContext();function I(e){var t=e.children,a=Object(i.useState)(Array.from({length:10},(function(){return Array.from({length:10},(function(){return 0}))}))),c=Object(u.a)(a,2),s=c[0],r=c[1],o=Object(i.useState)(),l=Object(u.a)(o,2),d=l[0],p=l[1],j=[],h=[];return function(){for(var e=0;e<19;e++)j[e]=26+35*e;for(var t=0;t<19;t++)h[t]=26+35*t;for(var a=0;a<20;a++)s[a]=new Array(20);for(var n=0;n<20;n++)for(a=0;a<20;a++)s[n][a]=0}(),Object(n.jsx)(E.Provider,{value:[s,r,j,h,d,p],children:t})}var B=function(e){var t=g.collection("games").doc(e.gameData.docID).collection("moves").orderBy("createdAt","desc").limit(1),a=Object(k.a)(t,{idField:"id"}),c=Object(u.a)(a,1)[0];return Object(i.useEffect)((function(){c&&0===c.length&&e.setIsNewGame(!1),e.isNewGame||(c&&c.length>0?(e.drawPiece(c[0].x,c[0].y,c[0].color),c[0].uid===e.uid?e.setTurn(!1):e.setTurn(!0)):c&&0!==c.length||"first"!==e.gameData.turn?e.setTurn(!1):e.setTurn(!0))}),[c,e]),Object(n.jsx)(n.Fragment,{})};var R=function(e){var t=Object(i.useState)(),a=Object(u.a)(t,2),c=a[0],s=a[1],r=Object(i.useState)(!1),o=Object(u.a)(r,2),l=o[0],d=o[1],j=Object(i.useRef)(),h=Object(i.useContext)(E),m=Object(u.a)(h,6),b=m[0],f=m[1],O=m[2],x=m[3],A=m[4],v=m[5],k=Object(i.useState)(),w=Object(u.a)(k,2),C=w[0],D=w[1];function I(e,t,a){var n=j.current.getContext("2d");n.fillStyle=a,n.beginPath(),n.arc(e+7.5,t+7.5,12,0,2*Math.PI),n.closePath(),n.fill()}function R(){j.current.getContext("2d").clearRect(0,0,j.current.width,j.current.height),S()}function S(){var e=j.current.getContext("2d"),t=34;e.beginPath();for(var a=0;a<=630;a+=35)e.moveTo(.5+a+t,t),e.lineTo(.5+a+t,664);for(var n=0;n<=630;n+=35)e.moveTo(t,.5+n+t),e.lineTo(664,.5+n+t);e.strokeStyle="black",e.stroke()}return Object(i.useEffect)((function(){S(),console.log("drawing board");var t=g.collection("games").doc(e.gameData.docID).collection("moves");t.get().then((function(e){e.forEach((function(e){I(e.data().x,e.data().y,e.data().color)}))})),e.socket.on("lostGame",(function(){console.log("lost"),s(e.opponentName+" wins!"),D(!1)})),e.socket.on("rematchRequested",(function(){s(e.opponentName+" wants to rematch!"),v(!0),d(!0)})),e.socket.on("startRematch",(function(){var e=Array.from({length:10},(function(){return Array.from({length:10},(function(){return 0}))}));f(e),s(void 0),R(),d(!0),D(!0),t.get().then((function(e){e.docs.forEach((function(e){t.doc(e.id).delete()}))}))}))}),[e.opponentName,e.socket]),Object(n.jsxs)("div",{id:"gameWrapper",children:[Object(n.jsxs)("div",{children:[c&&Object(n.jsxs)("div",{id:"gameResultWrapper",children:[Object(n.jsx)("p",{id:"gameResult",children:c}),Object(n.jsx)("button",{id:"rematchBtn",onClick:function(){if(A){e.socket.emit("acceptRematch",e.gameData.otherUid);var t=Array.from({length:10},(function(){return Array.from({length:10},(function(){return 0}))}));f(t),D(!1),s(void 0),R()}else e.socket.emit("requestRematch",e.gameData.otherUid),s("Rematch Requested"),document.getElementById("rematchBtn").style.display="none"},children:"rematch"}),Object(n.jsx)("button",{id:"leaveBtn",onClick:e.leaveMatch,children:"leave"})]}),Object(n.jsx)("canvas",{ref:j,onClick:function(t){if(console.log("clicked",C),C){var a=j.current.getBoundingClientRect(),n=t.clientX-a.left,i=t.clientY-a.top;(function(t,a){if(t>656)t=656;else if(t<26)t=26;else for(var n=0;n<20;n++)if(O[n]<=t&&O[n+1]>=t){var i=O[n],c=O[n+1];t=c-t>t-i?i:c;break}if(a>656)a=656;else if(a<26)a=26;else for(n=0;n<20;n++)if(x[n]<=a&&x[n+1]>=a){var r=O[n],o=O[n+1];a=o-a>a-r?r:o;break}if(0!==b[(a-26)/35][(t-26)/35])return;I(t,a,e.gameData.color),D(!1),g.collection("games").doc(e.gameData.docID).collection("moves").add({x:t,y:a,color:e.gameData.color,createdAt:y.serverTimestamp(),uid:e.uid}).then((function(){b[(a-26)/35][(t-26)/35]=1,f(b),function(){for(var e=0,t=0;t<20;t++)for(var a=0;a<=20;a++)if(1===b[t][a]&&1===b[t][a+1]){if(4===++e)return"win"}else e=0;var n=0;for(t=0;t<20;t++)for(a=0;a<20;a++)if(1===b[a][t]&&1===b[a+1][t]){if(4===++n)return"win"}else n=0;var i,c=0,s=0;for(t=0;t<20;t++){for(a=0;a<20-t;a++)if(1===b[a][a+t]&&1===b[a+1][a+1+t]){if(4===++c)return"win"}else c=0;for(a=0;a<20-t;a++)if(1===b[a+t][a]&&1===b[a+1+t][a+1]){if(4===++s)return"win"}else s=0}for(a=0;a<19;a++){for(t=19,i=0;t>=0;i++,t--)if(1===b[i][t-a]&&1===b[i+1][t-1-a]){if(4===++c)return"win"}else c=0;for(t=19,i=1;i+a<19;i++,t--)if(1===b[i+a][t]&&1===b[i+a+1][t-1]){if(4===++s)return"win"}else s=0}return 0}()&&(console.log("won"),e.socket.emit("wonGame",e.gameData.otherUid),s(e.name+" wins!"))}))})(n-=7.5,i-=7.5)}},id:"omokcanvas",width:"700",height:"700"}),Object(n.jsx)(B,Object(p.a)(Object(p.a)({},e),{},{drawPiece:I,setTurn:D,isNewGame:l,setIsNewGame:d}))]}),Object(n.jsx)(N,Object(p.a)({},e))]})};var S=function(e){var t,a=Object(i.useState)(),c=Object(u.a)(a,2),s=c[0],r=c[1],o={width:"100%"};return e.gameData?(t=Object(n.jsx)(R,Object(p.a)(Object(p.a)({},e),s)),document.getElementById("onlineSidebar").style.display="none",o={width:"calc(100% - 400px)"}):t=Object(n.jsx)(C,Object(p.a)(Object(p.a)({},e),{},{accept:function(t){e.socket.emit("acceptGame",t)}})),Object(i.useEffect)((function(){e.gameData&&g.collection("users").doc(e.gameData.otherUid).get().then((function(e){r({opponentName:e.data().name,opponentPhoto:e.data().photo})}))}),[e.gameData]),Object(n.jsxs)("div",{id:"playWrapper",children:[Object(n.jsxs)("div",{id:"playHeaderWrapper",children:[Object(n.jsx)("div",{id:"playHeader",style:o,children:"Play"}),e.gameData&&s&&Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{id:"opponentPhoto",src:s.opponentPhoto,alt:"opponentPhoto"}),Object(n.jsx)("div",{id:"playOpponentHeader",children:s.opponentName})]})]}),Object(n.jsx)("div",{id:"playContent",children:t})]})};var P=function(e){var t=Object(i.useState)(!1),a=Object(u.a)(t,2),c=a[0],s=a[1];function r(){e.uid!==x.currentUser.uid&&s(!c)}return Object(n.jsxs)("div",{className:"userInfoWrapper",onMouseEnter:r,onMouseLeave:r,children:[Object(n.jsx)("img",{id:"onlinePic",src:e.photo,alt:"profile pic"}),Object(n.jsx)("div",{className:"onlineUsername",children:e.name}),c&&Object(n.jsxs)("div",{className:"userOptions",children:[Object(n.jsx)("button",{className:"userOptionsBtn",onClick:function(){return e.showChat(e)},children:"Message"}),Object(n.jsx)("button",{className:"userOptionsBtn",onClick:function(){return e.challenge(e.uid)},children:"Challenge"})]})]})};var U=function(e){var t=Object(i.useState)(),a=Object(u.a)(t,2),c=a[0],s=a[1];function r(){return(r=Object(d.a)(l.a.mark((function e(){var t,a,n,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.collection("users"),a=[],e.next=4,t.get();case 4:n=e.sent,i=0,n.forEach((function(e){var t=Object(p.a)(Object(p.a)({},e.data()),{},{id:i,uid:e.id});a.push(t),i++})),s(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){return j.apply(this,arguments)}function j(){return(j=Object(d.a)(l.a.mark((function t(a){var n,i,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.uid!==e.uid){t.next=2;break}return t.abrupt("return");case 2:e.displayMsgs(),i=[e.uid,a.uid],n=e.uid<a?e.uid+"+"+a.uid:a.uid+"+"+e.uid,(c=g.collection("chats")).doc(n).get().then((function(e){e.exists||c.doc(n).set({users:i,lastSent:y.serverTimestamp()})}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t){g.collection("users").doc(t).collection("challenges").doc(e.uid).set({played:"no",name:e.name})}return Object(i.useEffect)((function(){!function(){r.apply(this,arguments)}()}),[]),Object(n.jsxs)("div",{id:"onlineSidebar",children:[Object(n.jsx)("div",{id:"usersTitle",children:"Users"}),c&&c.map((function(e){return Object(n.jsx)(P,Object(p.a)(Object(p.a)({},e),{},{showChat:o,challenge:h}),e.id)}))]})};var T=function(e){return Object(n.jsxs)("div",{className:"msg",onClick:function(){return e.displayChatBox(e)},children:[Object(n.jsx)("img",{className:"msgProfile-pic",src:e.photo,alt:"profile pic"}),Object(n.jsxs)("div",{className:"msgUserInfo",children:[Object(n.jsx)("div",{style:{fontWeight:"600"},children:e.name}),Object(n.jsx)("div",{style:{color:"grey"},children:"Dec 16"})]})]})};var F=function(e){var t=e.text,a=e.uid===x.currentUser.uid?"sent":"received";return Object(n.jsx)("div",{id:"bubble",className:a,children:Object(n.jsx)("p",{id:"msgTxt",className:a+"Text",children:t})})};var V=function(e){var t=g.collection("chats").doc(e.id).collection("messages"),a=t.orderBy("createdAt").limit(25),i=Object(k.a)(a,{idField:"id"}),c=Object(u.a)(i,1)[0];function s(){return(s=Object(d.a)(l.a.mark((function a(n){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.add({text:n,createdAt:y.serverTimestamp(),uid:e.uid});case 2:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return console.log(c),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{id:"msgTextHeader",style:{paddingTop:"5px"},children:[Object(n.jsx)("img",{className:"chatBox-Pic",src:e.photo,alt:"profile pic"}),e.name]}),Object(n.jsx)("div",{id:"msgArea",children:c&&c.map((function(e){return Object(n.jsx)(F,{text:e.text,uid:e.uid},e.id)}))}),Object(n.jsx)("div",{className:"msgInputWrapper",children:Object(n.jsx)("div",{className:"msgInput",children:Object(n.jsx)("textarea",{id:"chatInputArea",onKeyDown:function(e){if("Enter"===e.key){e.preventDefault();var t=e.target.value;""!==t&&function(e){s.apply(this,arguments)}(t),e.target.value=""}},className:"browser-default",type:"text",autoComplete:"off"})})})]})};var J=function(e){function t(e){var t=Object(n.jsx)(V,Object(p.a)({},e));r.a.render(t,document.getElementById("chatbox"))}return Object(i.useEffect)((function(){document.getElementById("onlineSidebar").style.display="block"})),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{id:"messages",children:[Object(n.jsx)("div",{id:"msgTextHeader",children:"Messages"}),e.messages&&e.messages.map((function(a){return Object(n.jsx)(T,Object(p.a)(Object(p.a)({uid:e.uid},a),{},{displayChatBox:t}),a.id)}))]}),Object(n.jsx)("div",{id:"chatbox"})]})};a(39);var M=function(e){var t,a=Object(i.useState)(),c=Object(u.a)(a,2),s=c[0],r=c[1];function o(){return p.apply(this,arguments)}function p(){return(p=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.collection("posts").doc(e.docId).delete();case 2:if(!e.photo){t.next=5;break}return t.next=5,A.ref().child(e.docId).delete();case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return e.uid===x.currentUser.uid&&(t=Object(n.jsx)("div",{className:"postOptionsBtn noselect",onClick:function(){r(void 0===s?Object(n.jsx)("div",{className:"postOptions",children:Object(n.jsx)("button",{className:"deletePostBtn",onClick:o,children:"Delete"})}):void 0)},children:"\u2807"})),Object(n.jsxs)("div",{className:"post",children:[Object(n.jsxs)("div",{className:"postUserInfoWrapper",children:[Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(n.jsx)("img",{className:"postProfile-pic",src:e.profilePhoto,alt:"profile pic"}),Object(n.jsxs)("div",{className:"postTextWrapper",children:[Object(n.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[Object(n.jsx)("b",{className:"postName",children:e.name}),Object(n.jsx)("div",{style:{color:"grey"},children:e.time})]}),Object(n.jsx)("p",{className:"postText",children:e.text})]})]}),t]}),s,e.photo&&Object(n.jsx)("img",{className:"postPic",src:e.photo,alt:"post pic"}),Object(n.jsxs)("div",{className:"postIconWrapper",children:[Object(n.jsx)("img",{className:"likeBtn",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAADqklEQVRoge3ZTYhWVRzH8c84M6A0OSlEZZaLjMFeyByL3qhFiBvNIqXcRIswjKJdLSsscFtMr1RQCW3SghZlVtAmekGKQo0WlWlBlC9l6hTOPC3OOd1bTDP33rnPfZ7g+cLlzJznf/7n97/nnHvP+V969OjRo0cH6CthO4KbsQrn4jwM4DD24AO8hq8K+luG9bgeF2MhTuEADmIX3sDXJTROy0q8h1aBaxJvY/k0/i6PNpMFfb6L0dkEMIixXIeH8DxuEkbnNMwVRmYtnhZGpyXc2UfQn/PXj0fjb8nfU1gTfcyNPkewDi9Em3SDnhBmQCkW4P3o5Di2YH6BdqfjYYzHti/HAPqxLdaN46FoOxPzheBPyEbnjKJBDOaC+F6YCmVZjv3RxzZZEN/hsgr+RoW1k4IpNDJjsiAWVeg0sST6SHN9P86fhb9FsmAen8l4pTAfj6s2Ev9mVJhK41hRg78VwjSbmMlfejptqaHTxAPxqovHBI27/stgRPY0KbKwi5IWe10My56OF6bKOTmDW2L5On6rseOJeNXFr8KLkvCCxj8DuTGWb9bYabtIGlelinwgS2K5pzE51dkbyymfgseEeTfUmJzqDAlaj6WK/IikBXmqSUUVmYzl3/rzgRyJ5cLG5FQnaTycKvKB/BLLcxqTU52k8VCqyAfyRSyvaExOda6M5eepIh/Ix7G8ujE51bkqlp9M9eMy4UlwRDgbdCvzhJdiS9iNTMnuaLChIVFVuF3QOOVoJO6LRruVO883RR8+EzRuns5wHn6Mhre2X1dp1gvaDiow/e+NxgeEnWa3MCwE0MI9RRoM4NPY4MX26SrNS4Kmj5Q4FlwqSyDc3R5dpdgsaDmJi8o2vis2/kNuu9wBVkcNLdxZ1UlKRPyOa+rRVYrrhPxBoYTDdPTjVVkwTY7MDcJJtSWkYmd9XB4UjpZpjm6crcMCbIx9tbA9aqiFfiGFmXJUz6qQvizYz1ZZmvaVdvTTJ6RDJ2Inbwmp1bpYgJ3R94SQVm3r7mItjsYOv1HPbvlafCvbtK6pwWchluJLWeZ9q2rzeAAP4s/oa5+wC2+UITwnWzcf4oIS7ZfGNumzwTPCZ4WOsRo/REEnhDs8Zxr7PmySZW1+Er65dAVnYodsdHZi8RR2i/FOzm57bNt1bMDPgsijuC332zohwZEW9KbG1ZXkbCF/nO76GJ7M/b8DZ3VMXQXuELY1KYCTuL+jimbBJUKedm/8+3/NsO46afZohL8AQdD5tJ4fnIQAAAAASUVORK5CYII=",alt:"heartIcon"}),Object(n.jsx)("img",{className:"commentBtn",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAADzElEQVRoge3Z62tcRRjH8U/aJKZNNWmkL/pCi2nUWq0WLN7witB/QUq9vPVKFcFLFUXBl4Iogm99UVQEry3FomCpVqv1ElvpRa2oELSoaFttWkjii2dOclJ2k92zZ7cr5AuHw56Zeeb37Dkz88wzzDHHHDPRUaKtc3E11mAIg1iEvlT+N47iEH7A5/gEv5SooTBDeBp7MVHlOpquauXf4Cksb7F2cB22Yiwn6Gs8j/XirQxUaDeQym7FCxjOtR/DFlzTZO2If21LrvNDeBTnNWBzEBvxY87uOw3arEoH7sc/qaMDuAXzSuxjHtbhYOrjGO4r0b5FeD0ZPy7eQGeZHZxCFx7DaOrzVfQ2anQAnyaDB3FJowbr4FJ8l/reif6ihs7El8nQh6am0VbSj+1Jw27xddTFfDErTWAbFpSprk4W4oOkZbPQVjOPp4bDOKt0afXThz1C0yO1NroMJ8Uidn5zdBXiQjFrnlDjWH1feH53E0UVZYPQ9t5sFW9MFb/V3Cm2KF3YJzReP1PFN1Kl9S0QVZTbhcbXqlXoF2PjMLpbJKoIZ+B3MVYmJ6J8iLFWvLrNwqF25YTQ2C00Y7ojWdS5rYWiipJpnIyU846sSvfhlskpTqZxVaXCA2IQtfP4yOgRWvdnD/JvpE9Et+08PjJG0zUZ/+UdmVDu/qLZdAjNmC78TzG1LWy1ogL0CK1Hsgd5R35N93NaqaggWaJiMgOTd2R3ul/RMjnFWZ3ue7IHeUd2pfsNLZNTnGwh/LhSYa/Y8GdjpV3pESHKqNjFVmST9g8a7xAaX5mp0uUYF4tju4bx+4Uj185W+a1UcUOTRRXhAaFtay2VB8VY+RcrmiiqXi4SmkZxca2N7hGe78Xi5uiqi36xa53AQ/U07MDLpnJap3O1700aJvC2AmFUt6l80k6cXaa6GunHjqRhlwZSpwvEbixLma4pQ12NrMb3qe+PlJDp7MKLyeBJPNyowVnoxhOmktiblJDEzrMuGT5cptEcnbhNHMtlJ113NqOj5aa+1TIZEinan5P9cbyJZfUYqWf1virdv6hSvhFLxZngMH7CXyLrkbFEnEStwJUiIbgylY3jXTyj/D9rGtmR29pTnnfiOdUPO4+LBbZa+Vd4UoNHbbUeTy8Vr35ErPxj6fkFeAk34TcR1iwT2Y1BsZguFs4eEUfU2fH0Z+J4eqQRB+ol+8fvSr+X4Fnx2UyIfGw7hTMVWSkEH8ODIqjMHMjC6ar7gnZhvliMKn3b23Hz6ZM2ndlmrXvFGxnBH+IsfIcY+PuaK22O/zf/AZh9+Zk/uRRIAAAAAElFTkSuQmCC",alt:"commentIcon"})]})]})};var L=function(e){var t=Object(i.useState)(),a=Object(u.a)(t,2),c=a[0],s=a[1];function r(){return o.apply(this,arguments)}function o(){return(o=Object(d.a)(l.a.mark((function t(){var a,n,i,c,s,r,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==(a=document.getElementById("postArea").value)){t.next=3;break}return t.abrupt("return");case 3:return document.getElementById("postArea").value="",n=g.collection("posts"),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=new Date,s=i[c.getMonth()]+" "+c.getDate(),r={uid:e.uid,text:a,createdAt:y.serverTimestamp(),time:s},t.next=11,n.add(r);case 11:o=t.sent,new Promise((function(e){void 0!==document.querySelector("#postImage").files[0]&&e()})).then((function(){var e=document.querySelector("#postImage").files[0];A.ref().child(o.id).put(e).then((function(){g.collection("posts").doc(o.id).update({photo:"yes"})})),p()}));case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){document.getElementById("postImage").value="",s()}return Object(i.useEffect)((function(){document.getElementById("onlineSidebar").style.display="block"})),Object(n.jsxs)("div",{style:{height:"100%"},children:[Object(n.jsx)("div",{id:"homeHeader",children:Object(n.jsx)("p",{style:{cursor:"pointer",width:"60px"},onClick:function(){document.getElementById("content").scrollTop=0},children:"Home"})}),Object(n.jsxs)("div",{id:"feed",children:[Object(n.jsxs)("div",{id:"postInput",children:[Object(n.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",height:"43px"},children:[Object(n.jsx)("form",{children:Object(n.jsxs)("label",{children:[Object(n.jsx)("img",{id:"uploadPic",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAABM0lEQVRYhe2W3WrCQBCFv4S+VilEBIMXpT5WEbwpVCn2rfoC2jdQ++dFepEJGddMdkO1e7MHQsJmNuebMyEEkpIiK1PXVQzv/J9Nz3TTsZZ1rF1SJ0lHT+CaAFPgHdgCZciGisu+iFv1zI3lE30EWr4EcoYBl9QpbIBJiE8fQA6s5fhraoMBGvPm/ksARF9agwC0+UGOClhhfy98aQUDZMCzMh8Bt8CeNgkXQu+pgNcOiCAAt/NC1Y2BD7n3pCCstNyReQG6Onc1Bj5px5E7ewrqtHaypsfhBbA6d1UCX1L7JucdcKdqCtokltKcFyDEvNFUQRypu3alIfT7YQJYsVuaKIiFUaPH4QUI6dzVPfAt++dGjU5i8JcwRA/AjzzjsQfiagAAMwVhJXHik/4Jk5Ki6xdOeZDYnBW7qwAAAABJRU5ErkJggg==",alt:"uploadPic"}),Object(n.jsx)("input",{id:"postImage",onChange:function(){var e=new FileReader,t=document.querySelector("#postImage").files[0];t&&e.readAsDataURL(t),e.addEventListener("load",(function(){s(Object(n.jsxs)("div",{id:"postImageWrapper",children:[Object(n.jsx)("img",{id:"uploadedPic",src:e.result,alt:"uploadPic"}),Object(n.jsx)("img",{id:"removeImageBtn",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABFUlEQVRIid2VTW7CQAyFP7UiZ+kCVrCDHqIpiDtBb0EERyoVZVsUtmFNWMyMVJk3kxDEon2SpZF/nh3P2IH/jgyYAxtgC5y8bIG1t2VdyafAHqgbZA/ktxA/Ax8tiK0sfWwjupD/TpLE+x3kQaLtyrju+RgYAaUgKoEhMDH6byIXPxckQ2/rmySl1+ELsHEzlWAjHI/AwNtfgB+hO4i4QiX4Eo622r45q9bVuDm5QhVxtl+SqjxIFRyfVKaWqBO2s1I+vEVr4aguVF28jVupBA9/pmrQJqQHbQS8Gv2OxIbNBdGt8hYjD7hn2S2ayMGt3GUH8tbrOiDHLa4m4h0t2hJDhnsRBfCJm9DKnwvcX6/Xlfxv4AK2lPndEfN11QAAAABJRU5ErkJggg==",onClick:p,alt:"removeImage"}),Object(n.jsx)("button",{id:"postBtn",onClick:r,children:"Post"})]}))}),!1)},type:"file",style:{display:"none"}})]})}),Object(n.jsx)("textarea",{id:"postArea",placeholder:"post something!",onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),r())},className:"browser-default",type:"text",autoComplete:"off"})]}),c]}),e.posts&&e.posts.map((function(e){return Object(n.jsx)(M,{name:e.name,profilePhoto:e.profilePic,text:e.text,time:e.time,photo:e.photo?e.photo:void 0,uid:e.uid,docId:e.id},e.id)}))]})]})};var Q=function(e){return Object(n.jsx)("div",{id:"profile",children:Object(n.jsxs)("div",{id:"profileHeader",children:[Object(n.jsx)("img",{id:"profilePagePic",src:e.photo,alt:"profile pic"}),Object(n.jsx)("div",{style:{fontWeight:"600",fontSize:"30px"},children:e.name}),Object(n.jsx)("div",{id:"profileBio",children:"i am good dog"})]})})},W=a(56),H=a.n(W),Y=a(57),Z=a.n(Y),z=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).homeClick=n.homeClick.bind(Object(m.a)(n)),n.messagesClick=n.messagesClick.bind(Object(m.a)(n)),n.playClick=n.playClick.bind(Object(m.a)(n)),n.profileClick=n.profileClick.bind(Object(m.a)(n)),n.leaveMatch=n.leaveMatch.bind(Object(m.a)(n)),n.state={home:!0,messages:!1,play:!1,profile:!1,gameData:void 0},n}return Object(h.a)(a,[{key:"homeClick",value:function(){this.setState({home:!0}),document.getElementById("content").scrollTop=0}},{key:"playClick",value:function(){this.setState({play:!0,home:!1,messages:!1,profile:!1})}},{key:"messagesClick",value:function(){this.setState({messages:!0,home:!1,play:!1,profile:!1})}},{key:"profileClick",value:function(){this.setState({profile:!0,messages:!1,home:!1,play:!1})}},{key:"leaveMatch",value:function(){this.setState({gameData:void 0,play:!0})}},{key:"componentDidMount",value:function(){var e=this;H.a.AutoInit();var t=!0;return document.getElementById("image-file").addEventListener("change",(function(){var e=new FileReader,t=document.querySelector("#image-file").files[0];e.addEventListener("load",(function(){document.getElementById("change-pic").src=e.result}),!1),t&&e.readAsDataURL(t)})),this.socket=Z()("http://localhost:5000",{query:"uid=".concat(this.props.uid)}),this.socket.on("startGame",(function(a){t&&(e.setState({gameData:a}),e.playClick())})),function(){t=!1}}},{key:"render",value:function(){var e,t=this.state.home,a=this.state.messages,i=this.state.play,c=this.state.profile;return t?e=Object(n.jsx)(L,Object(p.a)({},this.props)):a?e=Object(n.jsx)(J,{messages:this.props.messages,uid:this.props.uid}):i?e=Object(n.jsx)(S,{name:this.props.name,uid:this.props.uid,photo:this.props.photo,socket:this.socket,gameData:this.state.gameData,leaveMatch:this.leaveMatch}):c&&(e=Object(n.jsx)(Q,Object(p.a)({},this.props))),Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{id:"profile-modal",className:"modal",children:[Object(n.jsx)("form",{children:Object(n.jsxs)("label",{children:[Object(n.jsx)("img",{id:"change-pic",src:this.props.photo,alt:"profile pic"}),Object(n.jsx)("i",{id:"upload-icon",className:"material-icons",children:"cloud_upload"}),Object(n.jsx)("input",{id:"image-file",type:"file",style:{display:"none"}})]})}),Object(n.jsxs)("div",{id:"change-name",children:[Object(n.jsx)("label",{children:"Name"}),Object(n.jsx)("input",{className:"input-field",defaultValue:this.props.name,id:"changeName-input",maxLength:"15",type:"text",autoComplete:"off"})]}),Object(n.jsx)("button",{id:"profile-submit",onClick:this.props.updateProfile,className:"modal-close waves-effect waves-green btn-flat",children:"Apply"})]}),Object(n.jsxs)("div",{id:"content",children:[Object(n.jsxs)("div",{id:"sidebar",children:[Object(n.jsx)("a",{className:"modal-trigger",href:"#profile-modal",children:Object(n.jsx)("img",{id:"profile-pic",src:this.props.photo,alt:"profile pic"})}),Object(n.jsx)("i",{id:"profile-icon",className:"material-icons",children:"person"}),Object(n.jsx)("button",{onClick:this.homeClick,className:"sidebar-btn",children:"Home"}),Object(n.jsx)("button",{onClick:this.playClick,className:"sidebar-btn",children:"Play"}),Object(n.jsx)("button",{onClick:this.messagesClick,className:"sidebar-btn",children:"Messages"}),Object(n.jsx)("button",{onClick:this.profileClick,className:"sidebar-btn",children:"Profile"})]}),e,Object(n.jsx)(U,Object(p.a)(Object(p.a)({},this.props),{},{displayMsgs:this.messagesClick}))]})]})}}]),a}(i.Component),q=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).signInWithGoogle=function(){var e=v;x.signInWithPopup(e)},e}return Object(h.a)(a,[{key:"render",value:function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("button",{className:"sign-in",onClick:this.signInWithGoogle,children:"Sign in with Google"})})}}]),a}(i.Component),G=(a(99),a(100),a(58));function K(){return x.currentUser&&Object(n.jsx)("button",{style:{position:"absolute",left:"0",zIndex:"1000",bottom:"2%",marginLeft:"7px"},className:"sign-out",onClick:function(){return x.signOut()},children:"Sign Out"})}var X=function(){var e,t,a=Object(G.a)(x),c=Object(u.a)(a,1)[0],s=Object(i.useState)(),r=Object(u.a)(s,2),o=r[0],p=r[1],j=Object(i.useState)(),h=Object(u.a)(j,2),m=h[0],b=h[1],f=Object(i.useState)(),O=Object(u.a)(f,2),v=O[0],y=O[1],w=Object(i.useState)(),C=Object(u.a)(w,2),D=C[0],N=C[1];if(c){var E=g.collection("posts");e=g.collection("chats").where("users","array-contains-any",[c.uid]).limit(25),t=E.orderBy("createdAt","desc").limit(25)}var B=Object(k.a)(e,{idField:"id"}),R=Object(u.a)(B,1)[0],S=Object(k.a)(t,{idField:"id"}),P=Object(u.a)(S,1)[0];function U(){return(U=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new Promise((function(e){void 0!==document.querySelector("#image-file").files[0]&&e()})).then((function(){var e=document.querySelector("#image-file").files[0],t=A.ref(),a=c.uid;t.child(a).put(e).then((function(e){e.ref.getDownloadURL().then((function(e){b(e),g.collection("users").doc(c.uid).update({photo:e})}))}))})),(t=document.getElementById("changeName-input").value)!==c.displayName&&""!==t&&(p(t),g.collection("users").doc(c.uid).update({name:t}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){if(c){var e=g.collection("users");e.doc(c.uid).get().then((function(t){t.exists?(p(t.data().name),b(t.data().photo)):(p(c.displayName),b(c.photoURL),e.doc(c.uid).set({name:c.displayName,photo:c.photoURL,status:"online"}))}))}}),[c,o,m]),Object(i.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(t){var a,n,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=g.collection("users"),n=0;case 2:if(!(n<R.length)){e.next=13;break}return i=R[n].users[0]===t.uid?R[n].users[1]:R[n].users[0],e.next=6,a.doc(i).get();case 6:c=e.sent,R[n].name=c.data().name,R[n].photo=c.data().photo,R[n].otherUid=i;case 10:n++,e.next=2;break;case 13:y(R);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}void 0!==R&&R.length>0&&function(t){e.apply(this,arguments)}(c)}),[R,c]),Object(i.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,a,n,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=g.collection("users"),a=0;case 2:if(!(a<P.length)){e.next=16;break}return e.next=5,t.doc(P[a].uid).get();case 5:if(n=e.sent,P[a].name=n.data().name,P[a].profilePic=n.data().photo,void 0===P[a].photo){e.next=13;break}return e.next=11,A.ref().child(P[a].id).getDownloadURL();case 11:i=e.sent,P[a].photo=i;case 13:a++,e.next=2;break;case 16:N(P);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}void 0!==P&&P.length>0&&function(){e.apply(this,arguments)}()}),[P,o,m]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("header",{children:Object(n.jsx)(K,{})}),Object(n.jsx)(I,{children:c?Object(n.jsx)(z,{posts:D,messages:v,updateProfile:function(){return U.apply(this,arguments)},name:o,photo:m,uid:c.uid}):Object(n.jsx)(q,{})})]})};r.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(X,{})}),document.getElementById("root"))},39:function(e,t,a){},99:function(e,t,a){}},[[101,1,2]]]);
//# sourceMappingURL=main.b488fe28.chunk.js.map