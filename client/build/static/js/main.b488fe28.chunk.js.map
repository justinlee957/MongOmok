{"version":3,"sources":["firebase.js","components/Play/ChallengeBox.js","images/accept.png","images/deny.png","components/Play/BoardMsg.js","components/Play/BoardChat.js","GameProvider.js","components/Play/GameLogic.js","components/Play/Board.js","components/Play/Play.js","components/User.js","components/OnlineSidebar.js","components/Messages/Chat.js","components/Messages/Msg.js","components/Messages/Chatbox.js","components/Messages/MessageLayout.js","components/Post.js","images/heart1.png","images/comment1.png","components/Feed.js","images/picture1.png","images/cancel.png","components/Profile.js","components/Layout.js","components/SignIn.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","storage","googleAuthProvider","analytics","GoogleAuthProvider","FieldValue","Challenge","props","className","style","fontSize","paddingRight","name","onClick","accept","uid","src","alt","marginRight","ChallengeBox","challengeRef","collection","doc","useCollectionData","idField","challenge","id","length","map","chal","BoardMsg","text","message","msgClass","currentUser","BoardChat","messagesRef","gameData","docID","query","orderBy","limit","messages","useEffect","msg","a","add","createdAt","serverTimestamp","msgid","document","getElementById","addEventListener","e","key","preventDefault","value","sendMessage","type","autoComplete","GameContext","React","createContext","GameProvider","children","useState","Array","from","placed","setPlaced","requestedRematch","setRequestedRematch","xcoord","ycoord","x","y","i","j","omokarrays","Provider","GameLogic","moves","setIsNewGame","isNewGame","drawPiece","color","setTurn","turn","Board","gameInfo","setGameInfo","canvasRef","useRef","useContext","context","current","getContext","fillStyle","beginPath","arc","Math","PI","closePath","fill","reInitBoard","clearRect","width","height","drawBoard","p","moveTo","lineTo","bh","bw","strokeStyle","stroke","console","log","movesRef","get","then","forEach","data","socket","on","opponentName","newArray","undefined","docs","delete","emit","otherUid","display","leaveMatch","ref","rect","getBoundingClientRect","clientX","left","clientY","top","x1","x2","y1","y2","numConsecHorizontal","numConsecVertical","k","UpperConsecDiagonal","LowerConsecDiagonal","checkwin","plotclosestpoint","Play","content","setGameData","headerStyle","opponentPhoto","photo","User","isHovering","setHovering","handleMouseHover","onMouseEnter","onMouseLeave","showChat","OnlineSidebar","users","setUsers","usersRef","usersInit","snapshot","user","push","otherUser","displayMsgs","docid","chatRef","exists","set","lastSent","played","getUsers","Chat","displayChatBox","fontWeight","Msg","Chatbox","paddingTop","onKeyDown","target","sendMsgToDb","MessageLayout","element","ReactDOM","render","Post","optionsBtn","options","setOptions","deletePost","docId","child","flexDirection","profilePhoto","gap","time","Feed","postImage","setPostImage","post","postsRef","months","Date","today","getMonth","getDate","res","Promise","resolve","querySelector","files","file","put","update","removeImage","cursor","scrollTop","alignItems","onChange","reader","FileReader","readAsDataURL","result","placeholder","posts","profilePic","Profile","Layout","homeClick","bind","messagesClick","playClick","profileClick","state","home","play","profile","this","setState","M","AutoInit","isMounted","openSocket","defaultValue","maxLength","updateProfile","href","Component","SignIn","signInWithGoogle","provider","signInWithPopup","SignOut","position","zIndex","bottom","marginLeft","signOut","App","chatsQuery","postsQuery","useAuthState","username","setUsername","photoLink","setPhoto","privateChats","setChats","setPosts","where","chats","initalPosts","getDownloadURL","url","inputName","displayName","photoURL","status","thisUser","setChatsData","setPostsData","StrictMode"],"mappings":"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","file":"static/js/main.b488fe28.chunk.js","sourcesContent":["import firebase from 'firebase/app'\r\nimport 'firebase/auth'\r\nimport 'firebase/firestore'\r\nimport 'firebase/analytics'\r\nimport 'firebase/storage'\r\nconst config = {\r\n    apiKey: \"AIzaSyDS-A0cw26s47ra6HoDkJqDbvebpvltWgo\",\r\n    authDomain: \"omok-77b55.firebaseapp.com\",\r\n    databaseURL: \"https://omok-77b55.firebaseio.com\",\r\n    projectId: \"omok-77b55\",\r\n    storageBucket: \"omok-77b55.appspot.com\",\r\n    messagingSenderId: \"658119935119\",\r\n    appId: \"1:658119935119:web:2c790660a0afcaf2e2dcfa\",\r\n    measurementId: \"G-111CH2C0D9\"\r\n}\r\nfirebase.initializeApp(config);\r\n\r\nexport default firebase;\r\n\r\nexport const firestore = firebase.firestore();\r\nexport const auth = firebase.auth();\r\nexport const storage = firebase.storage();\r\nexport const analytics = firebase.analytics();\r\nexport const googleAuthProvider = new firebase.auth.GoogleAuthProvider();\r\nexport const FieldValue = firebase.firestore.FieldValue;","import accept from '../../images/accept.png'\r\nimport deny from '../../images/deny.png'\r\nimport { firestore } from '../../firebase'\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore'\r\nimport { useEffect } from 'react'\r\n\r\n\r\nfunction ChallengeBox(props){\r\n    const challengeRef = firestore.collection('users').doc(props.uid).collection('challenges')\r\n    const [challenge, loading, error] = useCollectionData(challengeRef, { idField: 'id'})\r\n\r\n    return(\r\n        <div id = 'challengeBoxWrapper'>\r\n            <div id = \"challengeBox\">\r\n                <div id = 'challengeHeader'>Challenges</div>\r\n                {challenge && challenge.length > 0 && challenge.map(chal => <Challenge key = {chal.id} name = {chal.name} uid = {chal.id} accept = {props.accept}/>)}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction Challenge(props){\r\n    return(\r\n        <div className = 'challengeWrapper'>\r\n            <p style = {{fontSize: '20px', paddingRight: '5px'}}>{props.name}</p>\r\n            <button className = 'challengeOptionBtn' onClick = {() => props.accept(props.uid)}><img className = 'challengeOptionIcon'src={accept} alt = \"accept\"/></button>\r\n            <button className = 'challengeOptionBtn' style = {{marginRight: '10px'}}><img className = 'challengeOptionIcon' src={deny} alt = \"deny\"/></button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChallengeBox","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAA1ElEQVRIie3VOwrCQBRA0SvuwJW4AkvRUhHtVCzE1v8fwc4fbsSFuAIXYqNoYiycwCNFJo4TbHLbvJw3DIFA0h/LAal0THgbOAGZOPAW4AIeMLGNNwU+tY03BD6zjdeAp8LntvGqwBe28YrAl2GDWQNcnjwUXwMOUP8CLwMPha90w2M16PD5EnSVBL6JeqKResHVLCkCdzW7jYr7DTVLCgLffYv7DRTwAjoB/Kae7U1xv35gSV7gh19xP3ldxneuq6tgDziaImH/gzNwBS5Az3RBkrY3LltA/9XJVDYAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAApUlEQVRIie2VQQ6DMAwEhz4BUtT+EuhPy6HPoQdcKSASeRN6Y67YsxExBi5EWmAEQkFvAF7mSDIACzADvSDvrWcxR5IuKvSGxPLZHFnuwNsaPsBTqH04DuQOKZZ7QqrluZDT5D/2l6gOgYv41NLJbxWhTUXvhr++oqMLVb4TWZ56Jod4RrE4RJlzOSRQv+yyq34S5UchY64wsO7z0h/OgGNdX2z4AhszUxhUUXjvAAAAAElFTkSuQmCC\"","import { auth } from '../../firebase'\r\n\r\nfunction BoardMsg(props){\r\n    const text = props.message\r\n    const msgClass = props.uid === auth.currentUser.uid ? 'sent' : 'received';\r\n    return(\r\n        <div id = \"bubble\" className = {msgClass}>\r\n            <p id = \"msgTxt\" className = {msgClass+\"Text\"}>{text}</p>\r\n        </div>\r\n    )\r\n}\r\nexport default BoardMsg","import { firestore, FieldValue } from '../../firebase'\r\nimport BoardMsg from './BoardMsg'\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore'\r\nimport { useEffect } from 'react'   \r\n\r\nfunction BoardChat(props){\r\n    const messagesRef = firestore.collection('games').doc(props.gameData.docID).collection('msgs')\r\n    const query = messagesRef.orderBy('createdAt').limit(25);\r\n    const [messages] = useCollectionData(query, { idField: 'id' })\r\n\r\n    useEffect(() => {\r\n        async function sendMessage(msg){\r\n            await messagesRef.add({\r\n                text: msg,\r\n                createdAt: FieldValue.serverTimestamp(),\r\n                uid: props.uid\r\n            })\r\n        }\r\n\r\n        var msgid = document.getElementById('boardChatArea')\r\n        msgid.addEventListener('keydown', function(e){\r\n            if(e.key === \"Enter\"){\r\n                e.preventDefault();\r\n                if (msgid.value !== ''){\r\n                    sendMessage(msgid.value);\r\n                }     \r\n                msgid.value = '';\r\n            }\r\n        })\r\n\r\n    }, [messagesRef, props.uid])\r\n\r\n\r\n    return(\r\n        <div id = \"boardChatField\">\r\n            <div id = \"chatMessages\">\r\n                {messages && messages.map(msg => <BoardMsg uid = {msg.uid} key = {msg.id} message = {msg.text}/>)}\r\n            </div>\r\n            <div id = \"boardMsgWrapper\">\r\n                <div id=\"boardMsgInput\">\r\n                    <textarea id='boardChatArea' className=\"browser-default\" type=\"text\" autoComplete=\"off\"></textarea>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\nexport default BoardChat","import React, { useContext, useState} from 'react'\r\n\r\nconst GameContext = React.createContext()\r\n\r\nexport function useGameContext(){\r\n    return useContext(GameContext)\r\n}\r\n\r\nexport function GameProvider({children}){\r\n    var [placed, setPlaced] = useState(Array.from({length: 10},()=> Array.from({length: 10}, () => 0)))\r\n    var [requestedRematch, setRequestedRematch] = useState()\r\n    var xcoord = []\r\n    var ycoord = []\r\n    omokarrays()\r\n    function omokarrays(){\r\n        for(var x = 0; x < 19; x++){\r\n          xcoord[x] = 26 +35*x;\r\n        }\r\n        for(var y = 0; y < 19; y++){\r\n          ycoord[y] = 26 + 35*y;\r\n        }\r\n      \r\n        for (var i = 0; i < 20; i++) {\r\n          placed[i] = new Array(20);\r\n        }\r\n        for(var j = 0; j < 20; j++){\r\n          for(i = 0; i < 20; i++){\r\n            placed[j][i] = 0;\r\n          }\r\n        }\r\n    }\r\n\r\n    return(\r\n        <GameContext.Provider value = {[placed, setPlaced, xcoord, ycoord, requestedRematch, setRequestedRematch]}>\r\n            {children}\r\n        </GameContext.Provider>\r\n    )\r\n}","import { useEffect, } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore'\r\n\r\nfunction GameLogic(props){\r\n    const movesRef = firestore.collection('games').doc(props.gameData.docID).collection('moves')\r\n    const query = movesRef.orderBy('createdAt', 'desc').limit(1)\r\n    const [moves] = useCollectionData(query, { idField: 'id' })\r\n\r\n    useEffect(()=>{\r\n        if(moves && moves.length === 0){\r\n            props.setIsNewGame(false)\r\n        }\r\n        if(props.isNewGame){\r\n            return\r\n        }\r\n        \r\n        if(moves && moves.length > 0){\r\n            props.drawPiece(moves[0].x, moves[0].y, moves[0].color)\r\n            \r\n            if(moves[0].uid === props.uid){\r\n             props.setTurn(false) \r\n            }else{\r\n                props.setTurn(true)\r\n            }\r\n        }else if((!moves || moves.length === 0) && props.gameData.turn === 'first'){\r\n            props.setTurn(true)\r\n        }else{\r\n            props.setTurn(false) \r\n        }\r\n\r\n    }, [moves, props])\r\n\r\n    return(\r\n        <>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default GameLogic","import { useEffect, useRef, useState } from 'react'\r\nimport BoardChat from './BoardChat'\r\nimport { firestore, FieldValue } from '../../firebase'\r\nimport { useGameContext } from '../../GameProvider'\r\nimport GameLogic from './GameLogic'\r\n\r\nfunction Board(props){\r\n  var [gameInfo, setGameInfo] = useState()\r\n  var [isNewGame, setIsNewGame] = useState(false)\r\n  var canvasRef = useRef()\r\n  const [placed, setPlaced, xcoord, ycoord, requestedRematch, setRequestedRematch] = useGameContext()\r\n\r\n  var [turn, setTurn] = useState()\r\n  \r\n  function handleClick(e){\r\n    console.log('clicked', turn)\r\n    if(turn){\r\n      const rect = canvasRef.current.getBoundingClientRect()\r\n      var x = e.clientX - rect.left\r\n      var y = e.clientY - rect.top\r\n      x-=7.5\r\n      y-=7.5\r\n      plotclosestpoint(x,y)\r\n    }\r\n  }\r\n\r\n  function plotclosestpoint(x,y){\r\n    if(x > 656){\r\n      x = 656\r\n    }else if(x < 26){\r\n      x = 26\r\n    }else{\r\n      for(var i = 0; i < 20; i++){\r\n        if(xcoord[i] <= x && xcoord[i+1] >= x ){\r\n          var x1 = xcoord[i];\r\n          var x2 = xcoord[i+1];\r\n          if(x2-x > x-x1){\r\n              x = x1;\r\n          }else{\r\n              x = x2;\r\n          }\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    if(y > 656){  \r\n      y = 656\r\n    }else if(y < 26){\r\n      y = 26\r\n    }else{\r\n      for(i = 0; i < 20; i++){\r\n        if(ycoord[i] <= y && ycoord[i+1] >= y ){\r\n          var y1 = xcoord[i]\r\n          var y2 = xcoord[i+1]\r\n        if(y2-y > y-y1){\r\n            y = y1\r\n        }else{\r\n            y = y2\r\n        }\r\n          break\r\n        }\r\n      }\r\n    }\r\n    \r\n    if(placed[(y-26)/35][(x-26)/35] !== 0){\r\n        return\r\n    }\r\n    drawPiece(x, y, props.gameData.color)\r\n    setTurn(false)\r\n    // console.log(x, y)\r\n    // console.log((x-26)/35, (y-26)/35)\r\n    firestore.collection('games').doc(props.gameData.docID).collection('moves').add({\r\n      x,\r\n      y,\r\n      color: props.gameData.color,\r\n      createdAt: FieldValue.serverTimestamp(),\r\n      uid: props.uid\r\n    }).then(() => {\r\n      placed[(y-26)/35][(x-26)/35] = 1\r\n      setPlaced(placed) \r\n      \r\n      var win = checkwin()\r\n      if(win){\r\n        console.log('won')\r\n        props.socket.emit('wonGame', props.gameData.otherUid)\r\n        setGameInfo(props.name + ' wins!')\r\n        //firestore.collection('games').doc(props.gameData.docID).update({winner: props.uid})\r\n      }\r\n    })\r\n  }\r\n\r\n  function drawPiece(x, y, color){\r\n    var context = canvasRef.current.getContext('2d')\r\n    context.fillStyle = color\r\n    context.beginPath();\r\n    context.arc(x+7.5, y+7.5, 12, 0, 2 * Math.PI);\r\n    context.closePath();\r\n    context.fill()\r\n  }\r\n\r\n  function reInitBoard(){\r\n    var context = canvasRef.current.getContext('2d')\r\n    context.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height)\r\n    drawBoard()\r\n  }\r\n\r\n  function drawBoard(){\r\n    var context = canvasRef.current.getContext('2d')\r\n    // Box width\r\n    var bw = 630;\r\n    // Box height\r\n    var bh = 630;\r\n    // Padding\r\n    var p = 34;\r\n    context.beginPath()\r\n    for (var x = 0; x <= bw; x += 35) {\r\n        context.moveTo(0.5 + x + p, p);\r\n        context.lineTo(0.5 + x + p, bh + p);\r\n    }\r\n    for (var y = 0; y <= bh; y += 35) {\r\n        context.moveTo(p, 0.5 + y + p);\r\n        context.lineTo(bw + p, 0.5 + y + p);\r\n    }\r\n    context.strokeStyle = \"black\";\r\n    context.stroke();\r\n  }\r\n\r\n\r\n  useEffect(()=>{\r\n      drawBoard()\r\n      console.log('drawing board')\r\n      var movesRef = firestore.collection('games').doc(props.gameData.docID).collection('moves')\r\n\r\n      //on board render, draw out every move so far\r\n      movesRef.get().then(query=>{\r\n          query.forEach(doc => {\r\n            drawPiece(doc.data().x, doc.data().y, doc.data().color)\r\n          })\r\n      })\r\n      props.socket.on('lostGame', () =>{\r\n        console.log('lost')\r\n        setGameInfo(props.opponentName + ' wins!')\r\n        setTurn(false)\r\n      })\r\n      props.socket.on('rematchRequested', () => {\r\n        setGameInfo(props.opponentName + ' wants to rematch!')\r\n        setRequestedRematch(true)\r\n        setIsNewGame(true)\r\n      })\r\n\r\n      props.socket.on('startRematch', () => {\r\n        //reinit game\r\n        let newArray = Array.from({length: 10},()=> Array.from({length: 10}, () => 0))\r\n        setPlaced(newArray)\r\n        setGameInfo(undefined)\r\n        reInitBoard()\r\n        setIsNewGame(true)\r\n        setTurn(true)\r\n        movesRef.get().then(query => {\r\n          query.docs.forEach(doc => {\r\n            movesRef.doc(doc.id).delete()\r\n          })\r\n        })\r\n      })\r\n\r\n  }, [props.opponentName, props.socket])\r\n\r\n  function checkwin(){\r\n      var numConsecHorizontal = 0;\r\n      for(var j = 0; j < 20; j++){\r\n        for(var i = 0; i <= 20; i++){\r\n          if(placed[j][i] === 1 && placed[j][i+1] === 1){\r\n            numConsecHorizontal++\r\n            if(numConsecHorizontal === 4){\r\n              return 'win';\r\n            }\r\n          }else{\r\n            numConsecHorizontal = 0;\r\n          }\r\n        }\r\n      }\r\n    \r\n      var numConsecVertical = 0;\r\n      for(j = 0; j < 20; j++){\r\n        for(i = 0; i < 20; i++){\r\n          if(placed[i][j] === 1 && placed[i+1][j] === 1){\r\n            numConsecVertical++\r\n            if(numConsecVertical === 4){\r\n              return 'win';\r\n            }\r\n          }else{\r\n            numConsecVertical = 0;\r\n          }\r\n    \r\n        }\r\n      }\r\n      //checking left diagonals\r\n      var UpperConsecDiagonal = 0;\r\n      var LowerConsecDiagonal = 0;\r\n      for(j = 0; j < 20; j++){\r\n        for(i = 0; i < 20-j; i++){\r\n          if(placed[i][i+j] === 1 && placed[i+1][i+1+j] === 1){\r\n            UpperConsecDiagonal++;\r\n            if(UpperConsecDiagonal === 4){\r\n              return 'win';\r\n            }\r\n          }else{\r\n            UpperConsecDiagonal = 0;\r\n          }\r\n        }\r\n        for(i = 0; i < 20-j; i++){\r\n          if(placed[i+j][i] === 1 && placed[i+1+j][i+1] === 1){\r\n            LowerConsecDiagonal++;\r\n            if(LowerConsecDiagonal === 4){\r\n              return 'win';\r\n            }\r\n          }else{\r\n            LowerConsecDiagonal = 0;\r\n          }\r\n        }\r\n      }\r\n    \r\n      var k\r\n      for(i = 0; i < 19; i++){\r\n        for(j = 19, k = 0; j >= 0; k++, j--){\r\n          if(placed[k][j-i] === 1 && placed[k+1][j-1-i] === 1){\r\n            UpperConsecDiagonal++;\r\n            if(UpperConsecDiagonal === 4){\r\n              return 'win';\r\n            }\r\n          }else{\r\n            UpperConsecDiagonal = 0;\r\n          }\r\n        }\r\n    \r\n        for(j = 19, k = 1; k+i < 19; k++, j--){\r\n          if(placed[k+i][j] === 1 && placed[k+i+1][j-1] === 1){\r\n            LowerConsecDiagonal++;\r\n            if(LowerConsecDiagonal === 4){\r\n              return 'win';\r\n            }\r\n          }else{\r\n            LowerConsecDiagonal = 0;\r\n          }\r\n        }\r\n      }\r\n    \r\n      return 0;\r\n  }\r\n\r\n  function requestRematch(){\r\n    if(requestedRematch){\r\n      props.socket.emit('acceptRematch', props.gameData.otherUid)\r\n      //reinit game\r\n      let newArray = Array.from({length: 10},()=> Array.from({length: 10}, () => 0))\r\n      setPlaced(newArray)\r\n      setTurn(false)\r\n      setGameInfo(undefined)\r\n      reInitBoard()\r\n    }else{\r\n      props.socket.emit('requestRematch', props.gameData.otherUid)\r\n      setGameInfo('Rematch Requested')\r\n      document.getElementById('rematchBtn').style.display = 'none'\r\n    }\r\n  }\r\n\r\n  return(\r\n      <div id = 'gameWrapper'>\r\n        <div>\r\n          {gameInfo &&\r\n            <div id = 'gameResultWrapper'> \r\n              <p id = 'gameResult'>{gameInfo}</p>\r\n              <button id = 'rematchBtn' onClick = {requestRematch}>rematch</button>\r\n              <button id = 'leaveBtn' onClick = {props.leaveMatch}>leave</button>\r\n            </div>\r\n          }\r\n          <canvas ref = {canvasRef} onClick = {handleClick} id = \"omokcanvas\" width = \"700\" height=\"700\" />\r\n          <GameLogic {...props} drawPiece = {drawPiece} setTurn = {setTurn} isNewGame = {isNewGame} setIsNewGame = {setIsNewGame}/> \r\n        </div>\r\n          <BoardChat {...props}/>\r\n      </div> \r\n  )\r\n    \r\n}\r\n\r\nexport default Board","import ChallengeBox from './ChallengeBox'\r\nimport { useState, useEffect } from 'react'\r\nimport Board from './Board'\r\nimport { firestore } from '../../firebase'\r\n\r\nfunction Play(props){\r\n    var [gameData, setGameData] = useState()\r\n\r\n    var headerStyle = {width: '100%'}\r\n    var content\r\n\r\n    //show board\r\n    if(props.gameData){\r\n        content = <Board {...props} {...gameData}/>\r\n        document.getElementById('onlineSidebar').style.display = 'none'\r\n        headerStyle = {width: 'calc(100% - 400px)'}\r\n    //show challenges\r\n    }else{\r\n        content = <ChallengeBox {...props} accept = {accept}/>\r\n    }\r\n\r\n    useEffect(()=>{\r\n        if(props.gameData){\r\n            firestore.collection('users').doc(props.gameData.otherUid).get().then(doc => {\r\n                setGameData({\r\n                    opponentName: doc.data().name,\r\n                    opponentPhoto: doc.data().photo,\r\n                })\r\n            })\r\n        }\r\n    }, [props.gameData])\r\n\r\n    function accept(otherUid){\r\n        props.socket.emit('acceptGame', otherUid)\r\n    }\r\n    return(\r\n        <div id = 'playWrapper'>\r\n            <div id = 'playHeaderWrapper'>\r\n                <div id = 'playHeader' style = {headerStyle}>Play</div>\r\n                {props.gameData && gameData &&\r\n                <div>\r\n                    <img id = \"opponentPhoto\" src={gameData.opponentPhoto} alt = \"opponentPhoto\"/> \r\n                    <div id = 'playOpponentHeader'>{gameData.opponentName}</div>\r\n                </div>}\r\n            </div>\r\n            <div id = 'playContent'>\r\n                {content}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Play","import { useState } from 'react'\r\nimport { firestore, auth } from '../firebase'\r\n\r\nfunction User(props){\r\n    var [isHovering, setHovering] = useState(false)\r\n\r\n    function handleMouseHover(){\r\n        if(props.uid !== auth.currentUser.uid){\r\n            setHovering(!isHovering)\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className = \"userInfoWrapper\" onMouseEnter = {handleMouseHover} onMouseLeave = {handleMouseHover}>\r\n            <img id = \"onlinePic\" src={props.photo} alt = \"profile pic\"/>\r\n            <div className = \"onlineUsername\">{props.name}</div>\r\n                {isHovering && \r\n                <div className = \"userOptions\">\r\n                    <button className = \"userOptionsBtn\" onClick = {() => props.showChat(props)}>Message</button>\r\n                    <button className = \"userOptionsBtn\" onClick = {() => props.challenge(props.uid)}>Challenge</button>\r\n                </div>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default User","import React, {useState, useEffect} from 'react'\r\nimport User from './User'\r\nimport { firestore, FieldValue } from '../firebase'\r\n\r\nfunction OnlineSidebar(props){\r\n    var [users, setUsers] = useState()\r\n\r\n    useEffect(() =>{\r\n        getUsers()\r\n    }, [])\r\n\r\n    async function getUsers(){\r\n        var usersRef = firestore.collection('users')\r\n        var usersInit = []\r\n        const snapshot = await usersRef.get()\r\n        var i = 0\r\n        snapshot.forEach(doc => {\r\n            var user = {...doc.data(), id: i, uid: doc.id}\r\n            usersInit.push(user)\r\n            i++\r\n        });\r\n        setUsers(usersInit)\r\n    }\r\n\r\n    async function showChat(otherUser){\r\n        if(otherUser.uid === props.uid){\r\n            return\r\n        }\r\n        props.displayMsgs() \r\n        var docid\r\n        var users = [props.uid, otherUser.uid]\r\n        if(props.uid < otherUser){\r\n            docid = props.uid + '+' + otherUser.uid\r\n        }else{\r\n            docid = otherUser.uid + '+' + props.uid\r\n        }\r\n\r\n        var chatRef = firestore.collection('chats')\r\n        chatRef.doc(docid).get()\r\n            .then(doc =>{\r\n                if(!doc.exists){\r\n                    chatRef.doc(docid).set({\r\n                        users,\r\n                        lastSent: FieldValue.serverTimestamp(),\r\n                    })\r\n                }\r\n            })\r\n    }\r\n\r\n    function challenge(otherUid){\r\n        firestore.collection('users').doc(otherUid)\r\n            .collection('challenges').doc(props.uid).set({played: 'no', name: props.name})\r\n    }\r\n\r\n    return(\r\n        <div id = \"onlineSidebar\">\r\n            <div id = \"usersTitle\">Users</div>\r\n             {users && users.map(user => <User key = {user.id} {...user} showChat = {showChat} challenge = {challenge}/>)} \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OnlineSidebar","function Chat(props){\r\n    return(\r\n        <div className = 'msg' onClick = {() => props.displayChatBox(props)}>\r\n            <img className = \"msgProfile-pic\" src={props.photo} alt = \"profile pic\"/> \r\n            <div className = 'msgUserInfo'>\r\n                <div style = {{ fontWeight: \"600\"}}>{props.name}</div>\r\n                <div style = {{ color: \"grey\"}}>Dec 16</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat","import { auth } from '../../firebase'\r\n\r\nfunction Msg(props){\r\n    const text = props.text\r\n    const msgClass = props.uid === auth.currentUser.uid ? 'sent' : 'received';\r\n    return(\r\n        <div id = \"bubble\" className = {msgClass}>\r\n            <p id = \"msgTxt\" className = {msgClass+\"Text\"}>{text}</p>\r\n        </div>\r\n    )\r\n}\r\nexport default Msg","import { firestore, FieldValue } from '../../firebase'\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore'\r\nimport Msg from './Msg'\r\n\r\nfunction Chatbox(props){\r\n    const messagesRef = firestore.collection('chats').doc(props.id).collection('messages')\r\n    const query = messagesRef.orderBy('createdAt').limit(25)\r\n    const [messages] = useCollectionData(query, { idField: 'id'})\r\n\r\n    console.log(messages)\r\n\r\n    function sendMsg(e){\r\n        if(e.key === 'Enter'){\r\n            e.preventDefault();\r\n            const msg = e.target.value\r\n            if(msg !== ''){\r\n                sendMsgToDb(msg)\r\n            }\r\n            e.target.value = ''\r\n        }\r\n    }\r\n\r\n    async function sendMsgToDb(msg){\r\n        await messagesRef.add({\r\n            text: msg,\r\n            createdAt: FieldValue.serverTimestamp(),\r\n            uid: props.uid\r\n        })\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <div id = 'msgTextHeader' style = {{ paddingTop: '5px'}}>\r\n                <img className = \"chatBox-Pic\" src={props.photo} alt = \"profile pic\"/> \r\n                {props.name}\r\n            </div>\r\n            <div id = 'msgArea'>\r\n                {messages && messages.map(message => <Msg key = {message.id} text = {message.text} uid = {message.uid}/>)}\r\n            </div>\r\n            <div className = 'msgInputWrapper'>\r\n                <div className = 'msgInput'>\r\n                    <textarea id='chatInputArea' onKeyDown = { sendMsg } className=\"browser-default\" type=\"text\" autoComplete=\"off\"></textarea>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Chatbox","import Chat from './Chat'\r\nimport Chatbox from './Chatbox'\r\nimport ReactDOM from 'react-dom'\r\nimport { useEffect } from 'react'\r\n\r\nfunction MessageLayout(props){\r\n    function displayChatBox(data){\r\n        const element = <Chatbox {...data}/>\r\n        ReactDOM.render(element, document.getElementById('chatbox')) \r\n    }\r\n\r\n    useEffect(()=>{\r\n        document.getElementById('onlineSidebar').style.display = 'block'\r\n    })\r\n    return(\r\n        <>\r\n            <div id = 'messages'>\r\n                <div id = 'msgTextHeader'>Messages</div>\r\n                {props.messages && props.messages.map(msg => <Chat key = {msg.id} uid = {props.uid} {...msg} displayChatBox = {displayChatBox}/>)}\r\n            </div>\r\n\r\n            <div id = 'chatbox'>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default MessageLayout","import '../css/fak.css'\r\nimport heart from '../images/heart1.png'\r\nimport comment from '../images/comment1.png'\r\nimport { useState } from 'react'\r\nimport { firestore, storage, auth } from '../firebase'\r\n\r\nfunction Post(props){\r\n    var optionsBtn\r\n    var [options, setOptions] = useState()\r\n\r\n    if(props.uid === auth.currentUser.uid){\r\n        optionsBtn = <div className = 'postOptionsBtn noselect' onClick = {showOptions}>&#10247;</div>\r\n    }\r\n\r\n    function showOptions(){\r\n        if(options === undefined){\r\n            setOptions(<div className = 'postOptions'>\r\n                            <button className = 'deletePostBtn' onClick = {deletePost}>Delete</button>\r\n                        </div>)\r\n        }else{\r\n            setOptions(undefined)\r\n        }\r\n    }\r\n\r\n    async function deletePost(){\r\n        await firestore.collection('posts').doc(props.docId).delete()\r\n        if(props.photo){\r\n            await storage.ref().child(props.docId).delete();\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className = \"post\">\r\n            <div className = \"postUserInfoWrapper\">\r\n                <div style = {{display: 'flex', flexDirection: 'row'}}>\r\n                    <img className = \"postProfile-pic\" src={props.profilePhoto} alt = \"profile pic\"/> \r\n                    <div className = \"postTextWrapper\">\r\n                        <div style = {{display: \"flex\", gap: \"10px\"}}>\r\n                            <b className = \"postName\">{props.name}</b>\r\n                            <div style = {{color: \"grey\"}}>{props.time}</div>\r\n                        </div>\r\n                        <p className = \"postText\">{props.text}</p>\r\n                    </div>\r\n                </div>\r\n                {optionsBtn}\r\n            </div>  \r\n            {options}\r\n            {props.photo && <img className = \"postPic\" src={props.photo} alt = \"post pic\"/> }\r\n            <div className = \"postIconWrapper\">\r\n                <img className = \"likeBtn\" src={heart} alt = \"heartIcon\"/> \r\n                <img className = \"commentBtn\" src={comment} alt = \"commentIcon\"/> \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Post","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAADqklEQVRoge3ZTYhWVRzH8c84M6A0OSlEZZaLjMFeyByL3qhFiBvNIqXcRIswjKJdLSsscFtMr1RQCW3SghZlVtAmekGKQo0WlWlBlC9l6hTOPC3OOd1bTDP33rnPfZ7g+cLlzJznf/7n97/nnHvP+V969OjRo0cH6CthO4KbsQrn4jwM4DD24AO8hq8K+luG9bgeF2MhTuEADmIX3sDXJTROy0q8h1aBaxJvY/k0/i6PNpMFfb6L0dkEMIixXIeH8DxuEkbnNMwVRmYtnhZGpyXc2UfQn/PXj0fjb8nfU1gTfcyNPkewDi9Em3SDnhBmQCkW4P3o5Di2YH6BdqfjYYzHti/HAPqxLdaN46FoOxPzheBPyEbnjKJBDOaC+F6YCmVZjv3RxzZZEN/hsgr+RoW1k4IpNDJjsiAWVeg0sST6SHN9P86fhb9FsmAen8l4pTAfj6s2Ev9mVJhK41hRg78VwjSbmMlfejptqaHTxAPxqovHBI27/stgRPY0KbKwi5IWe10My56OF6bKOTmDW2L5On6rseOJeNXFr8KLkvCCxj8DuTGWb9bYabtIGlelinwgS2K5pzE51dkbyymfgseEeTfUmJzqDAlaj6WK/IikBXmqSUUVmYzl3/rzgRyJ5cLG5FQnaTycKvKB/BLLcxqTU52k8VCqyAfyRSyvaExOda6M5eepIh/Ix7G8ujE51bkqlp9M9eMy4UlwRDgbdCvzhJdiS9iNTMnuaLChIVFVuF3QOOVoJO6LRruVO883RR8+EzRuns5wHn6Mhre2X1dp1gvaDiow/e+NxgeEnWa3MCwE0MI9RRoM4NPY4MX26SrNS4Kmj5Q4FlwqSyDc3R5dpdgsaDmJi8o2vis2/kNuu9wBVkcNLdxZ1UlKRPyOa+rRVYrrhPxBoYTDdPTjVVkwTY7MDcJJtSWkYmd9XB4UjpZpjm6crcMCbIx9tbA9aqiFfiGFmXJUz6qQvizYz1ZZmvaVdvTTJ6RDJ2Inbwmp1bpYgJ3R94SQVm3r7mItjsYOv1HPbvlafCvbtK6pwWchluJLWeZ9q2rzeAAP4s/oa5+wC2+UITwnWzcf4oIS7ZfGNumzwTPCZ4WOsRo/REEnhDs8Zxr7PmySZW1+Er65dAVnYodsdHZi8RR2i/FOzm57bNt1bMDPgsijuC332zohwZEW9KbG1ZXkbCF/nO76GJ7M/b8DZ3VMXQXuELY1KYCTuL+jimbBJUKedm/8+3/NsO46afZohL8AQdD5tJ4fnIQAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAADzElEQVRoge3Z62tcRRjH8U/aJKZNNWmkL/pCi2nUWq0WLN7witB/QUq9vPVKFcFLFUXBl4Iogm99UVQEry3FomCpVqv1ElvpRa2oELSoaFttWkjii2dOclJ2k92zZ7cr5AuHw56Zeeb37Dkz88wzzDHHHDPRUaKtc3E11mAIg1iEvlT+N47iEH7A5/gEv5SooTBDeBp7MVHlOpquauXf4Cksb7F2cB22Yiwn6Gs8j/XirQxUaDeQym7FCxjOtR/DFlzTZO2If21LrvNDeBTnNWBzEBvxY87uOw3arEoH7sc/qaMDuAXzSuxjHtbhYOrjGO4r0b5FeD0ZPy7eQGeZHZxCFx7DaOrzVfQ2anQAnyaDB3FJowbr4FJ8l/reif6ihs7El8nQh6am0VbSj+1Jw27xddTFfDErTWAbFpSprk4W4oOkZbPQVjOPp4bDOKt0afXThz1C0yO1NroMJ8Uidn5zdBXiQjFrnlDjWH1feH53E0UVZYPQ9t5sFW9MFb/V3Cm2KF3YJzReP1PFN1Kl9S0QVZTbhcbXqlXoF2PjMLpbJKoIZ+B3MVYmJ6J8iLFWvLrNwqF25YTQ2C00Y7ojWdS5rYWiipJpnIyU846sSvfhlskpTqZxVaXCA2IQtfP4yOgRWvdnD/JvpE9Et+08PjJG0zUZ/+UdmVDu/qLZdAjNmC78TzG1LWy1ogL0CK1Hsgd5R35N93NaqaggWaJiMgOTd2R3ul/RMjnFWZ3ue7IHeUd2pfsNLZNTnGwh/LhSYa/Y8GdjpV3pESHKqNjFVmST9g8a7xAaX5mp0uUYF4tju4bx+4Uj185W+a1UcUOTRRXhAaFtay2VB8VY+RcrmiiqXi4SmkZxca2N7hGe78Xi5uiqi36xa53AQ/U07MDLpnJap3O1700aJvC2AmFUt6l80k6cXaa6GunHjqRhlwZSpwvEbixLma4pQ12NrMb3qe+PlJDp7MKLyeBJPNyowVnoxhOmktiblJDEzrMuGT5cptEcnbhNHMtlJ113NqOj5aa+1TIZEinan5P9cbyJZfUYqWf1virdv6hSvhFLxZngMH7CXyLrkbFEnEStwJUiIbgylY3jXTyj/D9rGtmR29pTnnfiOdUPO4+LBbZa+Vd4UoNHbbUeTy8Vr35ErPxj6fkFeAk34TcR1iwT2Y1BsZguFs4eEUfU2fH0Z+J4eqQRB+ol+8fvSr+X4Fnx2UyIfGw7hTMVWSkEH8ODIqjMHMjC6ar7gnZhvliMKn3b23Hz6ZM2ndlmrXvFGxnBH+IsfIcY+PuaK22O/zf/AZh9+Zk/uRRIAAAAAElFTkSuQmCC\"","import Post from './Post'\r\nimport { firestore, FieldValue, storage } from '../firebase'\r\nimport picture from '../images/picture1.png'\r\nimport cancel from '../images/cancel.png'\r\nimport { useState, useEffect } from 'react'\r\n\r\nfunction Feed(props){\r\n    var [postImage, setPostImage] = useState()\r\n\r\n    function sendPost(e){\r\n        if(e.key === 'Enter'){\r\n            e.preventDefault();\r\n            post()\r\n        }\r\n    }\r\n\r\n    async function post(){\r\n        const msg = document.getElementById('postArea').value\r\n        if(msg === ''){\r\n            return\r\n        }\r\n        document.getElementById('postArea').value = ''\r\n\r\n        const postsRef = firestore.collection('posts')\r\n        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\r\n        const current = new Date()\r\n        const today = months[current.getMonth()] + ' ' + current.getDate()\r\n        const data = {\r\n            uid: props.uid,\r\n            text: msg,\r\n            createdAt: FieldValue.serverTimestamp(),\r\n            time: today\r\n        }\r\n        const res = await postsRef.add(data)\r\n\r\n        const image = new Promise(resolve => {\r\n            if(document.querySelector(\"#postImage\").files[0] !== undefined){\r\n                resolve()\r\n            }\r\n        })\r\n\r\n        image.then(()=>{\r\n            const file = document.querySelector(\"#postImage\").files[0]\r\n            const ref = storage.ref()\r\n            const task = ref.child(res.id).put(file)\r\n            task.then(() => {\r\n                firestore.collection('posts').doc(res.id)\r\n                .update({                    \r\n                    photo: 'yes'\r\n                }) \r\n            })\r\n            removeImage()\r\n        })\r\n    }   \r\n\r\n    function showUploadedImage(){\r\n        const reader = new FileReader()\r\n        const file = document.querySelector('#postImage').files[0]\r\n        if(file){\r\n            reader.readAsDataURL(file)\r\n        }\r\n        reader.addEventListener(\"load\", function () {\r\n            // convert image file to base64 string\r\n            setPostImage(<div id = 'postImageWrapper'>\r\n                            <img id = \"uploadedPic\" src = {reader.result}alt = \"uploadPic\"/>\r\n                            <img id = \"removeImageBtn\" src = {cancel} onClick = {removeImage} alt = 'removeImage'/>\r\n                            <button id = 'postBtn' onClick = {post}>Post</button>\r\n                        </div>)\r\n        }, false)\r\n    }\r\n\r\n    function removeImage(){\r\n        document.getElementById('postImage').value = \"\";\r\n        setPostImage()\r\n    }\r\n\r\n    function homeClick(){\r\n        document.getElementById('content').scrollTop = 0\r\n    }\r\n\r\n    useEffect(()=>{\r\n        document.getElementById('onlineSidebar').style.display = 'block'\r\n    })\r\n    \r\n    return(\r\n        <div style = {{height: '100%'}}>\r\n        <div id = \"homeHeader\">\r\n            <p style = {{cursor: 'pointer', width: '60px'}}onClick = {homeClick}>Home</p>\r\n        </div>\r\n        <div id = \"feed\">\r\n            <div id = \"postInput\">\r\n                <div style = {{display: 'flex', alignItems: 'center', width: '100%', height: '43px'}}>\r\n                    <form>\r\n                        <label>\r\n                            <img id = \"uploadPic\" src={picture} alt = \"uploadPic\"/> \r\n                            <input id = \"postImage\" onChange={showUploadedImage} type=\"file\" style = {{display:\"none\"}}/>\r\n                        </label>\r\n                    </form>\r\n                    <textarea id='postArea' placeholder='post something!' onKeyDown = {sendPost} className=\"browser-default\" type=\"text\" autoComplete=\"off\"></textarea>\r\n                </div>  \r\n                {postImage}\r\n            </div>\r\n            {props.posts && props.posts.map(post => <Post key = {post.id} name = {post.name} profilePhoto = {post.profilePic} text = {post.text} time = {post.time} photo = {post.photo ? post.photo: undefined} uid = {post.uid} docId = {post.id}/>)}\r\n        </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Feed","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAABM0lEQVRYhe2W3WrCQBCFv4S+VilEBIMXpT5WEbwpVCn2rfoC2jdQ++dFepEJGddMdkO1e7MHQsJmNuebMyEEkpIiK1PXVQzv/J9Nz3TTsZZ1rF1SJ0lHT+CaAFPgHdgCZciGisu+iFv1zI3lE30EWr4EcoYBl9QpbIBJiE8fQA6s5fhraoMBGvPm/ksARF9agwC0+UGOClhhfy98aQUDZMCzMh8Bt8CeNgkXQu+pgNcOiCAAt/NC1Y2BD7n3pCCstNyReQG6Onc1Bj5px5E7ewrqtHaypsfhBbA6d1UCX1L7JucdcKdqCtokltKcFyDEvNFUQRypu3alIfT7YQJYsVuaKIiFUaPH4QUI6dzVPfAt++dGjU5i8JcwRA/AjzzjsQfiagAAMwVhJXHik/4Jk5Ki6xdOeZDYnBW7qwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABFUlEQVRIid2VTW7CQAyFP7UiZ+kCVrCDHqIpiDtBb0EERyoVZVsUtmFNWMyMVJk3kxDEon2SpZF/nh3P2IH/jgyYAxtgC5y8bIG1t2VdyafAHqgbZA/ktxA/Ax8tiK0sfWwjupD/TpLE+x3kQaLtyrju+RgYAaUgKoEhMDH6byIXPxckQ2/rmySl1+ELsHEzlWAjHI/AwNtfgB+hO4i4QiX4Eo622r45q9bVuDm5QhVxtl+SqjxIFRyfVKaWqBO2s1I+vEVr4aguVF28jVupBA9/pmrQJqQHbQS8Gv2OxIbNBdGt8hYjD7hn2S2ayMGt3GUH8tbrOiDHLa4m4h0t2hJDhnsRBfCJm9DKnwvcX6/Xlfxv4AK2lPndEfN11QAAAABJRU5ErkJggg==\"","function Profile(props){\r\n    return(\r\n        <div id = 'profile'>\r\n            <div id = 'profileHeader'>\r\n                <img id = \"profilePagePic\" src={props.photo} alt = \"profile pic\"/> \r\n                <div style = {{fontWeight: '600', fontSize: '30px'}}>{props.name}</div>\r\n                <div id = 'profileBio'>i am good dog</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Profile","import React, { Component } from 'react'\r\nimport Play from './Play/Play'\r\nimport Board from './Play/Board'\r\nimport OnlineSidebar from './OnlineSidebar'\r\nimport MessageLayout from './Messages/MessageLayout'\r\nimport Feed from './Feed'\r\nimport Profile from './Profile'\r\nimport M from 'materialize-css'\r\nimport '../css/fak.css'\r\nimport openSocket from 'socket.io-client'\r\n\r\nclass Layout extends Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.homeClick = this.homeClick.bind(this)\r\n        this.messagesClick = this.messagesClick.bind(this)\r\n        this.playClick = this.playClick.bind(this)\r\n        this.profileClick = this.profileClick.bind(this)\r\n        this.leaveMatch= this.leaveMatch.bind(this)\r\n        this.state = {home: true, messages: false, play: false, profile: false, gameData: undefined}\r\n    }\r\n\r\n    homeClick(){\r\n        this.setState({home: true})\r\n        document.getElementById('content').scrollTop = 0\r\n    }\r\n\r\n    playClick(){\r\n        this.setState({play: true, home: false, messages: false, profile: false})\r\n    }\r\n\r\n    messagesClick(){\r\n        this.setState({messages: true, home: false, play: false, profile: false})\r\n    }\r\n\r\n    profileClick(){\r\n        this.setState({profile: true, messages: false, home: false, play: false})\r\n    }\r\n\r\n    leaveMatch(){\r\n        this.setState({gameData: undefined, play: true})\r\n    }\r\n\r\n    componentDidMount(){\r\n      M.AutoInit()\r\n      let isMounted = true\r\n      document.getElementById('image-file').addEventListener('change', function(){\r\n        const reader = new FileReader();\r\n        const file = document.querySelector('#image-file').files[0];\r\n        reader.addEventListener(\"load\", function () {\r\n            // convert image file to base64 string\r\n            document.getElementById('change-pic').src = reader.result;\r\n        }, false);\r\n        if(file){\r\n            reader.readAsDataURL(file);\r\n        }\r\n      })\r\n      this.socket = openSocket(\"http://localhost:5000\",{query: `uid=${this.props.uid}`})\r\n      this.socket.on('startGame', (data) =>{\r\n          if(isMounted){\r\n            this.setState({gameData: data})\r\n            this.playClick()\r\n          }\r\n      })\r\n      return () => { isMounted = false }\r\n    }\r\n\r\n    render(){\r\n        const home = this.state.home\r\n        const messages = this.state.messages\r\n        const play = this.state.play\r\n        const profile = this.state.profile\r\n        let content\r\n        if(home){\r\n            content = <Feed {...this.props}/>\r\n        }else if(messages){\r\n            content = <MessageLayout messages = {this.props.messages} uid = {this.props.uid}/>\r\n        }else if(play){\r\n            content = <Play name = {this.props.name} uid = {this.props.uid} photo = {this.props.photo} socket = {this.socket} gameData = {this.state.gameData} leaveMatch = {this.leaveMatch}/>\r\n            //content = <Board {...this.props}/>\r\n        }else if(profile){\r\n            content = <Profile {...this.props}/>\r\n        }\r\n\r\n        return(\r\n            <div>\r\n                <div id=\"profile-modal\" className=\"modal\">\r\n                        <form>\r\n                            <label>\r\n                                <img id = \"change-pic\" src={this.props.photo} alt = \"profile pic\"/>\r\n                                <i id = \"upload-icon\" className = \"material-icons\">cloud_upload</i>\r\n                                <input id = \"image-file\" type=\"file\" style = {{display:\"none\"}}/>\r\n                            </label>\r\n                        </form>\r\n                        <div id = \"change-name\">\r\n                            <label>Name</label>\r\n                            <input className = \"input-field\" defaultValue = {this.props.name} id=\"changeName-input\" maxLength=\"15\" type=\"text\" autoComplete = \"off\"/>\r\n                        </div>\r\n                        <button id = \"profile-submit\"  onClick={this.props.updateProfile} className=\"modal-close waves-effect waves-green btn-flat\">Apply</button>\r\n                </div>\r\n                <div id = \"content\">\r\n                    <div id = \"sidebar\">\r\n                        <a className = \"modal-trigger\" href=\"#profile-modal\"><img id = \"profile-pic\" src={this.props.photo} alt = \"profile pic\"/></a>                    \r\n                        <i id = \"profile-icon\" className = \"material-icons\">person</i>\r\n                        <button onClick = {this.homeClick} className = \"sidebar-btn\">Home</button>\r\n                        <button onClick = {this.playClick} className = \"sidebar-btn\">Play</button>\r\n                        <button onClick = {this.messagesClick} className = \"sidebar-btn\">Messages</button>\r\n                        <button onClick = {this.profileClick} className = \"sidebar-btn\">Profile</button>\r\n                    </div>\r\n                    {content}\r\n                    <OnlineSidebar {...this.props} displayMsgs = {this.messagesClick}/>\r\n                </div>  \r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Layout","import React, { Component } from 'react'\r\nimport { auth, googleAuthProvider } from '../firebase'\r\n\r\nclass SignIn extends Component{\r\n    signInWithGoogle = () => {\r\n        const provider = googleAuthProvider;\r\n        auth.signInWithPopup(provider);\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <>\r\n              <button className=\"sign-in\" onClick={this.signInWithGoogle}>Sign in with Google</button>\r\n            </>\r\n          )\r\n    }\r\n}\r\n\r\nexport default SignIn","import Layout from './components/Layout'\nimport SignIn from './components/SignIn'\nimport './css/App.css'\nimport 'materialize-css/dist/css/materialize.min.css'\n\nimport { firestore, auth, storage } from './firebase'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport React, { useState, useEffect } from 'react'\nimport { useCollectionData } from 'react-firebase-hooks/firestore'\nimport { GameProvider } from './GameProvider'\n\nfunction App() {\n  const [user] = useAuthState(auth)\n  var [username, setUsername] = useState()\n  var [photoLink, setPhoto] = useState()\n  var [privateChats, setChats] = useState()\n  var [posts, setPosts] = useState()\n  var chatsQuery, postsQuery\n\n  if(user){\n    var postsRef = firestore.collection('posts')\n    var chatsRef = firestore.collection('chats')\n    chatsQuery = chatsRef.where('users', 'array-contains-any', [user.uid]).limit(25)\n    postsQuery = postsRef.orderBy('createdAt', 'desc').limit(25)\n  }\n\n  //listen for any updates in these queries and update accordingly\n  const [chats] = useCollectionData(chatsQuery, { idField: 'id' })\n  const [initalPosts] = useCollectionData(postsQuery, { idField: 'id' })\n\n  //set username and photo\n  useEffect(()=>{\n    if(user){\n      //set the name and photo of current user\n      var usersRef = firestore.collection('users')\n      usersRef.doc(user.uid).get().then(function(doc){\n        if(doc.exists){\n          setUsername(doc.data().name);\n          setPhoto(doc.data().photo);\n        }else{\n          setUsername(user.displayName);\n          setPhoto(user.photoURL);\n          usersRef.doc(user.uid).set({\n            name: user.displayName,\n            photo: user.photoURL,\n            status: 'online'\n          })\n        }\n      })\n    } \n\n  }, [user, username, photoLink]) \n\n  //set the messages data with the other user's name and photo\n  useEffect(() => {\n    async function setChatsData(thisUser){\n      var usersRef = firestore.collection('users')\n      for(var i = 0; i < chats.length; i++){\n        var otherUid\n        if(chats[i].users[0] === thisUser.uid){\n          otherUid = chats[i].users[1]\n        }else{\n          otherUid = chats[i].users[0]\n        }\n        var user = await usersRef.doc(otherUid).get()  \n        chats[i].name = user.data().name\n        chats[i].photo = user.data().photo\n        chats[i].otherUid = otherUid\n      }\n      setChats(chats)\n    }\n    if(chats !== undefined && chats.length > 0){\n      setChatsData(user)\n    }\n  }, [chats, user])\n  \n  //set the post data from user uid\n  useEffect(() => {\n    async function setPostsData(){\n      var usersRef = firestore.collection('users')\n      for(var i = 0; i < initalPosts.length; i++){\n        var user = await usersRef.doc(initalPosts[i].uid).get()  \n        initalPosts[i].name = user.data().name\n        initalPosts[i].profilePic = user.data().photo\n  \n        if(initalPosts[i].photo !== undefined){\n          var url = await storage.ref().child(initalPosts[i].id).getDownloadURL()\n          initalPosts[i].photo = url\n        }\n      }\n      setPosts(initalPosts)\n    }\n    if(initalPosts !== undefined && initalPosts.length > 0){\n      setPostsData()\n    }\n  }, [initalPosts, username, photoLink])\n\n  async function updateProfile(){\n    const image = new Promise(resolve => {\n      if(document.querySelector(\"#image-file\").files[0] !== undefined){\n        resolve();\n      }\n    })\n\n    image.then(() => {\n      const file = document.querySelector(\"#image-file\").files[0];\n      const ref = storage.ref();\n      const name = user.uid;\n      //insert image into storage\n      const task = ref.child(name).put(file);\n      task.then(snapshot => {\n          snapshot.ref.getDownloadURL().then(url =>{\n              setPhoto(url)\n              //update user's photo in 'users' collection\n              firestore.collection('users').doc(user.uid)\n              .update({                    \n                  photo: url\n              }); \n          })\n      })\n    })\n\n    const inputName = document.getElementById('changeName-input').value\n    if(inputName !== user.displayName && inputName !== ''){\n      setUsername(inputName);\n      //update user's name in 'users' collection\n      firestore.collection('users').doc(user.uid)\n      .update({\n        name: inputName\n      })\n    }\n  }\n  return (\n    <div className=\"App\">\n      <header>\n        <SignOut/>\n      </header>\n      <GameProvider>\n        {user ? <Layout posts = {posts} messages = {privateChats} updateProfile = {updateProfile} name = {username} photo = {photoLink} uid = {user.uid}/> : <SignIn/>}\n      </GameProvider>\n    </div>\n  );\n}\n\nfunction SignOut() {\n  const mystyle = {\n    position: \"absolute\",\n    left: \"0\",\n    zIndex: \"1000\",\n    bottom: \"2%\",\n    marginLeft: \"7px\",\n  };\n  return auth.currentUser && (\n    <button style = {mystyle} className=\"sign-out\" onClick={() => auth.signOut()}>Sign Out</button>\n  )\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}